
[Data]
life = 3000
power = 4000
attack = 95
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = 0
guard.sparkno = 40
KO.echo = 0
volume = 0
IntPersistIndex = 0
FloatPersistIndex = 0

[Size]
xscale = 1
yscale = 1
ground.back = 15
ground.front = 15
air.back = 10
air.front = 10
height = 55
attack.dist = 160
proj.attack.dist = 90
proj.doscale = 0
head.pos = 0, -45
mid.pos = 0, -25
shadowoffset = 0
draw.offset = 0,0

[Velocity]
walk.fwd  = 1.4	
walk.back = -1.4		
run.fwd  = 7.0, 0		
run.back = -5.2,-5.3	
jump.neu = 0,-8.5		
jump.back = -3		
jump.fwd = 3		
runjump.back = -2.55,-8.5
runjump.fwd = 3.8,-8.5	
airjump.neu = 0,-8.5	
airjump.back = -2.55	
airjump.fwd = 2.5

[Movement]
airjump.num = 1		
airjump.height = 35	
yaccel = .44	
stand.friction = .85	
crouch.friction = .82

;---------------------------------------------------------------------------
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,5
volume = 255
channel = 4

[State 170, 1]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = var(0) = 1
value = 184

[State 180, 1]
type = ChangeState
trigger1 = prevstateno != 9004
value = 181

[State 180, 1]
type = ChangeState
trigger1 = prevstateno = 9004
value = 183

;---------------------------------------------------------------------------
; Win pose 1
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0
sprpriority = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 100
flag = roundnotover

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal ;player
name = "sai"
ID = 182
stateno = 182
pos = 0,-6
postype = p1
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 8
helpertype = normal ;player
name = "short"
ID = 182
stateno = 182
pos = 7,3
postype = p1
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 11
helpertype = normal ;player
name = "krzywy"
ID = 182
stateno = 182
pos = 16,3
postype = p1
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 14
helpertype = normal ;player
name = "katana"
ID = 182
stateno = 182
pos = 24,4
postype = p1
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 17
helpertype = normal ;player
name = "sword"
ID = 182
stateno = 182
pos = 31,-4
postype = p1
facing = 1
ownpal = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = 7*facing

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S1,1

[State 181, 1]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

;---------------------------------------------------------------------------
; Swords
[Statedef 182]
type = S
ctrl = 0
anim = 180 + numhelper(182)
velset = 0,0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,12

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 700
ID = 700
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
scale =0.8,0.8

[State 0, Gravity]
type = Gravity
trigger1 = pos y <= 5

[State 181, 1]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = pos y > 5
y = 0

[State 0, ground]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = 186
ID = 186
pos = 0,2
postype = p1  ;p2,front,back,left,right
facing = 1
sprpriority = 3
scale = 1,1
bindtime = 100
removetime = -1

;---------------------------------------------------------------------------
; War Win
[Statedef 183]
type = S
ctrl = 0
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 110
flag = roundnotover

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic

;---------------------------------------------------------------------------
; Win Staff
[Statedef 184]
type = S
ctrl = 0
anim = 187
velset = 0,0
sprpriority = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 130
flag = roundnotover

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S4,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S1,1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal ;player
name = "staff"
ID = 182
stateno = 185
pos = 18,-35
postype = p1
facing = 1
ownpal = 1

[State 181, 1]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

;---------------------------------------------------------------------------
;Staff
[StateDef 185]
movetype = I
physics = A
anim = 10311
velset = 0.3, -7
sprpriority = 4

[State 0, SprPriority]
type = SprPriority
trigger1 = vel y > 0
value = 1

[State 0, ChangeState]
type = destroyself
trigger1 = vel y > 0 && pos y > -30

;---------------------------------------------------------------------------
; Introduction
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0
poweradd = 1000

[State 0, PowerSet]
type = PowerSet
trigger1 = Time = 0
value = 2000

[State 0, Helper]
type = Helper
trigger1 = time = 0
;trigger1 = partner, name != "Rock Lee"
;trigger1 = enemy, name != "Rock Lee"
;trigger1 = partner, name != "Maito Gai"
;trigger1 = enemy, name != "Maito Gai"
helpertype = normal ;player
name = "gai and lee"
ID = 191
stateno = 191
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time < 38
value = 0
movecamera = 0,1

;[State 190, 1] ;Freeze animation until PreIntro is over
;type = ChangeAnim
;trigger1 = RoundState = 0
;value = 190

[State 0, VelSet]
type = VelSet
trigger1 = time < 38
x = 10
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
x = -300*facing
y = -60

[State 0, ChangeAnim]
type = ChangeAnim
;trigger1 = pos x > 50 && facing = 1
;trigger2 = pos x < -50 && facing = -1
;triggerall = anim != 191
trigger1 = time = 38
value = 191

[State 0, VelSet]
type = VelSet
;trigger1 = anim = 191 && vel x = 12
trigger1 = time = 38
x = -4.567
y = -6

[State 0, VelSet]
type = Veladd
trigger1 = time > 38
y = 0.3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time%8 = 0 && time > 38 && pos y < 0
value = S5,1

[State 0, VelSet]
type = VelSet
trigger1 = pos y > 0
x = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = pos y > 0 && anim != 192
value = S4,0

[State 0, PosAdd]
type = Posset
trigger1 = pos y > 0 && anim != 192
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = pos y >= 0 && anim != 192
value = 192

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 192 && time = 100
value = S1,3

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = anim = 192 && animtime = 0
value = 0

;---------------------------------------------------------------------------
; Lee and Gai
[Statedef 191]
type = S
ctrl = 0
anim = 195
velset = 10,0
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 90
scale = 1,1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 0, Lee]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 193
ID = 193
pos = 30,30
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 100
sprpriority = 2
removetime = 100

[State 0, Gai]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 194
ID = 194
pos = 57,9
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 100
removetime = 100

[State 0, BindToParent]
type = BindToParent
trigger1 = time = 0
time = 38
facing = 1
pos = -38,-18

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 250
;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 1
anim = 196
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S24,0+random%17
channel = 2

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
velset = 2, 0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 200                       ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
attr = S, NA                     
damage = 35,7              
animtype = Light          
guardflag = MA                
hitflag = MAF                
priority = 3, Hit                                          
pausetime = 0,5              
sparkno = 0+random%4              
sparkxy = -15,-39                                      
hitsound = 35, 0+random%15;5, 21+random%5                 
guardsound = 6, 0                 
ground.type = High             
ground.slidetime = 5        
ground.hittime  = 12         
ground.velocity = -1        
airguard.velocity = -1,-.8    
air.type = High              
air.velocity = -1,-1          
air.hittime = 12 
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10 

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch 2
[Statedef 210]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
velset = 4,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 210                       ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 205, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
attr = S, NA                     
damage = 35,7               
animtype = Light          
guardflag = MA                
hitflag = MAF                
priority = 3, Hit                                          
pausetime = 0,5              
sparkno = 0+random%4              
sparkxy = -15,-33                                      
hitsound = 35, 0+random%15;5, 21+random%5                 
guardsound = 6, 0                 
ground.type = High             
ground.slidetime = 5        
ground.hittime  = 12         
ground.velocity = -3        
airguard.velocity = -2,-.8    
air.type = High              
air.velocity = -2,-1          
air.hittime = 12 
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10              

[State 205, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Standing Strong Punch
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 2
velset = 5,0
ctrl = 0
anim = 220
poweradd = 20
sprpriority = 1


[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = 0,-20-random%10
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.1,1.1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
trigger2 = time = 22
value = S4,12

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = F870
ID = 700
pos = -10,-39
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
scale = 2,2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = F870
ID = 700
pos = -10,-39
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
removetime = -2
sprpriority = 3
scale = 2,2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = 700
ID = 700
pos = 10,-39
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 2
scale =0.7,0.7
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = 700
ID = 700
pos = 5,-39
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 2
scale =0.7,0.7
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 22
anim = 700
ID = 700
pos = -2,-38
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 2
scale =0.7,0.7
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 22
anim = 700
ID = 700
pos = -12,-38
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 2
scale =0.7,0.7
ownpal = 1

[State 220, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA                     
damage = 70,14              
animtype = Light          
guardflag = MA                
hitflag = MAF                
priority = 3, Hit                                          
pausetime = 0,5              
sparkno = 0+random%4              
sparkxy = -15,-25                                      
hitsound = 24, 10+random%4                 
guardsound = 6, 0                 
ground.type = High             
ground.slidetime = 5        
ground.hittime  = 12         
ground.velocity = -5        
airguard.velocity = -5,-.8    
air.type = High              
air.velocity = -5,-1          
air.hittime = 12
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10 
fall = 1

[State 220, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Upper Hit
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 3
velset = 3,0
ctrl = 0
anim = 230
poweradd = 20
sprpriority = 2


[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = 0,-35-random%20
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.1,1.1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F24,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F890
ID = 700
pos = 15,-34
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -2
sprpriority = 3
scale = 1,1.3

[State 230, 2]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 40,8
animtype = Up
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0,4
sparkno = 0+random%4              
sparkxy = -15,-50                                      
hitsound = 24, 10+random%4                 
guardsound = 6, 0      
ground.type = High
ground.slidetime = 4
ground.hittime  = 12
ground.velocity = -0.5, -6
airguard.velocity = -1,-6
air.type = High
air.velocity = -0.5,-6
air.hittime = 16
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall = 1
fall.recover = 0
fall.damage = 10

[State 230, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Air Punch
[StateDef 240]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd = 20
ctrl = 0
anim = 240

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 270,***]
type = AssertSpecial
trigger1 =1
flag = noautoturn

[State 270, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
attr = S, NA
damage = 25, 5
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 4
sparkno = 0+random%4              
sparkxy = -15,-30                                     
hitsound = 35, 0+random%15;5, 21+random%5                 
guardsound = 6, 0  
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -1.5,4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.5,5
air.hittime = 1
fall = 1
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.damage = 5
fall.recover = 1
fall.envshake.ampl = 5
fall.envshake.freq = 50
fall.envshake.time = 20

[State 270, 5]
type = CtrlSet
trigger1 = Time = 15
value = 1

[State 270, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Air Punch
[StateDef 250]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 20
ctrl = 0
anim = 250

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S24,0+random%17

[State 270,***]
type = AssertSpecial
trigger1 =1
flag = noautoturn

[State 270, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
attr = S, NA                     
damage = 20,4             
animtype = Light          
guardflag = MA                
hitflag = MAF                
priority = 3, Hit                                          
pausetime = 0,5              
sparkno = 0+random%4              
sparkxy = -15,-35-random%5                                     
hitsound = 35, 0+random%15;5, 21+random%5                 
guardsound = 6, 0                 
ground.type = High             
ground.slidetime = 5        
ground.hittime  = 12         
ground.velocity = -2,-2        
airguard.velocity = -2,-2   
air.type = High              
air.velocity = -2,-2          
air.hittime = 12 
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10  

[State 270, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;Air Punch
[StateDef 260]
type    = A
movetype= A
physics = A
juggle  = 2
velset = 3,-3
poweradd= 20
ctrl = 0
anim = 260

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 270,***]
type = AssertSpecial
trigger1 =1
flag = noautoturn

[State 270, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
;trigger2 = AnimElem = 3
attr = S, NA
damage = 50,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 2
sparkno = 0+random%4              
sparkxy = -15,-20                                  
hitsound = 35, 0+random%15;5, 21+random%5                 
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 30
ground.velocity = -3,5
airguard.velocity = -3,5
air.type = High
air.velocity = -3,5
air.hittime = 30
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall = 1
fall.damage = 5
fall.recover = 0
fall.envshake.ampl = 5
fall.envshake.freq = 50
fall.envshake.time = 20

[State 270, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Opponent throw
[Statedef 270]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
velset = 4, 0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 270                       ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 2               ;Set p1's sprite layering priority to 2 (in front)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 330, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 3
attr = S, NA
damage = 20, 5
animtype = light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 15, 30
sparkno = -1
sparkxy = -15, -35
hitsound = 35, 0+random%15;5, 21+random%5                 
guardsound = 6, 0   
ground.type = high
ground.slidetime = 5
ground.hittime  = 64512
ground.velocity = 5,-6
airguard.velocity = 5,-6
air.type = High
air.velocity = 5,-6
air.hittime = 14562
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall = 1
fall.recover = 0
fall.damage = 30 
y.accel = 10             ;Time before opponent regains control in air

[State 200, 2]
type = ChangeState
trigger1 = movehit
value = 271
ctrl = 0

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Opponent throw
[Statedef 271]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:ctrl = 0                         ;Set ctrl (Def: no change)
anim = 271                       ;Change animation (Def: no change)
poweradd = 0
velset = 3,0                     ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%5

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S24,0+random%17

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Slide
[Statedef 275]
type    = C                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
velset = 7, 0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 275                       ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,8

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 5,0
anim = F300
ID = 24
pos = 10,2
postype = p1  ;p2,front,back,left,right
scale = 1.2,1.2
sprpriority = 2
vel = -1.3,-1
bindtime = 1
ownpal = 1
ontop = 0

[State 0, VelSet]
type = Veladd
trigger1 = 1
x = -0.15

[State 330, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movecontact
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 30,6
animtype = light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 5
sparkno = -1
sparkxy = -15, -35
hitsound = 35, 0+random%15;5, 21+random%5                 
guardsound = 6, 0 
ground.type = high
ground.slidetime = 5
ground.hittime  = 64512
ground.velocity = 0,-(vel x)*1
airguard.velocity = 0,-.8
air.type = High
air.velocity = 0,-(vel x)*1
air.hittime = 14562
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall = 1
fall.recover = 0
fall.damage = 30

[State 0, ChangeState]
type = ChangeState
trigger1 = vel x < 0.5
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Sword combo
[Statedef 280]
type    = S
movetype= A
physics = S
juggle  = 3
velset = 0,0
ctrl = 0
anim = 280
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F24,0+random%4

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3 
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A         ;A,C,S,N

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3 && prevstateno = 290
x = 3
y = -14

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3 && prevstateno != 290
x = 4
y = -2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = -30+random%30,-20-random%40
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 0.8,0.8
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 270, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
attr = S, NA
damage = 15,3
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 4
sparkno = 0+random%4              
sparkxy = -15,-40
hitsound = 24, 10+random%4                 
guardsound = 6, 0 
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -vel x+2,0
airguard.velocity = -vel x+2,0
air.type = High
air.velocity = -vel x+2,0
air.hittime = 1
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall = 1
fall.damage = 5
fall.recover = 0
fall.envshake.ampl = 5
fall.envshake.freq = 50
fall.envshake.time = 20

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 40
length = 30
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 160,150,150
palpostbright = 0,0,0
paladd = 5,0,0
palmul = .65,.65,.75
timegap = 1
framegap = 1
trans = add

;---------------------------------------------------------------------------
; Sword combo2
[Statedef 290]
type    = S
movetype= A
physics = S
juggle  = 3
velset = 0,0
ctrl = 0
anim = 290
poweradd = 0
sprpriority = 2

[State 0, Turn]
type = Turn
triggerall = prevstateno = 275
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = 700
ID = 700
pos = 4,-20
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = 700
ID = 700
pos = 16,-20
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 4
anim = 700
ID = 700
pos = 15,-12
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 4
anim = 700
ID = 700
pos = 28,-15
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 23
anim = 700
ID = 700
pos = 4,-60
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =1,1.4
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 23
anim = 700
ID = 700
pos = 4,-70
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =1.2,1.5
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 4
trigger2 = time = 23
value = F9,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F24,0+random%4

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = -10+random%20,-30+random%30
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.2,1.2
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 230, 2]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 40,8 
animtype = Up
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0,4
sparkno = 0+random%4              
sparkxy = -15,-45 
hitsound = 24, 10+random%4                 
guardsound = 6, 0 
ground.type = High
ground.slidetime = 4
ground.hittime  = 12
ground.velocity = -1, -8.5
airguard.velocity = -2,-4
air.type = High
air.velocity = -1.5,-8.5
air.hittime = 16
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall = 1
fall.damage = 10

[State 230, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Sword combo3
[Statedef 295]
type    = A
movetype= A
physics = A
juggle  = 3
velset = 0,13
ctrl = 0
anim = 295
poweradd = 0
sprpriority = 2

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 20
anim = -1
sound = S0,5
darken = 0
unhittable = 0


[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F2017
ID = 297
pos = 12,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = 0,0
removetime = -2
scale = 1,1.5
sprpriority = 3
removeongethit = 1
ownpal = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 297
pos = 12,-80
postype = p1  ;p2,front,back,left,right
facing = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = -10+random%20,-40+random%20
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.5,1.5
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F24,0+random%4

[State 230, 2]
type = HitDef
fall.yvelocity = -6
trigger1 = !movehit
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 50,10 
animtype = Up
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0,4
sparkno = 0+random%4              
sparkxy = -15,-30
hitsound = 24, 10+random%4                 
guardsound = 6, 0 
ground.type = High
ground.slidetime = 4
ground.hittime  = 12
ground.velocity = -4, 10
airguard.velocity = -4,10
air.type = High
air.velocity = -4,10
air.hittime = 16
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall = 1
fall.damage = 10

[State 230, 4]
type = ChangeState
trigger1 = pos y > -20
value = 296

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 40
length = 30
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 160,150,150
palpostbright = 0,0,0
paladd = 5,0,0
palmul = .65,.65,.75
timegap = 1
framegap = 1
trans = add

;---------------------------------------------------------------------------
; Crouching
[Statedef 296]
type    = C
physics = C
anim = 296
velset = 0,0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = F9,2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 15
anim = 700
ID = 700
pos = 16,-17
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 15
anim = 700
ID = 700
pos = 30,-17
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 15
anim = 700
ID = 700
pos = 22,-24
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 15
anim = 700
ID = 700
pos = 36,-24
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 230, 4]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Chakra Charge
[Statedef 301]
type = S
physics = S
ctrl = 0
anim = 301
sprpriority = 2

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 256,256,256
sinadd = 0,0,0,1
invertall = 0
color = 256
;ignorehitpause = 0
;persistent = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,8


[State 300]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch
[Statedef 300]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
velset = 0, 0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 300                       ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)


[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = 0,-25-random%15
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.1,1.1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F24,0+random%4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F890
ID = 700
pos = 15,-39
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
removetime = -2
sprpriority = 3
scale = 1,2

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
attr = S, NA                     
damage = 25,5              
animtype = Light          
guardflag = MA                
hitflag = MAF                
priority = 3, Hit                                          
pausetime = 0,5              
sparkno = 0+random%4              
sparkxy = -15,-20-random%30                              
hitsound = 24, 10+random%4                 
guardsound = 6, 0                
ground.type = High             
ground.slidetime = 5        
ground.hittime  = 12         
ground.velocity = -2,2        
airguard.velocity = -2,2     
air.type = High              
air.velocity = -2,2           
air.hittime = 12 
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10                 ;Time before opponent regains control in air

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch 2
[Statedef 310]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
velset = 4,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 310                       ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 3

[State 230, 2]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 2
trigger2 = animelem = 3
attr = S, NA                     
damage = 25,5            
animtype = Light          
guardflag = MA                
hitflag = MAF                
priority = 3, Hit                                          
pausetime = 0,5              
sparkno = 0+random%4              
sparkxy = -15,-40                                      
hitsound = 35, 0+random%15;5, 21+random%5                 
guardsound = 6, 0 
ground.type = High
ground.slidetime = 4
ground.hittime  = 12
ground.velocity = -0.5, -7
airguard.velocity = -1,-7
air.type = High
air.velocity = -0.5,-7
air.hittime = 16
air.hittime = 12 
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall = 1
fall.recover = 0
fall.damage = 10
fall.yvelocity = 100

[State 205, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Standing Strong Punch
[Statedef 315]
type    = S
movetype= A
physics = S
juggle  = 2
velset = 0,0
ctrl = 0
anim = 315
poweradd = 0
sprpriority = 2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = 0,-24-random%10
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.1,1.1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S24,0+random%17

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F24,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
trigger2 = time = 35
value = S4,12

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 29
anim = F1010
ID = 700
pos = 5,-34
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -2
sprpriority = 3
scale = 2,1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = 703
ID = 700
pos = -20,-50
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
scale =0.4,0.4
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 35
anim = 703
ID = 700
pos = 3,-35
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 0
scale = 0.4,0.4
ownpal = 1

[State 220, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 75,15 
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0,5
sparkno = 0+random%4              
sparkxy = -15,-29 
hitsound = 24, 10+random%4                 
guardsound = 6, 0 
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = -6
airguard.velocity = -6,-.8
air.type = High
air.velocity = -6,-3
air.hittime = 15
fall = 1
fall.recover = 0
getpower = 0
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 220, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Teleport
[Statedef 400]
;type = S
;physics = S
statetype = I
anim = 400+var(0)*10000
ctrl = 0
poweradd = -50
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,11

[State 310, 1]
type = PosAdd
trigger1 = command = "holdfwd"
trigger1 = time = 15
x = 100

[State 310, 1]
type = PosAdd
trigger1 = command = "holdback"
trigger1 = time = 15
x = -100

[State 310, 1]
type = PosAdd
trigger1 = command = "holdup"
trigger1 = pos y > -150
trigger1 = time = 15
y = -100

[State 310, 1]
type = Posset
trigger1 = command = "holddown"
trigger1 = time = 15
y = 0

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 310, 6]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 310, 7]
type = ChangeState
trigger1 = animtime = 0
trigger1 = prevstateno != 400
value = prevstateno
ctrl = 1

[State 310, 7]
type = ChangeState
trigger1 = animtime = 0
trigger1 = prevstateno != 400
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Multi weapons scroll air
[StateDef 410]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 410
poweradd = -1500
sprpriority = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time > 35
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 12
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
value2 = S,NA
time = 20

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = 1,21

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S0,5

[State 0, Helper]
type = Helper
trigger1 = time = 12 && numhelper(412) = 0
helpertype = normal
name = "kunai"
ID = 411
stateno = 411
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 9999

[State 220, end]
type = ChangeState
trigger1 = time = 44
value = 50
ctrl = 1

[StateDef 411]
type = S
movetype= I
physics = S
velset = 0,0
anim = 420

[State 0, Helper]
type = Helper
trigger1 = time = 0
trigger2 = time = 7
helpertype = normal
name = "kunai"
ID = 1
stateno = 412
pos = 15+random%10,-35-random%15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 12
helpertype = normal
name = "kunai"
ID = 2
stateno = 412
pos = 15+random%10,-35-random%15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 8
helpertype = normal
name = "kunai"
ID = 3
stateno = 412
pos = 15+random%10,-35-random%15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 4
trigger2 = time = 11
helpertype = normal
name = "kunai"
ID = 4
stateno = 412
pos = 15+random%10,-35-random%15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 7
helpertype = normal
name = "kunai"
ID = 5
stateno = 412
pos = 15+random%10,-35-random%15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 3
trigger2 = time = 18
helpertype = normal
name = "kunai"
ID = 6
stateno = 412
pos = 15+random%10,-35-random%15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 1
trigger2 = time = 13
helpertype = normal
name = "kunai"
ID = 7
stateno = 412
pos = 15+random%10,-35-random%15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal
name = "kunai"
ID = 8
stateno = 412
pos = 15+random%10,-35-random%15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
trigger2 = time = 5
trigger3 = time = 10
trigger4 = time = 15
value = S4,14

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
trigger2 = time = 8
trigger3 = time = 13
trigger4 = time = 18
value = S4,8

[State 220, end]
type = Destroyself
trigger1 = time = 100

[Statedef 412]
type = S
movetype = A
physics = S
anim = 419
ctrl = 0
velset = 6,5
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 703
ID = 703
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 20
pausemovetime = 999
supermovetime = 999
scale = 0.2,0.2
sprpriority = 4
ontop = 0
ownpal = 1
persistent = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = -7+random%15, -5+random%10
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 0.5,0.5
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 70,40
animtype = Light
guardflag = MA
hitflag = MAF
priority = 2, Hit
pausetime = 1, 10
sparkno = 0+random%4
sparkxy = -7+random%15, 15-random%20
guard.sparkno = s7124
guard.sparkxy = -26, -30
hitsound = 5,26
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -0
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = 0,0
air.hittime = 12 
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 16523, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = isHelper(1) && anim != 411
value = 411

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = isHelper(2) && anim != 412
value = 412

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = isHelper(3) && anim != 413
value = 413

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = isHelper(4) && anim != 414
value = 414

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = isHelper(5) && anim != 415
value = 415

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = isHelper(6) && anim != 416
value = 416

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = isHelper(7) && anim != 417
value = 417

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = isHelper(8) && anim != 418
value = 418

[State 16523, VarRandom];AngleSet
type = VarSet
trigger1 = Time = 0
trigger1 = isHelper(1)
var(0) = 0

[State 16523, VarRandom];AngleSet
type = VarSet
trigger1 = Time = 0
trigger1 = isHelper(2)
var(0) = 0

[State 16523, VarRandom];AngleSet
type = VarSet
trigger1 = Time = 0
trigger1 = isHelper(3)
var(0) = -40

[State 16523, VarRandom];AngleSet
type = VarSet
trigger1 = Time = 0
trigger1 = isHelper(4)
var(0) = 0

[State 16523, VarRandom];AngleSet
type = VarSet
trigger1 = Time = 0
trigger1 = isHelper(5)
var(0) = 48

[State 16523, VarRandom];AngleSet
type = VarSet
trigger1 = Time = 0
trigger1 = isHelper(6)
var(0) = -43

[State 16523, VarRandom];AngleSet
type = VarSet
trigger1 = Time = 0
trigger1 = isHelper(7)
var(0) = -48

[State 16523, VarRandom];AngleSet
type = VarSet
trigger1 = Time = 0
trigger1 = isHelper(8)
var(0) = 40

[State 0, AngleDraw]
type = AngleDraw
trigger1 = anim = 411
trigger2 = anim = 412
trigger3 = anim = 414
value = 1+(time-1)*16

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 6+random%12
y = 1+random%10

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 60
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 160,150,150
palpostbright = 0,0,0
paladd = 5,0,0
palmul = .65,.65,.75
timegap = 1
framegap = 1
trans = add

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = anim = 411
trigger2 = anim = 414
trigger3 = anim = 416
trigger4 = anim = 417
triggerall = pos y > -2
anim = 703
ID = 703
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 20
pausemovetime = 999
supermovetime = 999
scale = 0.3,0.3
sprpriority = 4
ontop = 0
ownpal = 1
persistent = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = anim = 412
trigger2 = anim = 413
trigger3 = anim = 415
trigger4 = anim = 418
triggerall = pos y > -2
anim = 703
ID = 703
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 20
pausemovetime = 999
supermovetime = 999
scale = 0.2,0.2
sprpriority = 4
ontop = 0
ownpal = 1
persistent = 0

[State 16523, DestroySelf]
type = DestroySelf
trigger1 = pos y > -3

;---------------------------------------------------------------------------
;Fuma shuriken
[StateDef 426]
type = S
movetype = A
physics = S
juggle = 0
anim = 426
poweradd = -300
velset = 4,0
ctrl = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S0,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,15

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
trigger2 = time = 34
value = S4,13

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 6
trigger2 = time = 35
anim = 703
ID = 703
pos = 2,-53
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 20
supermovetime = 9999
scale = 0.6,0.6
sprpriority = 5
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 9
helpertype = normal;player
name = "shuriken"
ID = 425
stateno = 425
pos = 2,-53
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
size.xscale = 0.9
size.yscale = 0.9

[State 0, NotHitBy]
type = NotHitBy
trigger1 = numhelper(425) = 1
value = SCA
time = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 425]
type = S
movetype = A
physics = S
juggle = 0
anim = 425
ctrl = 0
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 10,1
value = F8,9

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 2
pos = 2,-53

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 1-(time-1)*15

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = -5+random%10,-50+random%20
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
scale = 0.5,0.5
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 1
trigger2 = animelem = 2
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 4, Hit
p1sprpriority = 4
pausetime = 0, 3
sparkno = -1
sparkxy = -10, 0
guard.sparkno = s7124
guard.sparkxy = -26, -30
hitsound = 5,6
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 0.5,-1
airguard.velocity = 0.5,-1
air.type = High
air.velocity = 0.5,-1
air.hittime = 12 
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 310, end]
type = Destroyself
trigger1 = time = 30

;---------------------------------------------------------------------------
;Zwoj mieczy
[StateDef 427]
type = S
movetype = A
physics = S
juggle = 0
anim = 427
poweradd = 0
ctrl = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,15

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
trigger2 = time = 27
value = S4,13

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 3
anim = 703
ID = 703
pos = 17,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 20
supermovetime = 9999
scale = 0.4,0.4
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 28
anim = 703
ID = 703
pos = 30,-25
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 20
supermovetime = 9999
scale = 0.6,0.6
sprpriority = 5
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal;player
name = "zwoj mieczy"
ID = 428
stateno = 428
pos = 17,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = numhelper(428) = 1
value = SCA
time = 1

[State 310, end]
type = ChangeState
trigger1 = time = 45
value = 0
ctrl = 1

[StateDef 428]
type = S
movetype = A
physics = S
juggle = 0
anim = 428
ctrl = 0
sprpriority = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 2
pos = 17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
trigger4 = animelem = 8
value = S4,15

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F11+random%2
angle = -25+random%50
pos = -5+random%15,-40+random%10
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
scale = 0.5,0.5
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = timemod = 3,0
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 15,3
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1, Hit
p1sprpriority = 1
pausetime = 0, 0
sparkno = -1
sparkxy = -10+random%35, -10-random%50
guard.sparkno = s7124
guard.sparkxy = -26, -30
hitsound = 5,11
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -0.35,-1.5
airguard.velocity = -0.35,-1.5
air.type = High
air.velocity = -0.35,-1.5
air.hittime = 12 

[State 310, end]
type = Destroyself
trigger1 = time = 30

;---------------------------------------------------------------------------
;Puapka linkowa
[StateDef 429]
type = S
movetype = A
physics = S
juggle = 0
anim = 11+var(0)*10000
ctrl = 0
poweradd = -300
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
value = S4,15

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
value = S4,14

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
value = S0,1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 3
anim = 703
ID = 703
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 20
supermovetime = 9999
scale = 0.2,0.2
sprpriority = 5
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal;player
name = "pulapka"
ID = 421
stateno = 421
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 0.15

[State 310, end]
type = ChangeState
trigger1 = time = 15
value = 11
ctrl = 1

;-----------------------------------------

[StateDef 421]
type = S
movetype = A
physics = S
juggle = 0
anim = 421
ctrl = 0
sprpriority = -1

[State 0, TargetBind]
type = TargetBind
trigger1 = movecontact
time = 1
pos = 0,0
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = 1
getpower = 0,0
givepower = 0,0
attr = C,HP
damage = 0,0
animtype = Light
guardflag = MA
hitflag = MAF
priority = -1, Hit
p1sprpriority = -1
pausetime = 0, 5
sparkno = 0
sparkxy = -10, 0
guard.sparkno = s7124
hitsound = 5,11
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 0,0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 12
p1stateno = 422
p2stateno = 106046

[State 0, ChangeState]
type = destroyself
trigger1 = numenemy = 0

;-------------------------------------------------

[StateDef 422]
type = S
movetype = A
physics = S
juggle = 0
anim = 421
ctrl = 0
sprpriority = -1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0 
anim = F1190
ID = 1190
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -2
supermovetime = 9999
scale = 0.6,0.6
sprpriority = 3
ownpal = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
time = 1
pos = 0,0

[State 0, TargetState]
type = TargetState
trigger1 = time > 1
value = 106046

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 422
ID = 422
pos = 3,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 10
supermovetime = 9999
scale = 1,1
sprpriority = 4
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 422
ID = 422
pos = -3,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
removetime = 10
supermovetime = 9999
scale = 1,1
sprpriority = 4
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10 
anim = 423
ID = 423
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -1
supermovetime = 9999
scale = 0.5,0.5
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10 
anim = 424
ID = 424
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -1
supermovetime = 9999
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 210
trigger2 = target,stateno != 106046 && target,stateno = [100000,109999]
id = 422

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 210
trigger2 = target,stateno != 106046 && target,stateno = [100000,109999]
id = 423

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 210
trigger2 = target,stateno != 106046 && target,stateno = [100000,109999]
id = 424

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

[State 0, ChangeState]
type = destroyself
trigger1 = target,stateno != 106046 && target,stateno = [100000,109999]
trigger2 = time = 210

;---------------------------------------------------------------------------
;Kunai throw 1
[StateDef 500]
type = S
movetype = A
physics = S
juggle = 0
anim = 510
ctrl = 0

[State -1, Helper]
type = Helper
trigger1 = time = 0
trigger1 = var(0) = 1
helpertype = normal ;player
name = "staff"
ID = 10000
stateno = 10512
pos = 15,0
postype = p1    
facing = 1
ownpal = 1
supermovetime = 99999

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(0) = 1
v = 0
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 20    ;fv =
value = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70700;600
pos = 20,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Kunai throw 2
[StateDef 501]
type = S
movetype = A
physics = S
juggle = 0
anim = 504
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 4
v = 20    ;fv =
value = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70700
pos = 20,-36
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Kunai throw 3
[StateDef 502]
type = S
movetype = A
physics = S
juggle = 0
anim = 501
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 20    ;fv =
value = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70700
pos = 10,-40
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Kunai throw 4
[StateDef 570]
type = S
movetype = A
physics = S
juggle = 0
anim = 500
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20    ;fv =
value = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 1 && var(20) = 31
v = 20    ;fv =
value = -1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70700
pos = 15,-31
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70700
pos = 10,-21
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Kunai throw 5
[StateDef 580]
type = S
movetype = A
physics = S
juggle = 0
anim = 506
ctrl = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = 499
pos = 28,-30
scale = 0.3,0.4
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
supermove = 9999
pausemove = 9999
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F9,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S24,0+random%17

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70700
pos = 25,-31
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70700
pos = 15,-21
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70700
pos = 7,-26
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Kunai throw 6
[StateDef 503]
type = S
movetype = A
physics = S
juggle = 0
anim = 504
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S1,3

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 21    ;fv =
value = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal;player
name = "exp. kunai"
ID = 620
stateno = 70730
pos = -5,-36
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = Time = 30
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Kunai Air 1
[StateDef 505]
type = A
movetype = A
physics = A
juggle = 0
anim = 550
ctrl = 0

[State -1, Helper]
type = Helper
trigger1 = time = 0
trigger1 = var(0) = 1
helpertype = normal ;player
name = "staff"
ID = 10000
stateno = 10502
pos = 15,0
postype = p1    
facing = 1
ownpal = 1
supermovetime = 99999

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(0) = 1
v = 0
value = 0

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 20    ;fv =
value = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = time = 0
x = -1
y = -1.5

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70701
pos = 30,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;Kunai Air 2
[StateDef 575]
type = A
movetype = A
physics = A
juggle = 0
anim = 550
ctrl = 0

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 20    ;fv =
value = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 1 && var(20) = 31
v = 20    ;fv =
value = -1

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20    ;fv =
value = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = time = 0
x = -1
y = -1.5

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70701
pos = 29,-31
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70701
pos = 20,-21
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;Kunai Air 3
[StateDef 585]
type = A
movetype = A
physics = A
juggle = 0
anim = 550
ctrl = 0

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 20    ;fv =
value = 3

[State 0, VarAdd]
type = VarSet
trigger1 = time = 1 && var(20) > 30
v = 20    ;fv =
value = 30

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20    ;fv =
value = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = time = 0
x = 0
y = -4

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70701
pos = 29,-31
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70701
pos = 20,-21
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70701
pos = 7,-26
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove


[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;Kunai Air 4
[StateDef 555]
type = A
movetype = A
physics = A
juggle = 0
anim = 550
ctrl = 0

[State -1, Helper]
type = Helper
trigger1 = time = 0
trigger1 = var(0) = 1
helpertype = normal ;player
name = "staff"
ID = 10000
stateno = 10502
pos = 15,0
postype = p1    
facing = 1
ownpal = 1
supermovetime = 99999

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(0) = 1
v = 0
value = 0

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 21    ;fv =
value = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = time = 0
x = -1
y = -1.5

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "exp. kunai"
ID = 620
stateno = 70731
pos = 30,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;Shuriken 1
[StateDef 510]
type = S
movetype = A
physics = S
juggle = 0
anim = 510
ctrl = 0

[State -1, Helper]
type = Helper
trigger1 = time = 0
trigger1 = var(0) = 1
helpertype = normal ;player
name = "staff"
ID = 10000
stateno = 10512
pos = 15,0
postype = p1    
facing = 1
ownpal = 1
supermovetime = 99999

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(0) = 1
v = 0
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 23   ;fv =
value = 1

[State 0, alive]
type = VarSet
trigger1 = 1
var(12) = cond((enemynear(0),alive),0,1)

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(enemynear(var(12)),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(enemynear(var(12)),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "shuriken"
ID = 610
stateno = 70710
pos = 10,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Shuriken 2
[StateDef 511]
type = S
movetype = A
physics = S
juggle = 0
anim = 501
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 23   ;fv =
value = 1

[State 0, alive]
type = VarSet
trigger1 = 1
var(12) = cond((enemynear(0),alive),0,1)

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(enemynear(var(12)),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(enemynear(var(12)),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "shuriken"
ID = 610
stateno = 70710
pos = 10,-45
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Shuriken 3
[StateDef 512]
type = S
movetype = A
physics = S
juggle = 0
anim = 504
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 4
v = 23   ;fv =
value = 1

[State 0, alive]
type = VarSet
trigger1 = 1
var(12) = cond((enemynear(0),alive),0,1)

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(enemynear(var(12)),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(enemynear(var(12)),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal;player
name = "shuriken"
ID = 610
stateno = 70710
pos = 20,-38
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Shuriken 4
[StateDef 520]
type = S
movetype = A
physics = S
juggle = 0
anim = 500
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 23    ;fv =
value = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 1 && var(23) = 31
v = 23    ;fv =
value = -1

[State 0, alive]
type = VarSet
trigger1 = 1
var(12) = cond((enemynear(0),alive),0,1)

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(enemynear(var(12)),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(enemynear(var(12)),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "shuriken"
ID = 610
stateno = 70710
pos = 15,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "shuriken"
ID = 610
stateno = 70710
pos = 10,-21
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Shuriken 5
[StateDef 513]
type = S
movetype = A
physics = S
juggle = 0
velset = 4,0
anim = 503
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 23    ;fv =
value = 1

[State 0, alive]
type = VarSet
trigger1 = 1
var(12) = cond((enemynear(0),alive),0,1)

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(enemynear(var(12)),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(enemynear(var(12)),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "big shuriken"
ID = 610
stateno = 615
pos = 15,-24
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = Time = 30
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;Shuriken Air throw
[StateDef 515]
type = A
movetype = A
physics = A
juggle = 0
anim = 550
ctrl = 0

[State -1, Helper]
type = Helper
trigger1 = time = 0
trigger1 = var(0) = 1
helpertype = normal ;player
name = "staff"
ID = 10000
stateno = 10502
pos = 15,0
postype = p1    
facing = 1
ownpal = 1
supermovetime = 99999

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(0) = 1
v = 0
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 23    ;fv =
value = 1

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 0, VelAdd]
type = VelAdd
trigger1 = time = 0
x = -1
y = -1.5

[State 0, alive]
type = VarSet
trigger1 = 1
var(12) = cond((enemynear(0),alive),0,1)

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(enemynear(var(12)),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(enemynear(var(12)),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "shuriken"
ID = 610
stateno = 70710
pos = 25,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;Shuriken x2 Air throw
[StateDef 525]
type = A
movetype = A
physics = A
juggle = 0
anim = 540
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 23    ;fv =
value = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 1 && var(23) = 31
v = 23    ;fv =
value = -1

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 0, VelAdd]
type = VelAdd
trigger1 = time = 0
x = -1
y = -1.5

[State 0, alive]
type = VarSet
trigger1 = 1
var(12) = cond((enemynear(0),alive),0,1)

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(enemynear(var(12)),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(enemynear(var(12)),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "shuriken"
ID = 610
stateno = 70710
pos = 25,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "shuriken"
ID = 610
stateno = 70710
pos = 12,-21
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;Smoke Kunai throw
[StateDef 530]
type = S
movetype = A
physics = S
juggle = 0
anim = 510
ctrl = 0

[State -1, Helper]
type = Helper
trigger1 = time = 0
trigger1 = var(0) = 1
helpertype = normal ;player
name = "staff"
ID = 10000
stateno = 10512
pos = 15,0
postype = p1    
facing = 1
ownpal = 1
supermovetime = 99999

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(0) = 1
v = 0
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,8

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22    ;fv =
value = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "s. kunai"
ID = 630
stateno = 70740
pos = 30,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Smoke Bomb
[StateDef 531]
type = C
movetype = A
physics = C
juggle = 0
anim = 11+var(0)*10000
ctrl = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22    ;fv =
value = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "s. bomb"
ID = 630
stateno = 70745
pos = 30,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = time = 10
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Smoke Kunai Air throw
[StateDef 535]
type = A
movetype = A
physics = A
juggle = 0
anim = 550
ctrl = 0

[State -1, Helper]
type = Helper
trigger1 = time = 0
trigger1 = var(0) = 1
helpertype = normal ;player
name = "staff"
ID = 10000
stateno = 10502
pos = 15,0
postype = p1    
facing = 1
ownpal = 1
supermovetime = 99999

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(0) = 1
v = 0
value = 0

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,8

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22    ;fv =
value = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = time = 0
x = -1
y = -1.5

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "s. kunai"
ID = 630
stateno = 70741
pos = 30,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Big Shuriken throw
[StateDef 540]
type = S
movetype = A
physics = S
juggle = 0
anim = 501
ctrl = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 701
pos = 28,-30
scale = 1,1.3
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
supermove = 9999
pausemove = 9999
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F9,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 23    ;fv =
value = 1

[State 0, alive]
type = VarSet
trigger1 = 1
var(12) = cond((enemynear(0),alive),0,1)

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(enemynear(var(12)),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(enemynear(var(12)),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "big shuriken"
ID = 610
stateno = 615
pos = 25,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Big Shuriken Air throw
[StateDef 545]
type = A
movetype = A
physics = A
juggle = 0
anim = 540
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 23    ;fv =
value = 1

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 0, VelAdd]
type = VelAdd
trigger1 = time = 0
x = -1
y = -1.5

[State 0, alive]
type = VarSet
trigger1 = 1
var(12) = cond((enemynear(0),alive),0,1)

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(enemynear(var(12)),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(enemynear(var(12)),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "big shuriken"
ID = 610
stateno = 615
pos = 25,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Explode Kunai throw
[StateDef 550]
type = S
movetype = A
physics = S
juggle = 0
anim = 510
ctrl = 0

[State -1, Helper]
type = Helper
trigger1 = time = 0
trigger1 = var(0) = 1
helpertype = normal ;player
name = "staff"
ID = 10000
stateno = 10512
pos = 10,0
postype = p1    
facing = 1
ownpal = 1
supermovetime = 99999

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(0) = 1
v = 0
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 21    ;fv =
value = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "exp. kunai"
ID = 620
stateno = 70730
pos = 20,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Explode Kunai Air throw
[StateDef 555]
type = A
movetype = A
physics = A
juggle = 0
anim = 550
ctrl = 0

[State -1, Helper]
type = Helper
trigger1 = time = 0
trigger1 = var(0) = 1
helpertype = normal ;player
name = "staff"
ID = 10000
stateno = 10502
pos = 15,0
postype = p1    
facing = 1
ownpal = 1
supermovetime = 99999

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(0) = 1
v = 0
value = 0

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S24,0+random%17

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 21    ;fv =
value = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = time = 0
x = -1
y = -1.5

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "exp. kunai"
ID = 620
stateno = 70731
pos = 30,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Makabishi throw
[StateDef 560]
type = S
movetype = A
physics = S
juggle = 0
anim = 520
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,15

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 24    ;fv =
value = 4

[State 0, Helper]
type = Helper
trigger1 = time = 6
helpertype = normal;player
name = "makabishi"
ID = 660
stateno = 630
pos = 6,-43
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 0, Helper]
type = Helper
trigger1 = time = 7
helpertype = normal;player
name = "makabishi"
ID = 660
stateno = 630
pos = 5,-43
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 0, Helper]
type = Helper
trigger1 = time = 8
helpertype = normal;player
name = "makabishi"
ID = 660
stateno = 630
pos = 7,-43
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 0, Helper]
type = Helper
trigger1 = time = 9
helpertype = normal;player
name = "makabishi"
ID = 660
stateno = 630
pos = 9,-43
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Makabishi Air throw
[StateDef 565]
type = A
movetype = A
physics = A
juggle = 0
anim = 560
ctrl = 0

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,15

[State 0, VelAdd]
type = VelAdd
trigger1 = time = 0
x = -1
y = -1.5

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 24    ;fv =
value = 4

[State 0, Helper]
type = Helper
trigger1 = time = 6
helpertype = normal;player
name = "makabishi"
ID = 660
stateno = 630
pos = 6,-43
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 0, Helper]
type = Helper
trigger1 = time = 7
helpertype = normal;player
name = "makabishi"
ID = 660
stateno = 630
pos = 5,-43
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 0, Helper]
type = Helper
trigger1 = time = 8
helpertype = normal;player
name = "makabishi"
ID = 660
stateno = 630
pos = 7,-43
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 0, Helper]
type = Helper
trigger1 = time = 9
helpertype = normal;player
name = "makabishi"
ID = 660
stateno = 630
pos = 9,-43
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1


;---------------------------------------------------------------------------
;Explode kunai series
[StateDef 590]
type = A
movetype = A
physics = A
juggle = 0
anim = 1500
velset = 0,-5
poweradd = -500
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,5

[State 0, Helper]
type = Helper
trigger1 = time = 3
helpertype = normal;player
name = "exp. kunai"
ID = 620
stateno = 601
pos = -25,-15
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = time = 6
helpertype = normal;player
name = "exp. kunai"
ID = 620
stateno = 600
pos = -30,-20
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = time = 9
helpertype = normal;player
name = "exp. kunai"
ID = 590
stateno = 70731
pos = -35,-25
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = time = 18
helpertype = normal;player
name = "exp. kunai"
ID = 590
stateno = 70731
pos = 35,-25
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = time = 21
helpertype = normal;player
name = "exp. kunai"
ID = 620
stateno = 600
pos = 30,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = time = 24
helpertype = normal;player
name = "exp. kunai"
ID = 620
stateno = 601
pos = 25,-15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, PlaySnd]
type = PlaySnd
triggerall = time%3 = 0
trigger1 = time = [0,10]
trigger2 = time = [17,25]
value = S4,13

;---------------------------------------------------------------------------
;Ball combo
[StateDef 595]
type = A
movetype = A
physics = A
juggle = 0
anim = 590
velset = -2,-5
poweradd = -500
ctrl = 0

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 30
pos = 0,-30
sound= S1,3
darken = 1
anim = -2
unhittable = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S4,23

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
trigger4 = animelem = 6
value = S4,13

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "ball2"
ID = 595
stateno = 602
pos = 20,-40
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal;player
name = "ball2"
ID = 595
stateno = 602
pos = 20,-40
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal;player
name = "ball2"
ID = 595
stateno = 602
pos = 20,-40
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 6
helpertype = normal;player
name = "ball2"
ID = 595
stateno = 602
pos = 20,-40
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;------------------------------------------------------------------
;Explode Kunai 60'
[Statedef 600]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70730 ; animacja explode kunaia poziomo
sprpriority = 2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 700
ID = 700
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -30

[State 0, VelSet]
type=VelSet
trigger1= 1
x= cos(PI/6)*9
y= sin(PI/6)*9

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
getpower = 0,0
givepower = 0,0
attr = A, NP
damage = 1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70736
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 70736
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 70735

;------------------------------------------------------------------
;Explode Kunai 80'
[Statedef 601]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70730 ; animacja explode kunaia poziomo
sprpriority = 2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 700
ID = 700
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -45

[State 0, VelSet]
type=VelSet
trigger1= 1
x= cos(PI/4)*9
y= sin(PI/4)*9

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
getpower = 0,0
givepower = 0,0
attr = A, NP
damage = 1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70736
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 70736
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 70735

;------------------------------------------------------------------
;Ball
[Statedef 602]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 1302
sprpriority = 2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 700
ID = 700
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =1.1,1.1
ownpal = 1

[State 0, VelSet]
type=VelSet
trigger1= time = 0
x = 3+numhelper(595)*3.4
y = 9-numhelper(595)*0.7

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = (atan(Vel Y/Vel X)+(4*Pi/2))*(-180/Pi)

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movecontact
getpower = 0,0
givepower = 0,0
attr = A, NP
damage = 50,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, 0-random%40
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5
airguard.velocity = -5,0
air.type = High
air.velocity = -3,0
air.hittime = 10
fall = 1

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 641

;------------------------------------------------------------------
;Kunai (do gry 45)
[Statedef 606]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70701
sprpriority = 2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 90

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= 1
x= cos(PI/4)*9
y= -sin(PI/4)*9

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
getpower = 0,0
givepower = 0,0
attr = A, NP
damage = 50
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = -1
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70705
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
trigger2 = time = 60
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time>40
trans = addalpha
alpha = 256-(time-40)*12.8,(time-40)*12.8
ignorehitpause = 1 

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70705
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 70706

;------------------------------------------------------------------
;Kunai (pionowo w d)
[Statedef 607]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70700
sprpriority = 2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 270

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= 1
y= 9

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
getpower = 0,0
givepower = 0,0
attr = A, NP
damage = 50
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = -1
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70705
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
;trigger2 = movehit
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70705
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 70706

;------------------------------------------------------------------
;Kunai (pionowo w gre)
[Statedef 608]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70700
sprpriority = 2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 90

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= 1
y= -9

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
getpower = 0,0
givepower = 0,0
attr = A, NP
damage = 50
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = -1
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70705
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
trigger2 = time = 60
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time>40
trans = addalpha
alpha = 256-(time-40)*12.8,(time-40)*12.8
ignorehitpause = 1 

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70705
ctrl = 0

;------------------------------------------------------------------
;Big Shuriken
[Statedef 615]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 608
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 8,0
value = F21,6

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = -time*30

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, VelSet]
type=VelSet
trigger1= time = 1
x=(Parent,Fvar(13))/(Parent,fvar(15))*16
y=(Parent,FVar(14))/(Parent,fvar(15))*16

[State 0, PlayerPush]
type = PlayerPush
trigger1 = hitcount < 5
value = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = hitcount >= 5
value = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = -10,10-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 3
scale = 1.3,1.3
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = hitcount < 5
attr = S, NA
damage = 20,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 5
sparkno = 0+random%4
sparkxy = -15, 10-random%20
hitsound = 24, 13
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,6
airguard.velocity = -3,-4
air.type = High
air.velocity = -3,-4
air.hittime = 12
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno =  616
time = 5

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 616
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 617

;------------------------------------------------------------------
;Big Shuriken
[Statedef 616]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,9

[State 6002, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -time*30

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 6002, VelSet]
type = VelSet
trigger1 = time = 0
y = -(random%20+20)/10

[State 6002, VelSet]
type = VelSet
trigger1 = 1
x = (random%40+20)/10

[State 0, Turn]
type = Turn
trigger1 = time = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = pos Y >= -7
value = 617

;------------------------------------------------------------------
;Big Shuriken
[StateDef 617]
type = A
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 607
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,9

[State 6002, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA
time = -1

[State 1012, Trans]
type = Trans
trigger1 = time >= 35
trans = addalpha
alpha = 256-(time-35)*9.6,(time-35)*9.6

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 65

;------------------------------------------------------------------
;Explode  Kunai
[Statedef 620]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 602
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= 1
x= 8

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
getpower = 0,0
givepower = 0,0
attr = A, NP
damage = 1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 623
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 623
ctrl = 0

;------------------------------------------------------------------
;Explode Kunai
[Statedef 621]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 603
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= 1
x= 7
y= 7

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
getpower = 0,0
givepower = 0,0
attr = A, NP
damage = 1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 623
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 623
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 622

;---------------------------------------------------------------------------
;Wbity Explode Kunai
[Statedef 622]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
ctrl = 0
anim = 610

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,9

[State 1011, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = 1
getpower = 0,0
givepower = 0,0
attr = S, NA
damage = 0
affectteam = B
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 8
sparkno = -1
hitsound = -1, 0
guardsound = -1, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 15452
ground.velocity = -1,5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1,5
air.hittime = 12455
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 1010, end]
type = ChangeState
trigger1 = Time = 120 || movecontact
value = 623
ctrl = 1

;---------------------------------------------------------------------------
;Wybuch Explode Kunai
[Statedef 623]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
ctrl = 0
anim = 650

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.8,0.8

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,19

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = 0
trigger1 = prevstateno = 621
trigger1 = target, ishelper = 0
flag = unguardable

[State 1011, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = time = 0
trigger1 = prevstateno = 621
attr = S, NA
getpower = 0,0
givepower = 0,0
affectteam = B
damage = 100, 30
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 8
sparkno = -1
hitsound = -1, 3
guardsound = -1, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 15452
ground.velocity = -1,5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1,5
air.hittime = 12455
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10

[State 1011, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = prevstateno != 621
trigger1 = time = 0
getpower = 0,0
givepower = 0,0
affectteam = B
attr = S, NA
damage = 100, 30
animtype = Hard
guardflag = MA
hitflag = MAF
sparkno = -1
priority = 5, Hit
pausetime = 0, 4
hitsound = S0, 2
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 24
ground.velocity = -7
airguard.velocity = -1,-1
air.type = High
air.velocity = -1,-1
air.hittime = 12
fall = 1
palfx.time = 30
palfx.add = 150,0,-100
palfx.mul = 256,256,256
palfx.sinadd = 110,55,85,10
ownpal = 1

[State 1011, Destroyself]
type = destroyself
trigger1 = time = 29

;---------------------------------------------------------------------------
;Wybuch Explode Kunai
[Statedef 624]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
ctrl = 0
anim = 650

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.8,0.8

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,19

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1011, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = time = 0
getpower = 0,0
givepower = 0,0
attr = S, NA
damage = 100, 30
animtype = Hard
guardflag = MA
hitflag = MAF
sparkno = -1
priority = 5, Hit
pausetime = 0, 4
hitsound = S0, 2
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 24
ground.velocity = -4
airguard.velocity = -1,-1
air.type = High
air.velocity = -1,-1
air.hittime = 12
palfx.time = 30
palfx.add = 150,0,-100
palfx.mul = 256,256,256
palfx.sinadd = 110,55,85,10
ownpal = 1

[State 1011, Destroyself]
type = destroyself
trigger1 = time = 16

;------------------------------------------------------------------
;Smoke  Kunai
[Statedef 625]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 605
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= 1
x= 8

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
getpower = 0,0
givepower = 0,0
attr = A, NP
damage = 10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 627
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 627
ctrl = 0

;------------------------------------------------------------------
;Smoke  Kunai
[Statedef 626]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 606
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= 1
x= 7
y= 7

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
getpower = 0,0
givepower = 0,0
attr = A, NP
damage = 10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 627
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 627
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 627

;------------------------------------------------------------------
;Smoke  Kunai
[StateDef 627]
type = S
movetype = A
physics = S
juggle = 0
poweradd = -30
anim = 655
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time%5 = 0 && time < 17
volume = 800
value = S4,13

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time%3 = 0 && time < 17
volume = 800
value = S4,13

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 0,256

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = -25

[State 331, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1533,excplod ]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = 655
ID = 655
postype = p1
pos = 5,25
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
ontop = 1
vel = 0.2,0
removetime = 200
scale = 0.5,0.5

[State 1533,excplod ]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = 655
ID = 655
postype = p1
pos = 0,25
bindtime = 1
sprpriority = 2
facing = -1
ownpal = 1
ontop = 1
vel = -0.2,0
removetime = 200
scale = 0.5,0.5

[State 1533,excplod ]
type = Explod
ownpal = 1
trigger1 = time = 20
anim = 655
ID = 655
postype = p1
pos = 10,25
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
ontop = 1
vel = 0.2,0
removetime = 200
scale = 0.5,0.5

[State 1533,excplod ]
type = Explod
ownpal = 1
trigger1 = time = 40
anim = 655
ID = 655
postype = p1
pos = -5,25
bindtime = 1
sprpriority = 2
facing = -1
ownpal = 1
ontop = 1
vel = -0.2,0
removetime = 200
scale = 0.5,0.5

[State 1533,excplod ]
type = Explod
ownpal = 1
trigger1 = time = 60
anim = 655
ID = 655
postype = p1
pos = 5,25
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
ontop = 1
vel = 0.2,0
removetime = 200
scale = 0.4,0.4

[State 1533,excplod ]
type = Explod
ownpal = 1
trigger1 = time = 80
anim = 655
ID = 655
postype = p1
pos = 0,25
bindtime = 1
sprpriority = 2
facing = -1
ownpal = 1
ontop = 1
vel = -0.2,0
removetime = 200
scale = 0.4,0.4

[State 1533,excplod ]
type = Explod
ownpal = 1
trigger1 = time = 100
anim = 655
ID = 655
postype = p1
pos = 0,25
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
ontop = 1
vel = 0.2,0
removetime = 200
scale = 0.4,0.4

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 290

;------------------------------------------------------------------
;Makabishi
[Statedef 630]
type    = S
movetype= A
physics = S
juggle  = 4
anim = 609
poweradd= 0
ctrl = 0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -time*30

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 6002, VelSet]
type = VelSet
trigger1 = time = 0
y = -(random%500+200)/100

[State 6002, VelSet]
type = VelSet
trigger1 = 1
x = (random%500+200)/100

[State 0, ChangeState]
type = ChangeState
trigger1 = pos Y >= -5
value = 631

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = Time = 0
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 5, 2
animtype = Light
guardflag = MA
hitflag = MAFDP
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = S4,10
guardsound = -1, 0
ground.type = Light
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 0
airguard.velocity = 0
air.type = Light
air.velocity = 0
air.hittime = 12

[State 0, DestroySelf]
type = DestroySelf
trigger1 = movecontact

;------------------------------------------------------------------
;Makabishi
[StateDef 631]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
sprpriority = 2

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = Time = 0
affectteam = B
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 5, 2
animtype = Light
guardflag = MA
hitflag = MAFDP
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = S4,10
guardsound = -1, 0
ground.type = Light
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 0
airguard.velocity = 0
air.type = Light
air.velocity = 0
air.hittime = 12

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = movecontact

;------------------------------------------------------------------
;Ball
[Statedef 641]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 1115
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,17

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.5,0.5
value = 0

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movecontact
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 40
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, 0-random%40
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 10
ground.hittime  = 0
ground.velocity = -1,-6
airguard.velocity = -1,-6
air.type = High
air.velocity = -1,-6
air.hittime = 10
fall = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1303
ID = 1303
pos = 2,-6
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 84
scale = 1,1
sprpriority = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time >= 35
trans = addalpha
alpha = 256-(time-35)*9.6,(time-35)*9.6
ID = 1303


[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 10
freq = 40
ampl = -2
phase = 60

[State 1012, Trans]
type = Trans
trigger1 = time >= 35
trans = addalpha
alpha = 256-(time-35)*9.6,(time-35)*9.6

[State 1210, end]
type = destroyself
trigger1 = time = 65

;---------------------------------------------------------------------------
; Kawarimi
[Statedef 700]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= -300
ctrl = 0
velset = 0,0
anim = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,12

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, Trans]
type = Trans
trigger1 = time < 20
trans = addalpha
alpha = 0,256

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time < 17
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 500, PosAdd]
type = Posset
trigger1 = Time = 17
x = enemy,pos x - 70*enemy,facing

[State 500, Explod]
type = Explod
ownpal = 1
trigger1 = Time = 0 || Time = 17
anim = 460
ID = 460
pos = 0,10
postype = p1  ;p2,front,back,left,right
facing = 1
scale = 1,1
removetime = -2
ownpal = 1
sprpriority = 3

[State 500, Explod]
type = Explod
ownpal = 1
trigger1 = Time = 7
anim = 450
ID = 450
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
ownpal = 1

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 500]
type = ChangeState
trigger1 = Time = 30
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Kawarimi Air
[Statedef 710]
type    = A
movetype= I
physics = A
juggle  = 4
poweradd= -300
ctrl = 0
velset = 0,0
anim = 44

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,12

[State 0, Trans]
type = Trans
trigger1 = time < 20
trans = addalpha
alpha = 0,256

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time < 17
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 500, PosAdd]
type = Posset
trigger1 = Time = 17
x = enemy,pos x - 70*enemy,facing

[State 500, Explod]
type = Explod
ownpal = 1
trigger1 = Time = 0 || Time = 17
anim = 460
ID = 460
pos = 0,10
postype = p1  ;p2,front,back,left,right
facing = 1
scale = 1,1
removetime = -2
ownpal = 1
sprpriority = 3

[State 500, Explod]
type = Explod
ownpal = 1
trigger1 = Time = 7
anim = 450
ID = 450
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
ownpal = 1

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 500]
type = ChangeState
trigger1 = Time = 30
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Kawarimi
[Statedef 750]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= -300
ctrl = 0
velset = 0,0
anim = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,12

[State 0, Trans]
type = Trans
trigger1 = time < 20
trans = addalpha
alpha = 0,256

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time < 17
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 500, PosAdd]
type = Posset
trigger1 = Time = 17
x = enemy,pos x - 70*enemy,facing

[State 500, Explod]
type = Explod
ownpal = 1
trigger1 = Time = 0 || Time = 17
anim = 460
ID = 460
pos = 0,10
postype = p1  ;p2,front,back,left,right
facing = 1
scale = 1,1
removetime = -2
ownpal = 1
sprpriority = 3

[State 0, Helper]
type = Helper
trigger1 = time = 7
helpertype = normal;player
name = "kunai bomb"
ID = 800
stateno = 755
pos = 0,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 500]
type = ChangeState
trigger1 = Time = 30
value = 0
ctrl = 1

;------------------------------------------------------------------
;Kunai Bomb
[Statedef 755]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 802
sprpriority = 4

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 6002, VelSet]
type = VelSet
trigger1 = time = 0
y = -1

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 802
time = 1

[State 0, ChangeState]
type = ChangeState
trigger2 = frontedgebodydist < -50
trigger3 = pos y > -5
trigger1 = movecontact
value = 802
ctrl = 0


;---------------------------------------------------------------------------
; Kawarimi Air
[Statedef 760]
type    = A
movetype= I
physics = A
juggle  = 4
poweradd= -500
ctrl = 0
velset = 0,0
anim = 44

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,12

[State 0, Trans]
type = Trans
trigger1 = time < 20
trans = addalpha
alpha = 0,256

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time < 17
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 500, PosAdd]
type = Posset
trigger1 = Time = 17
x = enemy,pos x - 70*enemy,facing

[State 500, Explod]
type = Explod
ownpal = 1
trigger1 = Time = 0 || Time = 17
anim = 460
ID = 460
pos = 0,10
postype = p1  ;p2,front,back,left,right
facing = 1
scale = 1,1
removetime = -2
ownpal = 1
sprpriority = 3

[State 0, Helper]
type = Helper
trigger1 = time = 7
helpertype = normal;player
name = "kunai bomb"
ID = 800
stateno = 755
pos = 0,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 500]
type = ChangeState
trigger1 = Time = 30
value = 50
ctrl = 1

;------------------------------------------------------------------
;Kunai Bomb
[StateDef 800]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 800
ctrl = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,23

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 3
value = -300

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 26
value = S4,13

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 28
value = S4,13

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S0,1

[State 0, Helper]
type = Helper
trigger1 = animelem = 7
helpertype = normal;player
name = "kunai bomb"
ID = 800
stateno = 801
pos = 5,-35
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 27
anim = 701
ID = 700
pos = -25,-36
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale = 1.1,1.1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 27
anim = 700
ID = 700
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 25
anim = 701
ID = 700
pos = -7,-36
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =1.2,1.2
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 24
anim = 700
ID = 700
pos = 4,-31
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.9,0.9
ownpal = 1


[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------
;Kunai Bomb
[Statedef 801]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 803
sprpriority = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 6002, VelSet]
type = VelSet
trigger1 = time = 0
y = -6.5

[State 6002, VelSet]
type = VelSet
trigger1 = 1
x = 13

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 802
time = 1

[State 0, ChangeState]
type = ChangeState
trigger2 = frontedgebodydist < -50
trigger3 = pos y > -5
trigger1 = movecontact
value = 802
ctrl = 0

;---------------------------------------------------------------------------
;Bomb Boom
[StateDef 802]
movetype = A
type    = S
physics = S
velset = 0,0
anim = 801
sprpriority = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,19

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 1011, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = time = 0
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 80, 30
animtype = Hard
guardflag = MA
hitflag = MAF
sparkno = -1
priority = 5, Hit
pausetime = 0, 0
hitsound = S0, 2
guardsound = 6, 0
ground.type = High
ground.slidetime = 1
ground.hittime  = 1
ground.velocity = -7
airguard.velocity = -7,-1
air.type = High
air.velocity = -1,-1
air.hittime = 1
fall = 1
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
ownpal = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.5,0.5

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70700
pos = 0,-15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70700
pos = 0,-15
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 606
pos = 0,-15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 606
pos = 0,-15
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70701
pos = 0,-15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70701
pos = 0,-15
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 607
pos = 0,-15
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 608
pos = 0,-15
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;Kunai Parachute
[StateDef 900]
type = S
movetype = A
physics = S
juggle = 0
anim = 900
ctrl = 0
poweradd = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,23

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 24
trigger2 = time = 25
trigger3 = time = 26
value = -150

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = [24,26]
value = S4,13

[State 0, Helper]
type = Helper
trigger1 = time = 26
helpertype = normal;player
name = "parachute"
ID = 900
stateno = 903
pos = 0,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = time = 25
helpertype = normal;player
name = "parachute"
ID = 900
stateno = 902
pos = 0,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = time = 24
helpertype = normal;player
name = "parachute"
ID = 900
stateno = 901
pos = 0,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 21
anim = 700
ID = 700
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 20
anim = 701
ID = 700
pos = -7,-36
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =1.2,1.2
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 19
anim = 700
ID = 700
pos = 4,-31
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.9,0.9
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------
;Parachute
[Statedef 901]
type = S
movetype= I
physics = N
juggle  = 3
velset = 0,0
anim = 902
sprpriority = 2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time <= 20
value = 15

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= time <= 20
x= 6
y= -10

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 21
value = 901
elem = 1

[State 0, VelSet]
type=VelSet
trigger1= time > 20
x= 0
y= 0.2

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 904
time = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 120 + (stateno%900)*20
value = 904
ctrl = 0


;------------------------------------------------------------------
;Parachute
[Statedef 902]
type = S
movetype= I
physics = N
juggle  = 3
velset = 0,0
anim = 902
sprpriority = 2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time <= 20
value = -15

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= time <= 20
x= 16
y= -10

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 21
value = 901
elem = 1

[State 0, VelSet]
type=VelSet
trigger1= time > 20
x= 0
y= 0.2

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 904
time = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 120 + (stateno%900)*20
value = 904
ctrl = 0


;------------------------------------------------------------------
;Parachute
[Statedef 903]
type = S
movetype= I
physics = N
juggle  = 3
velset = 0,0
anim = 902
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= time <= 20
x= 11
y= -10

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 21
value = 901
elem = 1

[State 0, VelSet]
type=VelSet
trigger1= time > 20
x= 0
y= 0.2

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 904
time = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 120 + (stateno%900)*20
value = 904
ctrl = 0

;------------------------------------------------------------------
;Parachute
[Statedef 904]
type = S
movetype= I
physics = N
juggle  = 3
velset = 0,0
anim = 801

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,19

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 1011, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movehit
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 150, 50
animtype = Hard
guardflag = MA
hitflag = MAF
sparkno = -1
priority = 5, Hit
pausetime = 0, 0
hitsound = S0, 2
guardsound = 6, 0
ground.type = High
ground.slidetime = 1
ground.hittime  = 1
ground.velocity = -7
airguard.velocity = -7,-1
air.type = High
air.velocity = -1,-1
air.hittime = 1
fall = 1
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
ownpal = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.3,0.3

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "senbon"
ID = 930
stateno = 910
pos = 0,7
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "senbon"
ID = 930
stateno = 910
pos = 0,7
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "senbon"
ID = 960
stateno = 911
pos = 0,7
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "senbon"
ID = 960
stateno = 911
pos = 0,7
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "senbon"
ID = 990
stateno = 912
pos = 0,7
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;------------------------------------------------------------------
;Senbon 30'
[Statedef 910]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 903
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = 15
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause = 1

[State 0, VelSet]
type=VelSet
trigger1= time = 1
x= 7.5
y= 6.5

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 50
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5,-3
air.hittime = 12

[State 0, ChangeState]
type = Destroyself
trigger1 = movehit

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 915
time = 1
forceair = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
;trigger2 = movehit
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 915
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 916

;------------------------------------------------------------------
;Senbon 60'
[Statedef 911]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 903
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = -15
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause = 1

[State 0, VelSet]
type=VelSet
trigger1= time = 1
x= 6.5
y= 8

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 50
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5,-3
air.hittime = 12

[State 0, ChangeState]
type = Destroyself
trigger1 = movehit

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 915
time = 1
forceair = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
;trigger2 = movehit
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 915
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 916

;------------------------------------------------------------------
;Senbon 90'
[Statedef 912]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 903
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = -45
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause = 1

[State 0, VelSet]
type=VelSet
trigger1= time = 1
x= 0
y= 8.5

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 50
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5,-3
air.hittime = 12

[State 0, ChangeState]
type = Destroyself
trigger1 = movehit

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 915
time = 1
forceair = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
;trigger2 = movehit
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 915
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 916

;------------------------------------------------------------------
;Senbon
[Statedef 915]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,10

[State 6002, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA
time = -1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -time*30

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 6002, VelSet]
type = VelSet
trigger1 = time = 0
y = -(random%30+20)/10

[State 6002, VelSet]
type = VelSet
trigger1 = 1
x = (random%40+20)/10

[State 0, Turn]
type = Turn
trigger1 = time = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = pos Y >= -5
value = 916

;------------------------------------------------------------------
;Senbon wbity
[StateDef 916]
type = A
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 904
sprpriority = 2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,10

[State 0, AngleDraw]
type = changeanim
trigger1 = prevstateno = 912
trigger1 = time = 0
value = 905

[State 6002, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA
time = -1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*2,time*2

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 115


;---------------------------------------------------------------------------
;Chwytak throw
[StateDef 1000]
type = S
movetype = A
physics = S
juggle = 0
anim = 1000
ctrl = 0

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(EnemyNear(0),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(EnemyNear(0),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
value = S4,14

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 6
anim = 700
ID = 700
pos = -14,-40
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 6
anim = 700
ID = 700
pos = -14,-20
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 3
value = -200

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "chwytak"
ID = 1000
stateno = 1001
pos = 23,-34
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------
;Chwytak
[Statedef 1001]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 1001
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= time = 1
x=(Parent,Fvar(13))/(Parent,fvar(15))*11
y=(Parent,FVar(14))/(Parent,fvar(15))*11

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = C,HP
getpower = 0,0
givepower = 0,0
damage = 0,0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5,-3
air.hittime = 12
p2stateno = 106035


[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1002
time = 1
forceair = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
trigger2 = moveguarded
trigger3 = numhelper(1001) = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = movehit
helpertype = normal;player
name = "chwytak"
ID = 1001
stateno = 1005
pos = -3,-24
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

;------------------------------------------------------------------
;Chwytak
[Statedef 1005]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
anim = 1002
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,20

[State 0, PosSet]
type = PosSet
trigger1 =  1
y = (enemynear, pos y) -24
x = (enemynear, pos x)

[State 1210, end]
type = destroySelf
trigger1 = time = 120 || enemynear, stateno != 106035

;---------------------------------------------------------------------------
;Trap throw
[StateDef 1100]
type = S
movetype = A
physics = S
juggle = 0
anim = 510
velset = 0,0
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S4,8

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 2
value = -1000

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "trap"
ID = 1100
stateno = 1101
pos = 22,-35
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 1210, end]
type = changeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;------------------------------------------------------------------
;Trap
[Statedef 1101]
type = S
movetype= I
physics = N
juggle  = 3
anim = 1100
sprpriority = -2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = var(3)
y = 3

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 3 
range = 8,11

[State 1210, end]
type = changeState
trigger1 = pos y >= -7
value = 1102
ctrl = 0

;------------------------------------------------------------------
;Trap
[Statedef 1102]
type = S
movetype= I
physics = N
juggle  = 3
velset = 0,0
anim = 1101
sprpriority = -2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 4
value = S4,10

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = 1
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 25
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = 0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 30
fall = 1
fall.recover = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = p2dist x < 40 && p2dist y > -20
movetype = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit
value = S4,20

[State 0, Helper]
type = Helper
trigger1 = movehit
helpertype = normal;player
name = "trap"
ID = 1110
stateno = 1110
pos = 0,-400
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = movehit

;------------------------------------------------------------------
;Ball
[Statedef 1110]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 1110
sprpriority = 4

[State 0, VelSet]
type = VelSet
trigger1 = 1
y = 15

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movecontact
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 500
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -8
airguard.velocity = -8,0
air.type = High
air.velocity = -8,0
air.hittime = 30
fall = 1
fall.recover = 0

[State 1210, end]
type = changeState
trigger1 = pos y >= -20
value = 1111
ctrl = 0

;------------------------------------------------------------------
;Trap
[Statedef 1111]
type = S
movetype= I
physics = N
juggle  = 3
velset = 0,0
anim = 1111
sprpriority = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,18

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,17

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1115
ID = 1115
pos = 25,30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 50
scale = 0.7,0.7
sprpriority = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1115
ID = 1115
pos = 0,30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 50
scale = 0.7,0.7
sprpriority = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1115
ID = 1115
pos = -25,30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 50
scale = 0.7,0.7
sprpriority = 5

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 30
freq = 60
ampl = -4
phase = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 35
value = S4,12

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 40
anim = 1120
ID = 1120
pos = 0,40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -2
scale = 0.8,0.9
sprpriority = 6

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = -20

[State 1210, end]
type = destroyself
trigger1 = time = 49

;---------------------------------------------------------------------------
;Recharge Weapon
[StateDef 1200]
type = S
movetype = I
physics = S
anim = 1200
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S3,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,23

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 25
value = S4,12

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 20
value = -750

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 22
anim = 700
ID = 700
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 21
anim = 701
ID = 700
pos = -7,-36
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =1.2,1.2
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 20
anim = 700
ID = 700
pos = 4,-31
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.9,0.9
ownpal = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 25
v = 6
value = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 20
v = 20    ;fv =
value = (-5)*(3-var(6));-15

[State 0, VarAdd]
type = Varset
trigger1 = var(20) < 0
v = 20    ;fv =
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 20
v = 21    ;fv =
value = (-3)*(3-var(6));-10

[State 0, VarAdd]
type = Varset
trigger1 = var(21) < 0
v = 21    ;fv =
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 20
v = 22    ;fv =
value = (-2)*(3-var(6));-4

[State 0, VarAdd]
type = Varset
trigger1 = var(22) < 0
v = 22    ;fv =
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 20
v = 23    ;fv =
value = (-5)*(3-var(6));-15

[State 0, VarAdd]
type = Varset
trigger1 = var(23) < 0
v = 23    ;fv =
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 20
v = 24    ;fv =
value = (-5)*(3-var(6));-20

[State 0, VarAdd]
type = Varset
trigger1 = var(24) < 0
v = 24    ;fv =
value = 0

[State 200, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Rain
[StateDef 1300]
type = S
movetype = I
physics = S
anim = 70500
poweradd = 0
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,1


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 50
value = S22,1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = 1299
ID = 9998
pos = -33,-75
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 2
removeongethit = 1
ontop = 0
ownpal = 1
supermovetime = 999999

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 2
anim = 1300
ID = 9999
pos = -33,-75
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 1
scale = fvar(10), 0.5
sprpriority = 1
removeongethit = 1
ownpal = 1
supermovetime = 999999

[State 7500, VarSet]
type = VarSet
trigger1 = time = 1
fv = 10    ;fv = 10
value = 0

[State 7500, VarAdd]
type = VarAdd
trigger1 = time%2
fv = 10
value = 0.0083

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 5
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = 1
v = 5
value = 1

[State 200, 2]
type = ChangeState
trigger1 = var(50) = 0 && command != "hold_z" && time < 40
trigger2 = power = 0 && time < 40
value = 70501
ctrl = 0

[State 200, 2]
type = ChangeState
trigger1 = var(50) = 0 && command != "hold_z" && time >= 40
trigger2 = var(50) = 1 && time >= 40 && random = [0,100-var(49)*(var(49))/100]
trigger3 = time = 120
trigger4 = power = 0
trigger5 = time > 40 && power < 1000
trigger6 = time > 80 && power < 2500
value = 1301
ctrl = 0

;---------------------------------------------------------------------------
;Rain 1
[StateDef 1301]
type = S
movetype = I
physics = S
anim = 1301
ctrl = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 0
trigger1 = var(5) < 40
value = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 0
trigger1 = var(5) >= 40
trigger1 = var(5) < 80
value = -500

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 0
trigger1 = var(5) >= 80
trigger1 = var(5) < 1200
value = -1000

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 0
trigger1 = var(5) >= 120
value = -2500

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 5
value = 0

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "rain helper"
ID = 1308
stateno = 1308
pos = 0,-55
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 9998

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 150
movetime = 150
anim = -1
sound = S4,23
darken = 1
unhittable = 0

[State 200, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Rain 2
[StateDef 1302]
type = S
movetype = I
physics = S
anim = 1301
ctrl = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id =  9998

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 12
range = -backedgedist-50,frontedgedist+50

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)= var(12)

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)= -400

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = time = [40,200]
trigger1 = time%4 = 0
helpertype = normal;player
name = "weapons"
ID = 1303+random%4
stateno = 1303+random%4
pos = 0,-55
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 160

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = [40,200]
trigger1 = time%6 = 0
value = S4,13

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = [40,200]
trigger1 = time%9 = 0
anim = 700+random%2
ID = 700
pos = -8,-59
random = 20,12
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
supermovetime = 99999
sprpriority = 4
scale = 0.7+(random%4)*0.1,0.7+(random%4)*0.1
ownpal = 1

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 225
movetime = 225
anim = -1
sound = S4,23
darken = 1
unhittable = 0

[State 200, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Rain helper
[StateDef 1308]
type = S
movetype = I
physics = N
anim = 1309
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 10   
value = parent,fvar(10)

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 12
range = p2dist x-400,p2dist x+400

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)= var(12)

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)= -500

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = parent,time = [40,150]
trigger1 = parent,time%4 = 0
triggerall = parent,stateno = 1301
triggerall = fvar(10) =[0,0.332]
helpertype = normal;player
name = "weapons"
ID = 1303+random%2
stateno = 1303+random%2
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = parent,time = [40,150]
trigger1 = parent,time%4 = 0
triggerall = parent,stateno = 1301
triggerall = fvar(10) =[0.332,0.497]
helpertype = normal;player
name = "weapons"
ID = 1303+random%4
stateno = 1303+random%4
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = parent,time = [40,150]
trigger1 = parent,time%4 = 0
triggerall = parent,stateno = 1301
triggerall = fvar(10) >=0.498
helpertype = normal;player
name = "weapons"
ID = 1305+random%2
stateno = 1305+random%2
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = parent,time = [40,150]
trigger1 = parent,time%6 = 0
triggerall = parent,stateno = 1301
value = S4,13

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = parent,time = [40,150]
trigger1 = parent,time%9 = 0
triggerall = parent,stateno = 1301
anim = 700+random%2
ID = 700
pos = -8,-4
random = 20,12
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
supermovetime = 99999
sprpriority = 4
scale = 0.7+(random%4)*0.1,0.7+(random%4)*0.1
ownpal = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 200
value = 1309

;---------------------------------------------------------------------------
;Rain helper
[StateDef 1309]
type = S
movetype = I
physics = N
anim = 1309
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
x = enemy(0), pos x
y = -500

[State 0, Helper]
type = Helper
trigger1 = time = [0,140]
trigger1 = time%3 = 0
triggerall = fvar(10) =[0,0.332]
helpertype = normal;player
name = "weapons"
ID = 1313+random%2
stateno = 1313+random%2
pos = 200-random%400,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = [0,140]
trigger1 = time%3 = 0
triggerall = fvar(10) =[0.332,0.497]
helpertype = normal;player
name = "weapons"
ID = 1313+random%4
stateno = 1313+random%4
pos = 200-random%400,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = [0,140]
trigger1 = time%3 = 0
triggerall = fvar(10) >=0.498
helpertype = normal;player
name = "weapons"
ID = 1315+random%2
stateno = 1315+random%2
pos = 200-random%400,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999

[State 0, ChangeState]
type = destroyself
trigger1 = time = 141

;---------------------------------------------------------------------------
;Rain
[StateDef 1310]
type = S
movetype = I
physics = S
anim = 1301
ctrl = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id =  9998

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 12
range = -backedgedist-50,frontedgedist+50

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)= var(12)

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)= -400

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = time = [40,200]
trigger1 = time%4 = 0
helpertype = normal;player
name = "weapons"
ID = 1305+random%2
stateno = 1305+random%2
pos = 0,-55
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 160

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = [40,200]
trigger1 = time%6 = 0
value = S4,13

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = [40,200]
trigger1 = time%9 = 0
anim = 700+random%2
ID = 700
pos = -8,-59
random = 20,12
postype = p1  ;p2,front,back,left,right
facing = 1
ownpal = 1
removetime = -2
supermovetime = 99999
sprpriority = 4
scale = 0.7+(random%4)*0.1,0.7+(random%4)*0.1

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 225
movetime = 225
anim = -1
sound = S4,23
darken = 1
unhittable = 0

[State 200, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------
;Shuriken
[Statedef 1303]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 70710
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(2) = 1
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, VarSet]
type = VarSet
trigger1 = parent, stateno = 1310
v = 2
value = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = -time*30
ignorehitpause=1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause=1

[State 0, VelSet]
type=VelSet
trigger1= time = 0
x=(Parent,Fvar(13))/(Parent,fvar(15))*12
y=(Parent,FVar(14))/(Parent,fvar(15))*12

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 10,1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = -1
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70715
time = 1
forceair = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70715
ctrl = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 100
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time>80
trans = addalpha
alpha = 256-(time-80)*12.8,(time-80)*12.8
ignorehitpause = 1

;------------------------------------------------------------------
;Kunai
[Statedef 1304]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70700
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(2) = 1
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, VarSet]
type = VarSet
trigger1 = parent, stateno = 1310
v = 2
value = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = vel x >= 0
value = (atan(Vel Y/Vel X)+(4*Pi/2))*(-180/Pi)
ignorehitpause=1

[State 0, AngleSet]
type = AngleSet
trigger1 = vel x < 0
value = (atan(Vel Y/Vel X)+(4*Pi/2))*(-180/Pi)+180
ignorehitpause=1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause=1

[State 0, VelSet]
type=VelSet
trigger1= time = 0
x=(Parent,Fvar(13))/(Parent,fvar(15))*12
y=(Parent,FVar(14))/(Parent,fvar(15))*12

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 50,6
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = -1
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70715
time = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 100
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time>80
trans = addalpha
alpha = 256-(time-80)*12.8,(time-80)*12.8
ignorehitpause = 1
;------------------------------------------------------------------
;Ball
[Statedef 1305]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 1302
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(2) = 1
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, VarSet]
type = VarSet
trigger1 = parent, stateno = 1310
v = 2
value = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = -time*40
ignorehitpause=1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause=1

[State 0, VelSet]
type=VelSet
trigger1= time = 0
x=(Parent,Fvar(13))/(Parent,fvar(15))*12
y=(Parent,FVar(14))/(Parent,fvar(15))*12

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movecontact
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 80,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
sparkxy = -10, 0
guardsound = 6, 0
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -3
airguard.velocity = -3,0
air.type = High
air.velocity = -3,0
air.hittime = 10
fall = 1
fall.recover = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 100
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time>80
trans = addalpha
alpha = 256-(time-80)*12.8,(time-80)*12.8
ignorehitpause = 1
;------------------------------------------------------------------
;Exp. Kunai
[Statedef 1306]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70730
sprpriority = 2

[State 0, VelSet]
type=VelSet
trigger1= time = 0
x=(Parent,Fvar(13))/(Parent,fvar(15))*12
y=(Parent,FVar(14))/(Parent,fvar(15))*12

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(2) = 1
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, VarSet]
type = VarSet
trigger1 = parent, stateno = 1310
v = 2
value = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = vel x >= 0
value = (atan(Vel Y/Vel X)+(4*Pi/2))*(-180/Pi)
ignorehitpause=1

[State 0, AngleSet]
type = AngleSet
trigger1 = vel x < 0
value = (atan(Vel Y/Vel X)+(4*Pi/2))*(-180/Pi)+180
ignorehitpause=1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause=1

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70736
time = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 70736
ctrl = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 100
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time>80
trans = addalpha
alpha = 256-(time-80)*12.8,(time-80)*12.8
ignorehitpause = 1

;------------------------------------------------------------------
;Shuriken
[Statedef 1313]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70710
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(2) = 1
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = -time*30
ignorehitpause=1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause=1

[State 0, VelSet]
type=VelSet
trigger1= 1
y = 11.5

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 10,1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = -1
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70715
time = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70715
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 70716

;------------------------------------------------------------------
;Kunai (pionowo w d)
[Statedef 1314]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70700
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(2) = 1
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 270
ignorehitpause=1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= 1
y= 12.5

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 50,6
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = -1
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70705
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
;trigger2 = movehit
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value =  70705
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value =  70706

;------------------------------------------------------------------
;Ball
[Statedef 1315]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 1302
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(2) = 1
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause=1

[State 0, VelSet]
type=VelSet
trigger1= 1
y= 13

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movecontact
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 80,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 5
sparkno = -1
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -3
airguard.velocity = -3,0
air.type = High
air.velocity = -3,0
air.hittime = 10
p1sprpriority = 2

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 641

;------------------------------------------------------------------
;Expl Kunai (pionowo w d)
[Statedef 1316]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70730
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(2) = 1
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 270
ignorehitpause=1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= 1
y = 12

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70736
time = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 70736
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 70736

;---------------------------------------------------------------------------
; Chain-ball
[StateDef 1400]
type = S
movetype = A
physics = S
juggle = 0
anim = 1400
ctrl = 0
sprpriority = 3

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x
triggerall = numhelper(1401) = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 2
value = S4,13

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = 701
ID = 700
pos = -25,-36
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale = 1.1,1.1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 9
anim = 700
ID = 700
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 8
anim = 701
ID = 700
pos = -7,-36
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =1.2,1.2
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 7
anim = 700
ID = 700
pos = 4,-31
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.9,0.9
ownpal = 1

[State 0, VarAdd]
type = VarSet
trigger1 = animelem = 4
fv = 30   ;fv =
value = EnemyNear(0),Pos x

[State 0, VarAdd]
type = VarSet
trigger1 = animelem = 4
fv = 31   ;fv =
value = EnemyNear(0),Pos Y

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(EnemyNear(0),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(EnemyNear(0),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = animelem = 4
;value = S0,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,22

[State 0, Helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal;player
name = "chain-ball"
ID = 1401
stateno = 1401
pos = 9,-36
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 4
value = -500

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time > 30
value = SCA
time = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1400 && numhelper(1401) = 0 && time > 50
value = 1401

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0 && anim = 1401
value = 0
ctrl = 1

;------------------------------------------------------------------
;Chain-ball
[Statedef 1401]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 1302
sprpriority = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = vel x > 0
v = 13
value = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = vel x > 0
anim = 1405
ID = 1406 + var(13)
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -1
scale = 1,1
sprpriority = 1

[State 0, VarAdd]
type = VarSet
trigger1 = vel x < 0 && var(14) = 0
v = 14
value = time

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = vel x < 0
id = (1405 + var(13)) - (time-var(14))

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = vel x < 0
id = (1405 + var(13)) - (time-var(14)) +1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = vel x < 0
id = (1405 + var(13)) - (time-var(14)) -1 ;+ 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "shadow-ball"
ID = 1405
stateno = 1405
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 13
value = (Parent,Fvar(13))/(Parent,fvar(15))*9

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 14
value = (Parent,FVar(14))/(Parent,fvar(15))*9

[State 0, VelSet]
type=VelSet
trigger1= time = 1
x= Fvar(13)
y= Fvar(14)

[State 0, VelSet]
type=VelSet
trigger1 = p2stateno = 106036 || moveguarded
trigger2 = parent, pos x < EnemyNear(0),pos x
trigger2 = pos x > parent, fvar(30)
trigger2 = time > 8
trigger3 = parent, pos x > EnemyNear(0),pos x
trigger3 = pos x < parent, fvar(30)
trigger3 = time > 8
trigger4 = time > 50
triggerall = vel x > 0
x= -Fvar(13)
y= -Fvar(14)


[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.5,1.5
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movecontact && vel x > 0
attr = C,HP
getpower = 0,0
givepower = 0,0
damage = 250
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 2000+random%19
sparkxy = -5-random%20, 0
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = -7
airguard.velocity = -1.9,-.9
air.type = High
air.velocity = -7,-1.5
air.hittime = 15
fall = 1
fall.recover = 0
getpower = 0
p2stateno = 106036

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movecontact && vel x < 0
attr = C,HP
getpower = 0,0
givepower = 0,0
damage = 150
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 2000+random%19
sparkxy = -5-random%20, 0
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = 7
airguard.velocity = 1.9,-.9
air.type = High
air.velocity = 7,-1.5
air.hittime = 15
fall = 1
fall.recover = 0
getpower = 0
p2stateno = 106036

[State 0, DestroySelf]
type = changestate
trigger1 = vel x < 0
trigger1 = rootdist x = [-30,30]
trigger1 = rootdist y = [-50,50]
value = 1402

[State 0, DestroySelf]
type = changestate
trigger1 = parent,stateno != 1400
trigger1 = parent,stateno != 6600
value = 1404

[State 1012, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 0,256

;------------------------------------------------------------------
;Chain-ball
[Statedef 1402]
type = S
movetype= I
physics = N
anim = 1402

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1411

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1410

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1409

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1408

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1407

[State 1012, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 0,256

[State 1210, end]
type = destroyself
trigger1 = time = 0

;------------------------------------------------------------------
;Chain-ball
[Statedef 1404]
type = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1302
sprpriority = 2

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1405+time

[State 0, VarAdd]
type = VarAdd
trigger1 = frontedgedist > -50
trigger1 = backedgedist > -50
trigger1 = pos y < -1
v = 13
value = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = frontedgedist > -50
trigger1 = backedgedist > -50
trigger1 = pos y < -1
anim = 1405
ID = 1406 + var(13)
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -1
scale = 1,1
sprpriority = 1

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movecontact
attr = C,HP
getpower = 0,0
givepower = 0,0
damage = 70
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 2
sparkxy = -15, 0
hitsound = 5, 4
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = -7
airguard.velocity = -1.9,-.9
air.type = High
air.velocity = -7,-1.5
air.hittime = 15
fall = 1
fall.recover = 0
getpower = 0
p2stateno = 106036

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgedist < -600
trigger2 = backedgedist < -600

[State 0, VelSet]
type = VelSet
trigger1 = pos y > -1
x = 0
y = 0

[State 0, VarAdd]
type = VarSet
trigger1 = pos y > -1
v = 14
value = time

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 1406

;------------------------------------------------------------------
;Chain-ball
[Statedef 1405]
type = S
movetype= A
physics = N
anim = 1402
sprpriority = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 2
pos = 0,0

;[State 0, VelSet]
;type=VelSet
;trigger1= 1
;x= parent, vel x
;y= parent, vel y

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = parent,vel x > 0
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 1
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
sparkxy = -15, -30
hitsound = -5, 2
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = -7
airguard.velocity = -1.9,-.9
air.type = High
air.velocity = -7,-1.5
air.hittime = 15
fall = 1
fall.recover = 0
getpower = 0

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = parent,vel x < 0
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 1
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
sparkxy = -15, -30
hitsound = -5, 2
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = 7
airguard.velocity = 1.9,-.9
air.type = High
air.velocity = 7,-1.5
air.hittime = 15
fall = 1
fall.recover = 0
getpower = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = numhelper(1401) = 0
trigger2 = parent,stateno != 1401
trigger2 = parent,stateno != 6601
;------------------------------------------------------------------
;Chain-ball
[Statedef 1406]
type = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1303
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,17

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1405+time+var(14)

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1115
ID = 1115
pos = -2,6
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 84
scale = 0.5,0.5
sprpriority = 5

[State 1012, Trans]
type = Trans
trigger1 = time >= 35
trans = addalpha
alpha = 256-(time-35)*9.6,(time-35)*9.6

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 10
freq = 40
ampl = -2
phase = 60

[State 1210, end]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;Shuriken's circle
[StateDef 1500]
type = A
movetype = A
physics = A
juggle = 0
velset = 0,-5
anim = 1500
ctrl = 0
poweradd = -100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = [5,8]
trigger2 = time = [17,20]
triggerall = time%2 = 0
value = S4,13

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal;player
name = "shuriken"
ID = 1500
stateno = 1501
pos = -20,-20
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 6
helpertype = normal;player
name = "shuriken"
ID = 1500
stateno = 1502
pos = -30,-30
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 7
helpertype = normal;player
name = "shuriken"
ID = 1500
stateno = 1503
pos = -35,-35
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 8
helpertype = normal;player
name = "shuriken"
ID = 1500
stateno = 1504
pos = -40,-50
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 17
helpertype = normal;player
name = "shuriken"
ID = 1500
stateno = 1504
pos = 40,-50
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 18
helpertype = normal;player
name = "shuriken"
ID = 1500
stateno = 1503
pos = 35,-35
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 19
helpertype = normal;player
name = "shuriken"
ID = 1500
stateno = 1502
pos = 30,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 20
helpertype = normal;player
name = "shuriken"
ID = 1500
stateno = 1501
pos = 25,-15
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

;------------------------------------------------------------------
;Shuriken 22,5
[Statedef 1501]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 70710
poweradd = 0
sprpriority = 2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 700
ID = 700
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = -time*30

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, VelSet]
type=VelSet
trigger1= time = 0
x= cos(3*PI/8)*11
y= sin(3*PI/8)*11

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70715
time = 1
forceair = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70715
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 70716

;------------------------------------------------------------------
;Shuriken 45
[Statedef 1502]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 70710
poweradd = 0
sprpriority = 2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 700
ID = 700
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = -time*30

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, VelSet]
type=VelSet
trigger1= time = 0
x= cos(PI/4)*11
y= sin(PI/4)*11

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70715
time = 1
forceair = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70715
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 70716

;------------------------------------------------------------------
;Shuriken 67,5
[Statedef 1503]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 70710
poweradd = 0
sprpriority = 2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 700
ID = 700
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = -time*30

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, VelSet]
type=VelSet
trigger1= time = 0
x= cos(PI/8)*11
y= sin(PI/8)*11

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70715
time = 1
forceair = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70715
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 70716

;------------------------------------------------------------------
;Shuriken 90
[Statedef 1504]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 70710
poweradd = 0
sprpriority = 2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 700
ID = 700
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = -time*30

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, VelSet]
type=VelSet
trigger1= time = 1
x=11

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70715
time = 1
forceair = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70715
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 70716

;---------------------------------------------------------------------------
;Smoke bomb combo
[StateDef 1600]
type = A
movetype = A
physics = A
juggle = 0
velset = 0,-9
anim = 1600
poweradd = 0
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time =0
value = S4,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,6

[State 0, Helper]
type = Helper
trigger1 = time = 10 && var(22) < 8
triggerall = numexplod(70745) < 2
helpertype = normal;player
name = "s. kunai"
ID = 1600
stateno = 1601
pos = 30,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20 && var(22) < 8
value = S4,8

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 21
v = 22    ;fv =
value = 1

[State 0, VarAdd]
type = Varset
trigger1 = time = 21 && var(22) > 8
v = 22    ;fv =
value = 8

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 30
length = 30
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 160,150,150
palpostbright = 0,0,0
paladd = 5,0,0
palmul = .65,.65,.75
timegap = 1
framegap = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = time=0
x = -backedgedist/40

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y > -15
value = 1603
ctrl = 0

;------------------------------------------------------------------
;Smoke  Kunai
[Statedef 1601]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70740
sprpriority = 2

[State 0, alive]
type = VarSet
trigger1 = time=0
var(12) = cond((enemynear(0),alive),0,1)

[State 1640, X]
Type=VarSet
Trigger1=time=0
fvar(13)=(enemynear(var(12)),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=time=0
fvar(14)=(enemynear(var(12)),pos Y-Pos Y)

[State 1640, alfa]
Type=VarSet
trigger1= time = 0
fvar(15)= Atan(fvar(14)/fvar(13))

[State 0, VelSet]
type=VelSet
trigger1= 1
x= cos(fvar(15))*11
y= sin(fvar(15))*11

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -fvar(15)*180/PI

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70745
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 70745
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 70745

;---------------------------------------------------------------------------
;Smoke combo
[StateDef 1603]
type = S
movetype = I
physics = S
velset = 0,0
anim = 1601
poweradd = 0
ctrl = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = [18,168]
value = -18

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,23

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time =0
value = S4,0

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, Helper]
type = Helper
trigger1 = time = [18,168]
trigger1 = time%4 = 0
helpertype = normal;player
name = "weapons"
ID = 1604+random%4
stateno =  cond(random%4=3,1606,1604+random%3)
pos = 14,-36
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = [18,168]
trigger1 = time%6 = 0
value = S4,13

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = [18,168]
trigger1 = time%5 = 0
anim = 700+random%2
ID = 700
pos = 1,-40
random = 8,12
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
supermovetime = 99999
sprpriority = 4
scale = 0.7+(random%4)*0.1,0.7+(random%4)*0.1
ownpal = 1

[State 200, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------
;Kunai
[Statedef 1604]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70700
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= time = 0
x = 11
y = -(-20+random%150)*0.01

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 50,6
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70701
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
;trigger2 = movehit
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70701
ctrl = 0

;------------------------------------------------------------------
;Shuriken
[Statedef 1605]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 70710
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = -time*30

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, VelSet]
type=VelSet
trigger1= time = 0
x = 11
y = -(-20+random%150)*0.01

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
getpower = 0,0
givepower = 0,0
attr = A, NP
damage = 10,1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70715
time = 1
forceair = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
;trigger2 = movehit
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70715
ctrl = 0

;------------------------------------------------------------------
;Explode  Kunai
[Statedef 1606]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70730
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = random%3 = 0 && time = 0
value = 1604

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= time = 0
x = 11
y = -(-20+random%150)*0.01

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
getpower = 0,0
givepower = 0,0
attr = A, NP
damage = 1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70736
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 70736
ctrl = 0

;---------------------------------------------------------------------------
;Wybuch Explode Kunai
[Statedef 1607]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
ctrl = 0
anim = 650

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.8,0.8

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,19

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1011, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = 1
attr = S, NA
getpower = 0,0
givepower = 0,0
damage = 80, 60
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 8
sparkno = -1
hitsound = -1, 3
guardsound = -1, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 15452
ground.velocity = -1,5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1,5
air.hittime = 12455
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 0
palfx.time = 30
palfx.add = 150,0,-100
palfx.mul = 256,256,256
palfx.sinadd = 110,55,85,10

[State 1011, Destroyself]
type = destroyself
trigger1 = time = 16

;---------------------------------------------------------------------------
; Twin Dragons
[StateDef 1700]
type = S
movetype = A
physics = S
juggle = 0
anim = 1700
ctrl = 0
sprpriority = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 8
value = S4,14

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 8
anim = 700
ID = 700
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 5
scale =0.8,0.8
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S4,2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 5
anim = 1703
ID = 1703
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -1
supermove = 99999
scale = 1,1
sprpriority = 1
removeongethit = 1
ownpal = 1

[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 7
time = 91
anim = -1
sound = S10,1
movetime = 91
darken = 1
unhittable = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 8
id = 1703

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 8
anim = 700
ID = 700
pos = 20,-7
postype = p1  ;p2,front,back,left,right
facing = 1
vel = -2,0
removetime = -2
sprpriority = 4
supermove = 99999
scale = 1,1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 8
anim = 700
ID = 700
pos = -37,-5
postype = p1  ;p2,front,back,left,right
facing = -1
vel = 2,0
removetime = -2
sprpriority = 4
supermove = 99999
scale = 1,1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 8
anim = 1704
ID = 1704
pos = 16,5
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
supermove = 99999
scale = 1,0.5
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 8
anim = 1704
ID = 1704
pos = -27,6
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -2
sprpriority = 4
supermove = 99999
scale = 1,1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 8
anim = 1701
ID = 1701
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -1
supermove = 99999
scale = 1.1,1.6
sprpriority = 5
removeongethit = 1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 8
anim = 1702
ID = 1701
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -1
supermove = 99999
scale = 1.1,1.6
sprpriority = -1
removeongethit = 1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 8
anim = 1701
ID = 1701
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 15
supermove = 99999
scale = 1.1,1.6
sprpriority = 5
removeongethit = 1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 8
anim = 1702
ID = 1701
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 15
supermove = 99999
scale = 1.1,1.6
sprpriority = -1
removeongethit = 1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
triggerall = time > 90
trigger1 = timemod = 25,1
anim = F600
ID = 600
pos = 0,3
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 7
scale =1,1
supermovetime = 99999
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
triggerall = time > 90
trigger1 = timemod = 20,1
anim = F580
ID = 580
pos = 0,3
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 6
scale =0.7,0.22
supermovetime = 99999
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 97
anim = 1705
ID = 1705
pos = -22,-95
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 6
scale = 1,1
supermove = 99999
removeongethit = 1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 97
anim = 1705
ID = 1705
pos = 7,-117
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 6
scale = 1,1
supermove = 99999
removeongethit = 1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 97
anim = 1705
ID = 1705
pos = -24,-22
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 6
scale = 1,1
supermove = 99999
removeongethit = 1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 97
anim = 1705
ID = 1705
pos = -1,-45
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 6
scale = 1,1
supermove = 99999
removeongethit = 1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 97
anim = 1705
ID = 1705
pos = 26,-64
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 6
scale = 1,1
supermove = 99999
removeongethit = 1
ownpal = 1

[State 200, 2]
type = ChangeState
trigger1 = Time = 110
value = 1701
ctrl = 0

;---------------------------------------------------------------------------
; Twin Dragons
[StateDef 1701]
type = S
movetype = A
physics = S
juggle = 0
anim = 1706
ctrl = 0
sprpriority = 4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 25,1
anim = F600
ID = 600
pos = 0,132
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 7
scale =1,1
supermovetime = 99999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 20,1
anim = F580
ID = 580
pos = 0,132
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 6
scale =0.7,0.22
supermovetime = 99999

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && helper(1730), pos x > pos x+15
trigger2 = facing = 1 && helper(1730), pos x < pos x-15

[State 1640, X]
Type=VarSet
Trigger1= 1
fvar(13)=(helper(1730),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1= 1
fvar(14)=(helper(1730),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, VelSet]
type = VelSet
trigger1 = time = 0 && time < 7 
y = const(velocity.jump.y)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = F3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0 
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3

[State 0, VelSet]
type = VelSet
trigger1 = time = 7
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = time = 7
y = -130

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time >= 6
value = 1
movecamera = 1,0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 7
statetype = A

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1706 && animtime = 0
value = 1707

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 1706 && animtime = 0
value = 1707+random%3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time%10 = 0
value = S4,8

[State 0, Helper]
type = Helper
trigger1 = time%6 = 0 && anim != 1706
helpertype = normal ;player
name = "weapon"
ID = 1710
stateno = cond((time/6)%10= 0,1711+((time/6)%20)/10,1710)
pos = 26,-33
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time%6 = 0 && anim != 1706
anim = 700
ID = 700
pos = 12,-33
random = 16,2
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 5
scale = 0.7+(random%3)*0.1,0.7+(random%3)*0.1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0 
helpertype = normal ;player
name = "celownik"
ID = 1730
stateno = 1730
pos = 100,-50
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1
keyctrl = 1
supermovetime = 999
size.xscale = 0.2
size.yscale = 0.2

[State 0, PowerAdd]
type = PowerAdd
trigger1 = timemod = 2,0
value = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = time > 100 && power < 30
trigger2 = win
trigger3 = lose
trigger4 = life = 0
trigger5 = p2life = 0
trigger6 = command = "s" && var(50) = 0
trigger7 = var(50) = 1 && random = [900,910-var(49)*var(49)/200]
trigger7 = time > 200
trigger8 = time > 500
value = 1702
ctrl = 1

;---------------------------------------------------------------------------
; Twin Dragons
[StateDef 1702]
type = A
movetype = I
physics = A
juggle = 0
velset = 0,-2
anim = 1500
ctrl = 0
sprpriority = 4

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 600

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 580

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1701

;------------------------------------------------------------------
;Shuriken/ kunai
[Statedef 1710]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 1710+((parent,time)/6)%7
sprpriority = 2
poweradd = -30

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = anim = [1710,1713]
value = -time*30
ignorehitpause = 1

[State 0, AngleSet]
type = AngleSet
trigger1 = anim = [1714,1716]
value = (atan(Vel Y/Vel X)+(4*Pi/2))*(-180/Pi)
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause = 1

[State 0, VelSet]
type=VelSet
trigger1= time = 1
x=(Parent,Fvar(13))/(Parent,fvar(15))*11
y=(Parent,FVar(14))/(Parent,fvar(15))*11 + (random%200)*0.01 - 1 + cond(Ailevel = 0,0,5)

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
damage = 20,4
animtype = Light
getpower = 0,0
givepower = 0,0
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70720
ctrl = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
;trigger2 = movehit
ignorehitpause = 1

[State 0, kunai]
type = HitOverride
trigger1 = anim = 1714
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70705
time = 1
forceair = 1

[State 0, kunai]
type = ChangeState
trigger1 = moveguarded
trigger1 = anim = 1714
value = 70705
ctrl = 0

[State 1003, kunai]
type = changestate
trigger1 = anim = 1714
trigger1 = pos y > -1
value = 70706

[State 0, big shuriken]
type = HitOverride
trigger1 = anim = 1712
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 616
time = 1
forceair = 1

[State 0, big shuriken]
type = ChangeState
trigger1 = moveguarded
trigger1 = anim = 1712
value = 616
ctrl = 0

[State 1003, big shuriken]
type = changestate
trigger1 = anim = 1712
trigger1 = pos y > -1
value = 617

[State 0, big shuriken]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70715
time = 1
forceair = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
trigger1 = anim = 1714
value = 70715
ctrl = 0

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 70716

;------------------------------------------------------------------
;Explode Kunai
[Statedef 1711]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 70730
sprpriority = 2
poweradd = -25

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = (atan(Vel Y/Vel X)+(4*Pi/2))*(-180/Pi)
ignorehitpause = 1


[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause = 1


[State 0, VelSet]
type=VelSet
trigger1= time = 1
x=(Parent,Fvar(13))/(Parent,fvar(15))*11
y=(Parent,FVar(14))/(Parent,fvar(15))*11 + (random%200)*0.01 - 1 + cond(Ailevel = 0,0,5)

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = A, NP
getpower = 0,0
givepower = 0,0
damage = 1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 15
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2,-3
air.hittime = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70736
time = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 70736
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y > 0
value = 70735
ctrl = 0

;------------------------------------------------------------------
;Ball
[Statedef 1712]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 1302
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = (atan(Vel Y/Vel X)+(4*Pi/2))*(-180/Pi)
ignorehitpause = 1


[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause = 1


[State 0, VelSet]
type=VelSet
trigger1= time = 1
x=(Parent,Fvar(13))/(Parent,fvar(15))*11
y=(Parent,FVar(14))/(Parent,fvar(15))*11 + (random%200)*0.01 - 1 + cond(Ailevel = 0,0,5)

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movecontact
attr = A, NP
damage = 80,10
getpower = 0,0
givepower = 0,0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 29
sparkxy = -10, 0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -3
airguard.velocity = -3,0
air.type = High
air.velocity = -3,0
air.hittime = 10

[State 1003, ChangeState]
type = changestate
trigger1 = pos y > -1
value = 641

;------------------------------------------------------------------
;Viewfinder
[Statedef 1730]
anim = 1730
ctrl = 0
sprpriority = 100

[State 0, Turn]
type = Turn
trigger1 = facing = -1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noautoturn

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, Trans]
type = Trans
trigger1 = time <= 10
trans = addalpha
alpha = 0+time*25.6,256-time*25.6

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time <= 10
value = 180 - time*18
scale = 3-time*0.2,3-time*0.2

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 1
range = -2,2

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 2
range = -2,2

[State 0, VelAdd]
type = VelAdd
trigger1 = timemod = 5,0
x = var(1)
y = var(2)

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .9+sin(gametime*.3)*.2,.9+sin(gametime*.3)*.2


[State 0, VelSet]
type = VelSet
trigger1 = parent,var(50) = 0  && parent, command = "holdfwd" && parent, facing = 1
trigger2 = parent,var(50) = 0  && parent, command = "holdback" && parent, facing = -1
trigger3 = parent,var(50) = 1 && p2dist x > -20 && random = [0,100+root,var(49)*(var(49))/10]
x = 3

[State 0, VelSet]
type = VelSet
trigger1 = parent,var(50) = 0 && parent, command = "holdback" && parent, facing = 1
trigger2 = parent,var(50) = 0  && parent, command = "holdfwd" && parent, facing = -1
trigger3 = parent,var(50) =  1 && p2dist x < 20 && random = [0,100+root,var(49)*(var(49))/10] 
x = -3

[State 0, VelSet]
type = VelSet
trigger1 = parent,var(50) = 0 && parent, command = "holdup"
trigger2 = parent,var(50) = 1 && p2dist y < cond(p2statetype = C,5+random%20,25+random%20) && random = [0,100+root,var(49)*(var(49))/10]
y = -3

[State 0, VelSet]
type = VelSet
trigger1 = parent,var(50) = 0 && parent, command = "holddown"
trigger2 = parent,var(50) = 1 && p2dist y > cond(p2statetype = C,5+random%20,25+random%20) && random = [0,100+root,var(49)*(var(49))/10]
triggerall = pos y < 0
y = 3

[State 0, VelSet]
type = VelSet
trigger1 = timemod = 15,0
x = 0
y = 0

[State 0, PosSet]
type = Posadd
trigger1 = frontedgedist < 0 
x = frontedgedist

[State 0, PosSet]
type = Posadd
trigger1 = backedgedist < 0 
x = -backedgedist

[State 0, PosSet]
type = Posset
trigger1 = pos y > 30 
y = 30

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 0, PosSet]
type = PosSet
trigger1 = 0;pos y < enemy, pos y -150
y = enemy, pos y -150

[State 0, DestroySelf]
type = changestate
trigger1 = parent,stateno != 1701
value = 1731
;------------------------------------------------------------------
;Viewfinder
[Statedef 1731]
ontop = 1
ctrl = 0
anim = 1731
sprpriority = 10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, PosSet]
type = Posadd
trigger1 = time = 0
y = -35

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*12.8,0+time*12.8

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1+time*0.2,1+time*0.2

[State 0, DestroySelf]
type = destroyself
trigger1 = time = 20
trigger2 = AILevel != 0

;---------------------------------------------------------------------------
;Ultimate 1: Weapon Control: Tensasai
[StateDef 1800]
type = S
movetype = A
physics = S
juggle = 0
anim = 70500
ctrl = 0
sprpriority = 2
poweradd = -1000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 6
value = S4,2
volume = -50

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 80
anim = -1
sound = -1,0
movetime = 80
darken = 0
unhittable = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S4,16
loop = 1
channel = 2

[State 0, PlaySnd]
type = StopSnd
trigger1 = time = 55
channel = 2

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 1
time = 55
freq = 90
ampl = -3
phase = 90

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 6 && time < 50 && timemod = 15,7
anim = 1805
ID = 1805
pos = -7,25
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = 0,-1
removetime = -2
supermovetime = 9999
scale = 0.7,0.7
sprpriority = 2
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = 1807
ID = 1807
pos = -6,13
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = 0,0
removetime = -2
supermovetime = 9999
scale = 0.8,0.8
sprpriority = 4
ownpal = 1

[State 200, 2]
type = ChangeState
trigger1 = time = 80
value = 1810
ctrl = 0

;---------------------------------------------------------------------------
; Weapon Control: Tensasai (aktywacja)
[StateDef 1810]
type = S
movetype = A
physics = S
juggle = 0
anim = 1800
ctrl = 0
poweradd = -500
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
trigger2 = time = 26
value = S4,13

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S0,1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 700
ID = 700
pos = -16,-38
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
supermovetime = 99999
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 24
anim = 700
ID = 700
pos = 27,-19
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
supermovetime = 99999
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 24
helpertype = normal;player
name = "chain"
ID = 1850
stateno = 1850
pos = 16,-19
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999


[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 27
anim = 700
ID = 700
pos = 28,-28
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
supermovetime = 99999
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 27
helpertype = normal;player
name = "chain"
ID = 1851
stateno = 1850
pos = 17,-28
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 30
anim = 700
ID = 700
pos = 30,-35
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
supermovetime = 99999
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 30
helpertype = normal;player
name = "chain"
ID = 1852
stateno = 1850
pos = 19,-35
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999

[State 200, 2]
type = ChangeState
trigger1 = numhelper(1850) = 0  && time > 25
value = 1811
ctrl = 0

[State 200, 2]
type = ChangeState
triggerall = p2dist x > 120
trigger1 = helper(1850), stateno = 1851
trigger2 = helper(1851), stateno = 1851
trigger3 = helper(1852), stateno = 1851
value = 1812
ctrl = 0

[State 200, 2]
type = ChangeState
triggerall = p2dist x < 120
trigger1 = helper(1850), stateno = 1851
trigger2 = helper(1851), stateno = 1851
trigger3 = helper(1852), stateno = 1851
value = 1815
ctrl = 0

;---------------------------------------------------------------------------
; Weapon Control: Tensasai (nieudane)
[StateDef 1811]
type = S
movetype = A
physics = S
juggle = 0
anim = 1801
ctrl = 0
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 6
anim = 700
ID = 700
pos = 21,-51
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
supermovetime = 99999
ownpal = 1

[State 200, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Weapon Control: Tensasai (udane)
[StateDef 1812]
type = S
movetype = A
physics = S
juggle = 0
anim = 1802
ctrl = 0
poweradd = -3500
sprpriority = 3

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 60
movetime = 0
anim = -1
darken = 0
unhittable = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F34,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F34,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F34,2

[State 0, Swiatlo do superpausy]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 4000
ID = 4000
pos = 190,100
postype = back
bindtime = -1
removetime = 60
supermovetime = 9999
pausemovetime = 9999
scale = 0.75,0.75
sprpriority = -100
ownpal = 1
ontop = 0

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time = 0
time = 60
add = -120,-120,-120

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time = 0
time = 60
add = -80,-80,-80

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = Time >= 2 && time < 39
Time = 1
color = 256
add = 0-((time-1)*2.78),0-((time-1)*2.78),0-((time-1)*2.78)
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = Time = 38
Time = 180
color = 256
add = -150,-150,-150
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = Time >= 2 && time < 39
Time = 1
color = 256
add = 0-((time-1)*2.36),0-((time-1)*2.36),0-((time-1)*2.36)
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = Time = 38
Time = 180
color = 256
add = -90,-90,-90
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 90
value = S0,5

[State 0, Helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal;player
name = "big scroll"
ID = 1840
stateno = 1840
pos = 6,-46
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S0,4

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 200, 2]
type = ChangeState
trigger1 = time = 130
value = 1813
ctrl = 0

;---------------------------------------------------------------------------
; Weapon Control: Tensasai (zwj-rozwinicie)
[StateDef 1813]
type = S
movetype = A
physics = S
juggle = 0
ctrl = 0
sprpriority = 3

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = 1
Time = 2
color = 256
add = -150,-150,-150
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = 1
Time = 2
color = 256
add = -150,-150,-150
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 0, SuperPause]
type = SuperPause
trigger1 = 1
time = 2
anim = -1
sound = -1,0
movetime = 2
darken = 0
unhittable = 0

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "big scroll"
ID = 1840
stateno = 1841
pos = 0,150
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1830
ID = 1830
pos = -100*facing,50
postype = front  ;p2,front,back,left,right
sprpriority = 270
scale = 1,1
supermovetime = 99999
removetime = -1

[State 0, biae to]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1832
ID = 1830
pos = 0,0
postype = front
facing = 1
removetime = -1
sprpriority = 269
supermovetime = 99999
scale = 2,2

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(1840), stateno = 1843
id = 1860

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(1840), stateno = 1843

[State 0, ChangeState]
type = ChangeState
trigger1 = numhelper(1840) = 0
value = 1814

;---------------------------------------------------------------------------
; Weapon Control: Tensasai (final)
[StateDef 1814]
type = S
movetype = A
physics = S
juggle = 0
ctrl = 0
sprpriority = 3

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time < 245
Time = 1
color = 256
add = -150,-150,-150
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = Time >= 244
Time = 1
color = 256
add = -150+((time-244)*2.78),-150+((time-244)*2.78),-150+((time-244)*2.78)
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time < 245
Time = 1
color = 256
add = -90,-90,-90
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = Time >= 244
Time = 1
color = 256
add = -90+((time-244)*2.36),-90+((time-244)*2.36),-90+((time-244)*2.36)
ignorehitpause = 1

[State 0, SuperPause]
type = SuperPause
trigger1 = time < 150
time = 2
anim = -1
sound = -1,0
movetime = 2
darken = 0
unhittable = 0

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "swiatlo"
ID = 1853
stateno = 1853
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
supermovetime = 99999

[State 0, Helper]
type = Helper
trigger1 = time%3 = 0 && time < 150
helpertype = normal ;player
name = "weapon"
ID = 1846
stateno = 1846
pos = 0,-300
postype = p1    ;p2,front,back,left,right
facing = 1
supermovetime = 99999

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time > 50
flag = globalnoshadow
flag2 = nokosnd
flag3 = nokoslow

[State 0, zwj2]
type = Explod
ownpal = 1
trigger1 = 0;time = 150
anim = 1841
ID = 1841
pos = -pos x*facing+150,20
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -1
sprpriority = 1
supermovetime = 99999
scale = 1,1

[State 0, zwj2]
type = Explod
ownpal = 1
trigger1 = 0;time = 150
anim = 1841
ID = 1841
pos = -pos x*facing-150,20
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -1
sprpriority = 1
supermovetime = 99999
scale = 1,1

[State 0, biae to]
type = Explod
ownpal = 1
trigger1 = time = 50
anim = 1831
ID = 1831
pos = 0,0
postype = front
facing = 1
removetime = 180
sprpriority = 100
supermovetime = 99999
scale = 2,2

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time >= 50 && time <= 100
ID = 1831
trans = addalpha
alpha = 0+(time-50)*5.12,256

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time > 180 && time <= 230
ID = 1831
trans = addalpha
alpha = 256-(time-180)*5.12,256

;[State 0, AllPalFX]
;type = AllPalFX
;trigger1 = time > 50 && time <= 100
;time = 100
;add = (time-50)*5.12,(time-50)*5.12,(time-50)*5.12

;[State 0, AllPalFX]
;type = AllPalFX
;trigger1 = time > 180 && time <= 230
;time = 10
;add = 256-(time-180)*5.12,256-(time-180)*5.12,256-(time-180)*5.12

[State 200, 2]
type = ChangeState
trigger1 = time = 280
value = 301

;odskok
[Statedef 1815]
type    = S
physics = S
ctrl = 0
anim = 105
sprpriority = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != anim%10000+var(0)*10000
value = anim%10000+var(0)*10000

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 17
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 160,150,150
palpostbright = 0,0,0
paladd = 5,0,0
palmul = .65,.65,.75
timegap = 1
framegap = 1
trans = add

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = time = 0
value = 105+var(0)*10000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,8

[State 105, 1]
type = VelSet
trigger1 = Time > 0 && time < 10
x = const(velocity.run.back.x)
y = -2

[State 105, 1]
type = VelSet
trigger1 = Time > 10
x = const(velocity.run.back.x)
y = 2

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1816

;---------------------------------------------------------------------------
; Hop backwards (land)
[Statedef 1816]
type    = S
physics = S
ctrl = 0
anim = 47

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = time = 0
value = 47+var(0)*10000

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = MakeDust
trigger1 = Time = 2
pos = 0, 0
spacing = 1

[State 106, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State 106, 5]
type = ChangeState
trigger1 = Time = 7
value = 1812
ctrl = 1

;------------------------------------------------------------------
;Big scroll
[Statedef 1840]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,-8
anim = 1820
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fvar(9)= (frontedgedist+backedgedist)*0.00357143

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.15+(1-fvar(9))*2*0.1
x = -(0.15+(1-fvar(9))*2*0.1)

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 45+time*30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 12,1
value = S4,0

[State 0, VelSet]
type = destroyself
trigger1 = pos y < -200*fvar(9)

;------------------------------------------------------------------
;Big scroll
[Statedef 1841]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 1820
sprpriority = 275

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 10
flag = nobardisplay

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fvar(9)= (frontedgedist+backedgedist)*0.00357143

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
x = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
y = -12+(1-fvar(9))*2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 12,1
value = S4,0

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 45+time*30
scale = fvar(9),fvar(9)

[State 200, 2]
type = ChangeState
trigger1 = vel y > 0
value = 1842
;------------------------------------------------------------------
;Big scroll
[Statedef 1842]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
sprpriority = 275

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time <= 8
value = 45+time*30
scale = fvar(9),fvar(9)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 70
value = S18,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 70
value = S18,1

[State 0, Turn]
type = Turn
trigger1 = facing = -1

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 2
value = Abs(time-5)

[State 0, puff-srodek]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1704
ID = 1704
pos = 0,37*fvar(9)
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -2
sprpriority = 277
supermove = 99999
scale = fvar(9),fvar(9)

[State 0, puff-srodek]
type = Explod
ownpal = 1
trigger1 = time = 3
anim = 1704
ID = 1704
pos = -14*fvar(9),37*fvar(9)
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -2
sprpriority = 277
supermove = 99999
scale = fvar(9),fvar(9)

[State 0, puff-srodek]
type = Explod
ownpal = 1
trigger1 = time = 3
anim = 1704
ID = 1704
pos = 14*fvar(9),37*fvar(9)
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -2
sprpriority = 277
supermove = 99999
scale = fvar(9),fvar(9)

[State 0, puff]
type = Explod
ownpal = 1
trigger1 = time > 1 && time%6 = 0 && time < 67
anim = 1704
ID = 1704
pos = -(14*(time/6)+10)*fvar(9),37*fvar(9)
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -2
sprpriority = 277
supermove = 99999
scale = fvar(9),fvar(9)

[State 0, puff]
type = Explod
ownpal = 1
trigger1 = time > 1 && time%6 = 0 && time < 67
anim = 1704
ID = 1704
pos = (14*(time/6)+10)*fvar(9),37*fvar(9)
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -2
sprpriority = 277
supermove = 99999
scale = fvar(9),fvar(9)

[State 0, zwj1]
type = Explod
ownpal = 1
trigger1 = time = 6
anim = 1822
ID = 1820
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 275
supermove = 99999
scale = fvar(9),fvar(9)

[State 0, poczatek]
type = Explod
ownpal = 1
trigger1 = time = 60
anim = 1826
ID = 1820-(time/6)
pos = -14*(time/6)*fvar(9),0
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 275
supermove = 99999
scale = fvar(9),fvar(9)

[State 0, koniec]
type = Explod
ownpal = 1
trigger1 = time = 60
anim = 1821
ID = 1820+(time/6)
pos = 14*(time/6)*fvar(9),0
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 275
supermove = 99999
scale = fvar(9),fvar(9)

[State 0, zwj2]
type = Explod
ownpal = 1
trigger1 = time > 1 && time%6 = 0 && time < 55
anim = 1822+(time/6)%4
ID = 1820-(time/6)
pos = -14*(time/6)*fvar(9),0
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 275
supermove = 99999
scale = fvar(9),fvar(9)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time < 55 && time%6 = 0
value = S4,13

[State 0, zwj2]
type = Explod
ownpal = 1
trigger1 = time > 1 && time%6 = 0 && time < 55
anim = 1825-(time/6)%4
ID = 1820+(time/6)
pos = 14*(time/6)*fvar(9),0
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 275
supermove = 99999
scale = fvar(9),fvar(9)

[State 0, Trans]
type = Trans
trigger1 = time >= 8
trans = addalpha
alpha = 0,256

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1810
pos = -140*fvar(9),Abs((time-10)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1811
pos = -126*fvar(9),Abs((time-9)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1812
pos = -112*fvar(9),Abs((time-8)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1813
pos = -98*fvar(9),Abs((time-7)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1814
pos = -84*fvar(9),Abs((time-6)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1815
pos = -70*fvar(9),Abs((time-5)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1816
pos = -56*fvar(9),Abs((time-4)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1817
pos = -42*fvar(9),Abs((time-3)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1818
pos = -28*fvar(9),Abs((time-2)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1819
pos = -14*fvar(9),Abs((time-1)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1820
pos = 0,Abs(time%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1830
pos = 140*fvar(9),Abs((time+10)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1829
pos = 126*fvar(9),Abs((time+9)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1828
pos = 112*fvar(9),Abs((time+8)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1827
pos = 98*fvar(9),Abs((time+7)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1826
pos = 84*fvar(9),Abs((time+6)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1825
pos = 70*fvar(9),Abs((time+5)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1824
pos = 56*fvar(9),Abs((time+4)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1823
pos = 42*fvar(9),Abs((time+3)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1822
pos = 28*fvar(9),Abs((time+2)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, powiew]
type = ModifyExplod
trigger1 = 1
ID = 1821
pos = 14*fvar(9),Abs((time+1)%37-18)*0.5*fvar(9)
postype = p1
facing = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 150 && time%5 = 4
value = S4,13

[State 0, zwj1]
type = Explod
ownpal = 1
trigger1 = time = 150
anim = 1833
ID = 1833
pos = 65*fvar(9),170*fvar(9)
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -1
sprpriority = 278
supermove = 99999
scale = 0.5*fvar(9),0.5*fvar(9)

[State 0, zwj1]
type = Explod
ownpal = 1
trigger1 = time = 150
anim = 1833
ID = 1833
pos = -65*fvar(9),170*fvar(9)
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 278
supermove = 99999
scale = 0.5*fvar(9),0.5*fvar(9)

[State 0, Helper]
type = Helper
trigger1 = time > 150 && numhelper(1845) < 20
helpertype = normal ;player
name = "weapon"
ID = 1845
stateno = 1845
pos = random%130*fvar(9),random%5*fvar(9)
postype = p1    ;p2,front,back,left,right
facing = 1
supermovetime = 99999
size.xscale = fvar(9)
size.yscale = fvar(9)

[State 0, Helper]
type = Helper
trigger1 = time > 150 && numhelper(1845) < 20
helpertype = normal ;player
name = "weapon"
ID = 1845
stateno = 1845
pos = -random%130*fvar(9),(random+3)%5*fvar(9)
postype = p1    ;p2,front,back,left,right
facing = -1
supermovetime = 99999
size.xscale = fvar(9)
size.yscale = fvar(9)

;[State 0, AllPalFX]
;type = AllPalFX
;trigger1 = time > 290
;time = 10
;add = (time-290)*25.6,(time-290)*25.6,(time-290)*25.6

[State 0, biae to]
type = Explod
ownpal = 1
trigger1 = time = 290
anim = 1831
ID = 1831
pos = 0,0
postype = front
facing = 1
removetime = 10
sprpriority = 280
supermovetime = 99999
scale = 2,2

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time >= 290
ID = 1831
trans = addalpha
alpha = 0+(time-290)*25.6,256

[State 200, 2]
type = ChangeState
trigger1 = time = 300
value = 1843
ctrl = 0

;------------------------------------------------------------------
;Big scroll
[Statedef 1843]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
sprpriority = 275

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0

[State 0, AllPalFX]
type = AllPalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State 0, biae to]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1831
ID = 1831
pos = 0,0
postype = front
facing = 1
removetime = 10
sprpriority = 280
supermovetime = 99999
scale = 2,2

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time <= 10
ID = 1831
trans = addalpha
alpha = 256-time*25.6,256

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 0,256

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 11



;------------------------------------------------------------------
;Weapon  (1st)
[Statedef 1845]
type = S
movetype= A
physics = N
juggle  = 3
velset = (random%50)/10-2,9
anim = 1710 + random%8
sprpriority = 276

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 700
ID = 7002
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = 20
sprpriority = 277
supermovetime = 99999
scale = 1,1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, AngleSet]
type = AngleSet
trigger1 = anim = [1710,1713]
value = -time*20

[State 0, AngleSet]
type = AngleSet
trigger1 = vel x > 0 && anim = [1714,1717]
value = (atan(Vel Y/Vel X)+(4*Pi/2))*(-180/Pi)

[State 0, AngleSet]
type = AngleSet
trigger1 =  vel x < 0 && anim = [1714,1717]
value = (atan(Vel Y/Vel X)+(4*Pi/2))*(-180/Pi) + 180

[State 0, AngleSet]
type = AngleSet
trigger1 =  vel x = 0 && anim = [1714,1717]
value = -90

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = parent, stateno = 1843
id = 700

[State 0, DestroySelf]
type = DestroySelf
trigger1 = pos y > 50
trigger2 = parent, stateno = 1843

;------------------------------------------------------------------
;Weapon  (2st)
[Statedef 1846]
type = S
movetype= A
physics = N
juggle  = 3
velset = (random%50)/10-2,16
anim = 1710 + random%8
sprpriority = 4

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
x = helper(1850),pos x -90+random%180

[State 0, VarSet]
type = VarSet
triggerall = time = 0
trigger1 = vel x > 0 && anim = [1714,1717]
v = 2
value = (atan(Vel Y/Vel X)+(4*Pi/2))*(-180/Pi)

[State 0, VarSet]
type = VarSet
triggerall = time = 0
trigger1 =  vel x < 0 && anim = [1714,1717]
v = 2
value = (atan(Vel Y/Vel X)+(4*Pi/2))*(-180/Pi) + 180

[State 0, VarSet]
type = VarSet
triggerall = time = 0
trigger1 =  vel x = 0 && anim = [1714,1717]
v = 2
value = -90

[State 0, AngleSet]
type = AngleSet
trigger1 = anim = [1714,1717]
value = var(2)

[State 0, AngleSet]
type = AngleSet
trigger1 = anim = [1710,1713]
value = cond(vel y != 0,-time*20,-135)

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, VelSet]
type = VelSet
trigger1 = pos y > -13
y = 0
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = vel y = 0 && numexplod(1840) = 0
value = S4,17+random%3

[State 0, zwj2]
type = Explod
ownpal = 1
trigger1 = vel y = 0 && numexplod(1840) = 0
trigger1 = anim = 1710
anim = 1840
ID = 1840
pos = 3,10
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 6
supermovetime = 99999
scale = 0.6,0.6

[State 0, zwj2]
type = Explod
ownpal = 1
trigger1 = vel y = 0 && numexplod(1840) = 0
trigger1 = anim = 1711
anim = 1840
ID = 1840
pos = 3,19
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 6
supermovetime = 99999
scale = 0.8,0.8

[State 0, zwj2]
type = Explod
ownpal = 1
trigger1 = vel y = 0 && numexplod(1840) = 0
trigger1 = anim = 1712
anim = 1840
ID = 1840
pos = 3,15
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 6
supermovetime = 99999
scale = 0.7,0.7

[State 0, zwj2]
type = Explod
ownpal = 1
trigger1 = vel y = 0 && numexplod(1840) = 0
trigger1 = anim = 1713
anim = 1840
ID = 1840
pos = 3,15
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 6
supermovetime = 99999
scale = 0.6,0.6

[State 0, zwj2]
type = Explod
ownpal = 1
trigger1 = vel y = 0 && numexplod(1840) = 0
trigger1 = anim = 1714
anim = 1840
ID = 1840
pos = 3,13
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 6
supermovetime = 99999
scale = 0.6,0.6

[State 0, zwj2]
type = Explod
ownpal = 1
trigger1 = vel y = 0 && numexplod(1840) = 0
trigger1 = anim = 1715
anim = 1840
ID = 1840
pos = 3,13
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 6
supermovetime = 99999
scale = 0.6,0.6

[State 0, zwj2]
type = Explod
ownpal = 1
trigger1 = vel y = 0 && numexplod(1840) = 0
trigger1 = anim = 1716
anim = 1840
ID = 1840
pos = 3,23
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 6
supermovetime = 99999
scale = 0.8,0.8

[State 0, zwj2]
type = Explod
ownpal = 1
trigger1 = vel y = 0 && numexplod(1840) = 0
trigger1 = anim = 1717
anim = 1840
ID = 1840
pos = 3,22
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = -1
sprpriority = 6
supermovetime = 99999
scale = 0.7,0.7

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 301
value = 1847

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
;trigger2 = pos y > 0

;------------------------------------------------------------------
;Weapon (zniknicie)
[Statedef 1847]
type = S
movetype= I
physics = N
juggle  = 3
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, AngleSet]
type = AngleSet
trigger1 = anim = [1714,1717]
value = var(2)

[State 0, AngleSet]
type = AngleSet
trigger1 = anim = [1710,1713]
value = -135

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*6.4,time*6.4

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
trigger1 = anim = 1710
ID = 1840
pos = 3,10
postype = p1  ;p2,front,back,left,right
trans = addalpha
alpha = 256-time*6.4,time*6.4

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
trigger1 = anim = 1711
ID = 1840
pos = 3,19
postype = p1  ;p2,front,back,left,right
trans = addalpha
alpha = 256-time*6.4,time*6.4

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
trigger1 = anim = 1712
ID = 1840
pos = 3,15
postype = p1  ;p2,front,back,left,right
trans = addalpha
alpha = 256-time*6.4,time*6.4

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
trigger1 = anim = 1713
ID = 1840
pos = 3,15
postype = p1  ;p2,front,back,left,right
trans = addalpha
alpha = 256-time*6.4,time*6.4

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
trigger1 = anim = 1714
ID = 1840
pos = 3,13
postype = p1  ;p2,front,back,left,right
trans = addalpha
alpha = 256-time*6.4,time*6.4

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
trigger1 = anim = 1715
ID = 1840
pos = 3,13
postype = p1  ;p2,front,back,left,right
trans = addalpha
alpha = 256-time*6.4,time*6.4

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
trigger1 = anim = 1716
ID = 1840
pos = 3,23
postype = p1  ;p2,front,back,left,right
trans = addalpha
alpha = 256-time*6.4,time*6.4

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
trigger1 = anim = 1717
ID = 1840
pos = 3,22
postype = p1  ;p2,front,back,left,right
trans = addalpha
alpha = 256-time*6.4,time*6.4

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 40
id = 1840

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 40
;------------------------------------------------------------------
;Chain
[Statedef 1850]
type = S
movetype= A
physics = N
juggle  = 3
velset = 11,0
anim = 1810
sprpriority = 5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0 && ishelper(1851) = 1
x = 10*facing

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = parent, stateno = [1810,1820]
trigger1 = !moveguarded
attr = C,HP
damage = 0
getpower = 0,0
givepower = 0,0
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 0, 0
sparkno = -1
sparkxy = -15, -30
hitsound = 5, 2
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = -7
airguard.velocity = -1.9,-.9
air.type = High
air.velocity = -7,-1.5
air.hittime = 15
fall = 1
fall.recover = 0
getpower = 0
p2stateno = 106037

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = parent, stateno != [1810,1820]
trigger1 = !moveguarded
attr = C,HP
damage = 0
getpower = 0,0
givepower = 0,0
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
sparkxy = -15, -30
hitsound = 5, 2
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = -7
airguard.velocity = -1.9,-.9
air.type = High
air.velocity = -7,-1.5
air.hittime = 15
fall = 1
fall.recover = 0
getpower = 0
p2stateno = 106035

[State 200, 2]
type = ChangeState
trigger1 = movehit
value = 1851
ctrl = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

;------------------------------------------------------------------
;Chain [looped]
[Statedef 1851]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
anim = 1811
sprpriority = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,20

[State 0, PosSet]
type = PosSet
trigger1 =  1
x = (enemynear, pos x)+5*facing

[State 0, DestroySelf]
type = DestroySelf
trigger1 = enemy, stateno != 106037 && enemy, stateno != 106035
trigger2 = root,stateno != [1800,1820]

[State 200, 2]
type = ChangeState
trigger1 = parent, stateno = 1814 && time >= 10
value = 1852
ctrl = 0

;------------------------------------------------------------------
;Chain [kill]
[Statedef 1852]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
anim = 1850
sprpriority = 5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = time < 145
attr = C,HP
damage = 0
animtype = Heavy
guardflag = MA
getpower = 0,0
givepower = 0,0
hitflag = MAF
priority = 5, Hit
pausetime = 0, 30
sparkno = -1
sparkxy = -15, -30
hitsound = 5, -2
guardsound = 6, -1
ground.type = High
ground.slidetime = 1
ground.hittime  = 1
ground.velocity = 0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 1
fall = 1
fall.recover = 0
getpower = 0
p2stateno = 106039

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = time = 145
attr = S, NA
damage = 0
getpower = 0,0
givepower = 0,0
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 0, 30
sparkno = -1
sparkxy = -15, -30
hitsound = 5, -2
guardsound = 6, -1
ground.type = High
ground.slidetime = 1
ground.hittime  = 1
ground.velocity = 0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 1
fall = 1
fall.recover = 0
getpower = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 146

;-------------------------------------------------------------------------
;efekt swiatla broni
[Statedef 1853]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 0
anim = 1850
sprpriority = 5

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
x = helper(1850),pos x
y = 20

[State 0, zwj1]
type = Explod
ownpal = 1
trigger1 = time = 5
trigger2 = time = 23
trigger3 = time = 41
trigger4 = time = 59
trigger5 = time = 76
anim = F580
ID = 1834
pos = 0,-14
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = 90
sprpriority = 7
supermovetime = 99999
scale = 2,0.7

[State 0, zwj1]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1833
ID = 1834
pos = 60,0
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = 120
sprpriority = 5
supermovetime= 99999
scale = 0.5,1.3

[State 0, zwj1]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1833
ID = 1834
pos = -60,0
postype = p1  ;p2,front,back,left,right
facing = -1
removetime = 120
sprpriority = 5
supermovetime = 99999
scale = 0.5,1.3

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 10
time = 100
freq = 80
ampl = -8
phase = 90

[State 200, 2]
type = Destroyself
trigger1 = numexplod(1834) = 0

;---------------------------------------------------------------------------
;Life
[StateDef 937]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 934
poweradd = 0
sprpriority = 2

[State 0, Parent State]
type = VarSet
trigger1 = time = 0
v = 10
value = parent, stateno

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 0,256

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 937
time = 1

[State 0, VarSet]
type = Varset
trigger1 = 1
v = 8
value = gethitvar(damage)

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = parent, stateno != var(10)

;---------------------------------------------------------------------------
;Ultimate 2: Bashosen Wind
[StateDef 1900]
type = S
movetype = A
physics = S
juggle = 0
anim = 1900
ctrl = 0
sprpriority = 2
poweradd = -1000

[State 0, LifeAdd]
type = LifeAdd
trigger1 = 1
value = -helper(937),var(8)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = player
name = "life"
ID = 937
stateno = 937
pos = 0,0
postype = p1
facing = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 7
value = S4,13

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 8
anim = 703
ID = 703
pos = -25,-55
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 20
supermovetime = 9999
scale = 0.55,0.55
sprpriority = 4
ownpal = 1

[State 200, 2]
type = ChangeState
trigger1 = time = 10
value = 1901
ctrl = 0

[StateDef 1901]
type = S
movetype = A
physics = S
juggle = 0
anim = 1901
ctrl = 0
sprpriority = 2
poweradd = -3000

[State 0, LifeAdd]
type = LifeAdd
trigger1 = 1
value = -helper(937),var(8)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = player
name = "life"
ID = 937
stateno = 937
pos = 0,0
postype = p1
facing = 1

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 60
movetime = 0
anim = -1
darken = 0
unhittable = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F34,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F34,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F34,2

[State 0, Swiatlo do superpausy]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 4001
ID = 4000
pos = 190,100
postype = back
bindtime = -1
removetime = 60
supermovetime = 9999
pausemovetime = 9999
scale = 0.75,0.75
sprpriority = -100
ownpal = 1
ontop = 0

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time = 0
time = 62
add = -120,-120,-120

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time = 0
time = 62
add = -80,-80,-80

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelemtime(2) = 0
anim = 1902
ID = 1902
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 9
supermovetime = 9999
scale = 1,1
sprpriority = 3
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = 1903
ID = 1903
pos = -35,22
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 23
vel = -0.5,0
supermovetime = 9999
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 6
value = S0,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 6
value = S0,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 6
value = S0,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F8,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F8,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 17
value = S4,13

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 18
anim = 703
ID = 703
pos = 0,-45
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = 20
supermovetime = 9999
scale = 0.55,0.55
sprpriority = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 5
trigger2 = time = 15
trigger3 = time = 25
helpertype = normal;
name = "wind"
ID = 1905
stateno = 1905
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemove
size.xscale = 1
size.yscale = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = Time = 1
Time = 20
color = 0
add = -90,-90,-90
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = Time >= 20 && time < 50
Time = 1
color = 0+((time-20)*8.53)
add = -90+((time-20)*3),-90+((time-20)*3),-90+((time-20)*3)
ignorehitpause = 1

[State 200, 2]
type = ChangeState
trigger1 = time = 50
value = 0
ctrl = 1

;----------------------------------------------------------------------
;wind
[StateDef 1905]
type = S
movetype = A
physics = S
anim = 1905
ctrl = 0
sprpriority = 5

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(54) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109943

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F683
ID = 1906
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 48
supermovetime = 9999
scale = 1.2,1.2
sprpriority = 4
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = F14,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = F14,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 7
value = F14,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 7
value = F14,4

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 40
freq = 80
ampl = -8
phase = 90

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 5
trigger2 = AnimElem = 4
attr = S, NT    
damage = 55,55   
getpower = 0,0
givepower = 0,0             ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,2                ;Time attacker pauses, time opponent shakes
sparkno = 4                 ;Spark anim no (Def: set above)
sparkxy = -15,-34                 ;Spark x y
hitsound = 14,3                 ;Sound to play on hit
guardsound = 6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -10,-5            ;Velocity at which opponent is pushed
airguard.velocity = -10,-2    ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -10,-5          ;X-velocity at which opponent is pushed,
air.hittime = 0 
fall = 1                

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
attr = S, NT     
damage = 55,55                ;Damage that move inflicts, guard damage
animtype = Light
getpower = 0,0
givepower = 0,0                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                 ;Time attacker pauses, time opponent shakes
sparkno = 4                 ;Spark anim no (Def: set above)
sparkxy = -15,-34                 ;Spark x y
hitsound = 14,3                ;Sound to play on hit
guardsound = 6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -3,-2           ;Velocity at which opponent is pushed
airguard.velocity = -2,-2    ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -3,-2         ;X-velocity at which opponent is pushed,
air.hittime = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 12
y = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1906
ID = 1906
pos = 70,-65
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 33
supermovetime = 9999
scale = 0.7,0.85
sprpriority = 4
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1906
ID = 1906
pos = -10,-65
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 33
supermovetime = 9999
scale = 0.7,0.85
sprpriority = 4
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1907
ID = 1907
pos = 0,10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 39
supermovetime = 9999
scale = 0.5,0.5
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
trigger2 = time = 10
trigger3 = time = 20
anim = 1908
ID = 1908
pos = 70,10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 15
supermovetime = 9999
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 811, end]
type = Destroyself
trigger1 = time = 30

;---------------------------------------------------------------------------
; Staff Mode
[Statedef 2000]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 2000                   ;Change animation (Def: no change)

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 20
value = -200

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time <= 20
time = 20
add = -time*2.5,-time*2.5,-time*2.5
mul = 256,256,256

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time >= 25
time = 1
add = -50+(time-25)*2.5,-50+(time-25)*2.5,-50+(time-25)*2.5
mul = 256,256,256

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S1,4

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 45
movetime = 45
anim = -1
sound = S4,23
darken = 0
unhittable = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 28
value = S4,13

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 30
value = S4,13

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 28
anim = 700
ID = 700
pos = -3,-26
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
supermovetime = 99999
scale =0.9,0.9
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 29
anim = 700
ID = 700
pos = -13,-20
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
supermovetime = 99999
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 29
anim = 700
ID = 700
pos = 12,-35
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
supermovetime = 99999
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 30
anim = 700
ID = 700
pos = 30,-45
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
supermovetime = 99999
scale =0.7,0.7
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 30
anim = 700
ID = 700
pos = -25,-15
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
supermovetime = 99999
scale =0.7,0.7
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0    ;fv = 10
value = 1


[State 200, 2]
type = ChangeState
trigger1 = Time = 45
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Staff Mode Air
[Statedef 2010]
type    = A                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 2010                   ;Change animation (Def: no change)

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 20
value = -200

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time <= 20
time = 20
add = -time*2.5,-time*2.5,-time*2.5
mul = 256,256,256

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time >= 25
time = 1
add = -50+(time-25)*2.5,-50+(time-25)*2.5,-50+(time-25)*2.5
mul = 256,256,256

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S1,4

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 45
movetime = 45
anim = -1
sound = S4,23
darken = 0
unhittable = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 28
value = S4,13

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 30
value = S4,13

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 28
anim = 700
ID = 700
pos = 3,-30
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
supermovetime = 99999
scale =0.9,0.9
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 29
anim = 700
ID = 700
pos = 13,-24
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
supermovetime = 99999
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 29
anim = 700
ID = 700
pos = -12,-39
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
supermovetime = 99999
scale =0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 30
anim = 700
ID = 700
pos = -30,-49
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
supermovetime = 99999
scale =0.7,0.7
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 30
anim = 700
ID = 700
pos = 25,-19
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
supermovetime = 99999
scale =0.7,0.7
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0    ;fv = 10
value = 1

[State 200, 2]
type = ChangeState
trigger1 = Time = 45
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Wall Teleport
[Statedef 6400]
type = A
physics = A
statetype = I
anim = 6400+var(0)*10000
ctrl = 0
poweradd = -50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,11

[State 1012, Trans]
type = Trans
trigger1 = time < 6
trans = addalpha
alpha = 256,256

[state 103, EdgeOfScreen]
type = screenbound
trigger1 = time < 6
value = 0
movecamera = 0,1

[state 102, Angle]
type = angleset
trigger1 = time < 6
value = -90

[State 310, 2]
type = Explod
ownpal = 1
trigger1 = time = 15
anim = 410
ID = 410
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3

[state 102, Angle2]
type = angledraw
trigger1 = time < 6

[State 310, 1]
type = PosAdd
trigger1 = time = 15
x = p2dist X + 70

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy, pos x > pos x
trigger2 = facing = 1 && enemy, pos x < pos x

[State 320, 5]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 320, 6]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 320, 7]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Wall Kunai throw
[StateDef 6500]
movetype = A
type    = A
physics = N
juggle = 0
anim = 6510
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,8

[state 102, Angle]
type = angleset
trigger1 = 1
value = 90

[state 103, StayOnWall]
type = posadd
trigger1 = 1
x = frontedgedist + 14

[state 102, Angle2]
type = angledraw
trigger1 = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20    ;fv =
value = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70701
pos = -20,0
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermove
pausemove

[state 103, EdgeOfScreen]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 6001
ctrl = 1

[State 200, end]
type = ChangeState
trigger1 = time >= 10 && command = "b"
triggerall = var(20) < 29
trigger2 = time >= 10 && AILevel != 0 && random%24 = 15
value = 6510
ctrl = 0

;---------------------------------------------------------------------------
;Wall Kunai throw
[StateDef 6510]
movetype = A
type    = A
physics = N
juggle = 0
anim = 6500
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,8

[state 102, Angle]
type = angleset
trigger1 = 1
value = 90

[state 103, StayOnWall]
type = posadd
trigger1 = 1
x = frontedgedist + 14

[state 102, Angle2]
type = angledraw
trigger1 = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20    ;fv =
value = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 1 && var(20) = 31
v = 20    ;fv =
value = -1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70701
pos = -31,0
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "kunai"
ID = 600
stateno = 70701
pos = -20,0
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermove
pausemove

[state 103, EdgeOfScreen]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 6001
ctrl = 1

[State 200, end]
type = ChangeState
trigger1 = time >= 10 && command = "b"
trigger2 = time >= 10 && AILevel != 0 && random%28 = 15
triggerall = var(20) < 28
value = 6520
ctrl = 0

;---------------------------------------------------------------------------
;Kunai throw
[StateDef 6520]
movetype = A
type    = A
physics = N
juggle = 0
anim = 6500
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,8

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20    ;fv =
value = 3

[State 0, VarAdd]
type = VarSet
trigger1 = time = 1 && var(20) > 30
v = 20    ;fv =
value = 30

[state 103, EdgeOfScreen]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,1

[state 102, Angle]
type = angleset
trigger1 = 1
value = 90

[state 103, StayOnWall]
type = posadd
trigger1 = 1
x = frontedgedist + 14

[state 102, Angle2]
type = angledraw
trigger1 = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = 70701
ID = 600
stateno = 70701
pos = -31,0
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = 70701
ID = 600
stateno = 70701
pos = -20,0
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = 70701
ID = 600
stateno = 70701
pos = -16,-9
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 6001
ctrl = 1

;---------------------------------------------------------------------------
;Wall Shuriken throw
[StateDef 6530]
movetype = A
type    = A
physics = N
juggle = 0
anim = 6510
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,8

[state 102, Angle]
type = angleset
trigger1 = 1
value = 90

[state 103, StayOnWall]
type = posadd
trigger1 = 1
x = frontedgedist + 14

[state 102, Angle2]
type = angledraw
trigger1 = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 23   ;fv =
value = 1

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(EnemyNear(0),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(EnemyNear(0),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "shuriken"
ID = 610
stateno = 70710
pos = -20,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[state 103, EdgeOfScreen]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 6001
ctrl = 1

[State 200, end]
type = ChangeState
trigger1 = time >= 10 && command = "c"
trigger2 = time >= 10 && AILevel != 0 && random%24 = 15
triggerall = var(23) < 29
value = 6540
ctrl = 0

;---------------------------------------------------------------------------
;Wall Shuriken throw
[StateDef 6540]
movetype = A
type    = A
physics = N
juggle = 0
anim = 6500
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,8

[state 102, Angle]
type = angleset
trigger1 = 1
value = 90

[state 103, StayOnWall]
type = posadd
trigger1 = 1
x = frontedgedist + 14

[state 102, Angle2]
type = angledraw
trigger1 = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 23    ;fv =
value = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 1 && var(23) = 31
v = 23    ;fv =
value = -1

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(EnemyNear(0),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(EnemyNear(0),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "shuriken"
ID = 610
stateno = 70710
pos = -31,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "shuriken"
ID = 610
stateno = 70710
pos = -20,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[state 103, EdgeOfScreen]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 6001
ctrl = 1

[State 200, end]
type = ChangeState
trigger1 = time >= 10 && command = "c"
trigger2 = time >= 10 && AILevel != 0 && random%28 = 15
triggerall = var(23) < 30
value = 6550
ctrl = 0

;---------------------------------------------------------------------------
;Wall Shuriken throw
[StateDef 6550]
movetype = A
type    = A
physics = N
juggle = 0
anim = 6500
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,8

[state 102, Angle]
type = angleset
trigger1 = 1
value = 90

[state 103, StayOnWall]
type = posadd
trigger1 = 1
x = frontedgedist + 14

[state 102, Angle2]
type = angledraw
trigger1 = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 23    ;fv =
value = 1

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(EnemyNear(0),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(EnemyNear(0),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal;player
name = "shuriken"
ID = 615
stateno = 615
pos = -20,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[state 103, EdgeOfScreen]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 6001
ctrl = 1

;---------------------------------------------------------------------------
; Chain-ball
[StateDef 6600]
movetype = A
type    = A
physics = N
juggle = 0
anim = 6600
ctrl = 0
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = 701
ID = 700
pos = -36,15
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale = 1.1,1.1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 9
anim = 700
ID = 700
pos = -32,-10
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 8
anim = 701
ID = 700
pos = -36,-3
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =1.2,1.2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 7
anim = 700
ID = 700
pos = -31,-14
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.9,0.9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 2
value = S4,13

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,22

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = player
name = "screen-blocker"
ID = 6610
stateno = 6610
pos = -1000,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = player
name = "screen-blocker"
ID = 6611
stateno = 6610
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[state 102, Angle]
type = angleset
trigger1 = 1
value = 90

[state 103, StayOnWall]
type = posadd
trigger1 = 1
x = frontedgedist + 14

[state 102, Angle2]
type = angledraw
trigger1 = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = 0;time = 10
anim = 701
ID = 700
pos = -25,-36
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale = 1.1,1.1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = 0;time = 9
anim = 700
ID = 700
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = 0;time = 8
anim = 701
ID = 700
pos = -7,-36
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =1.2,1.2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = 0;time = 7
anim = 700
ID = 700
pos = 4,-31
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.9,0.9

[State 0, VarAdd]
type = VarSet
trigger1 = animelem = 4
fv = 30   ;fv =
value = EnemyNear(0),Pos x

[State 0, VarAdd]
type = VarSet
trigger1 = animelem = 4
fv = 31   ;fv =
value = EnemyNear(0),Pos Y

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(EnemyNear(0),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(EnemyNear(0),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, Helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal;player
name = "chain-ball"
ID = 1401
stateno = 6601
pos = -32,13
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 4
value = -500

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 6600 && numhelper(1401) = 0 && time > 50
value = 6601

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0 && anim = 6601
value = 6001
ctrl = 1

;------------------------------------------------------------------
;Chain-ball
[Statedef 6601]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
ctrl = 0
anim = 1302
sprpriority = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = vel x < 0
v = 13
value = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = vel x < 0
anim = 1405
ID = 1406 + var(13)
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
removetime = -1
scale = 1,1
sprpriority = 1

[State 0, VarAdd]
type = VarSet
trigger1 = vel x > 0 && var(14) = 0
v = 14
value = time

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = vel x > 0
id = (1405 + var(13)) - (time-var(14))

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = vel x > 0
id = (1405 + var(13)) - (time-var(14)) +1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = vel x > 0
id = (1405 + var(13)) - (time-var(14)) -1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "shadow-ball"
ID = 1405
stateno = 1405
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 13
value = (Parent,Fvar(13))/(Parent,fvar(15))*9

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 14
value = (Parent,FVar(14))/(Parent,fvar(15))*9

[State 0, VelSet]
type=VelSet
trigger1= time = 1
x= Fvar(13)
y= Fvar(14)

[State 0, VelSet]
type=VelSet
trigger1 = p2stateno = 106036 || moveguarded
trigger2 = parent, pos x < EnemyNear(0),pos x
trigger2 = pos x > parent, fvar(30)
trigger2 = time > 8
trigger3 = parent, pos x > EnemyNear(0),pos x
trigger3 = pos x < parent, fvar(30)
trigger3 = time > 8
trigger4 = time > 70
triggerall = vel x < 0
x= -Fvar(13)
y= -Fvar(14)

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movecontact && vel x > 0
attr = C,HP
damage = 140
animtype = Heavy
getpower = 0,0
givepower = 0,0
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 2
sparkxy = -15, 0
hitsound = 5, 4
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = -7
airguard.velocity = -1.9,-.9
air.type = High
air.velocity = -7,-1.5
air.hittime = 15
fall = 1
fall.recover = 0
getpower = 0
p2stateno = 106036

[State 0, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = !movecontact && vel x < 0
attr = C,HP
damage = 70
animtype = Heavy
getpower = 0,0
givepower = 0,0
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 2
sparkxy = -15, 0
hitsound = 5, 4
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = 7
airguard.velocity = 1.9,-.9
air.type = High
air.velocity = 7,-1.5
air.hittime = 15
fall = 1
fall.recover = 0
getpower = 0
p2stateno = 106036

[State 0, DestroySelf]
type = changestate
trigger1 = vel x > 0
trigger1 = rootdist x = [-50,50]
trigger1 = rootdist y = [-50,50]
value = 1402

[State 0, DestroySelf]
type = changestate
trigger1 = parent,stateno != 1400
trigger1 = parent,stateno != 6600
value = 1404

[State 1012, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 0,256

;---------------------------------------------------------------------------
; Chain-ball (screen-blocker)
[StateDef 6610]
movetype = H
physics = N
juggle = 0
anim = 50
ctrl = 0
sprpriority = 3

[State 1210, end]
type = destroyself
trigger1 = parent, stateno != 6600

;---------------------------------------------------------------------------
;Pancerfaust
[Statedef 9000]
type = S
physics = S
anim = 400
ctrl = 0
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,11

[State 310, 1]
type = PosAdd
trigger1 = time = 15
x = -(backedgedist)

[State 310, 2]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 9100
ID = 9100
pos = -3,9
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
supermovetime = 9999
ownpal = 1

[State 310, 2]
type = Explod
ownpal = 1
trigger1 = time = 15
anim = 9100
ID = 9100
pos = -3,9
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
supermovetime = 9999
ownpal = 1

[State 310, 2]
type = Explod
ownpal = 1
trigger1 = time = 30
anim = 9040
ID = 9040
pos = -7,-20
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 0.8,0.8
supermovetime = 9999
ownpal = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = [30,135]
time = 400
add = -time*1,-time*1,-time*1
mul = 256,256,256
sinadd = 0,0,0,10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 150
value = S4,12

[State 310, 2]
type = Explod
ownpal = 1
trigger1 = time = 154
anim = 9100
ID = 9100
pos = -3,9
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
supermovetime = 9999
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 225
value = S4,14

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 225
anim = 700
ID = 700
pos = -5,-47
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 3
scale =0.9,0.9
supermovetime = 9999
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 305
value = S4,12

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 310
anim = 700
ID = 700
pos = -15,-27
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
supermovetime = 9999
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 309
anim = 700
ID = 700
pos = -7,-27
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
supermovetime = 9999
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 309
anim = 700
ID = 700
pos = 9,-27
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
supermovetime = 9999
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 310
anim = 700
ID = 700
pos = 18,-27
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =0.8,0.8
supermovetime = 9999
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 12
anim = 9050
ID = 9050
pos = 28,-26
vel = -0.3,0
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
sprpriority = 4
scale =1.3,1.3
supermovetime = 9999
ownpal = 1

[State 0, SuperPause]
type = SuperPause
trigger1 = time < 335
time = 2
anim = -1
sound = -1
movetime = 2
darken = 0
unhittable = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 12
helpertype = normal;player
name = "rocket"
ID = 9001
stateno = 9001
pos = 27,-27
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove = 99999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, DestroySelf]
type = changeanim
trigger1 = animtime = 0 && anim = 400
value = 9000

[State 0, DestroySelf]
type = changestate
trigger1 = numhelper(9001) = 0 && time > 337 && p2life = 1
value = 9004
ctrl = 1

[State 0, DestroySelf]
type = changestate
trigger1 = numhelper(9001) = 0 && time > 337 && p2life != 1
value = 9005
ctrl = 0
;---------------------------------------------------------------------------
;Pancerfaust
[Statedef 9001]
anim = 9001
velset = 16,-0.3
sprpriority = 1
type = S
movetype= A
physics = N
juggle  = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokoslow

[State 0, MakeDust]
type = MakeDust
trigger1 = 1
pos = 0,0
spacing = 3

[State 260, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = 1
attr = C,HP			;Attribute: Standing, Normal Attack
damage = 1,1			;Damage that move inflicts, guard damage
animtype = hard
getpower = 0,0
givepower = 0,0			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
pausetime = 1, 5			;Time attacker pauses, time opponent shakes
sparkno = 2			;Spark anim no (Def: set above)
sparkxy = 0, -5		;X-offset for the "hit spark" rel. to p2,
hitsound = 1, 0			;Sound to play on hit
guardsound = 6, 0			;Sound to play on guard
ground.type = High
p2stateno = 106038		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 0		;Time that the opponent slides back
ground.hittime  = 1		;Time opponent is in hit state
ground.velocity =0,0	;Velocity at which opponent is pushed
airguard.velocity = 0,-0	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity =0,0		;X-velocity at which opponent is pushed,
air.hittime = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
ignorehitpause = 1

[State 0, DestroySelf]
type = changestate
trigger1 = movehit
value = 9002

;---------------------------------------------------------------------------
;Pancerfaust
[Statedef 9002]
physics = N
anim = 9002
velset = 0,0
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.7,0.7

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokoslow

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 22

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;Pancerfaust
[Statedef 9004]
anim = 9003
velset = 0,0
sprpriority = 1
type = S
ctrl = 0
movetype= I
physics = S

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S100,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 310, 2]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 9070
ID = 9070
pos = -190*facing,120
postype = front
facing = 1
bindtime = 1
removetime = -2
under = 1
scale = 1.25,1.01
supermovetime = 9999
ownpal = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time <= 305
ID = 9070
trans = addalpha
alpha = time*0.83,256-time*0.83

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time > 305
ID = 9070
trans = addalpha
alpha = 256,0


[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = [0,305]
time = 400
add = time*1-105,time*1-105,time*1-105
mul = 256,256,256
sinadd = 0,0,0,10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nowalk

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = win
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0
;---------------------------------------------------------------------------
;Pancerfaust
[Statedef 9005]
anim = 9005
velset = 0,0
sprpriority = 1
type = S
ctrl = 1
movetype= I
physics = S

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = [0,105]
time = 400
add = time*8.75-105,time*8.75-105,time*8.75-105
mul = 256,256,256
sinadd = 0,0,0,10

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 310, 2]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 9100
ID = 9100
pos = -3,9
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
supermovetime = 9999
ownpal = 1

[State 0, DestroySelf]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Opponent state (chwytak)
[StateDef 106035]
type = S
movetype= H
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 5000
poweradd = 0
sprpriority = 1

[State 0, Gravity]
type = Gravity
trigger1 = pos y < 0

[State 0, PosSet]
type = PosSet
trigger1 =  pos y >= 0
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5000 + var(0)*10000

[State 1210, end]
type = SelfState
trigger1 = time = 120
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Opponent state (chain-ball)
[StateDef 106036]
type = S
movetype= H
physics = S
juggle  = 1
ctrl = 0
sprpriority = 1

[State 1210, end]
type = SelfState
trigger1 = time = 1
value = 5000
ctrl = 0

;---------------------------------------------------------------------------
;Opponent state (tensakai)
[StateDef 106037]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 5000
poweradd = 0
sprpriority = 2

[State 0, Gravity]
type = Gravity
trigger1 = pos y < 0

[State 0, PosSet]
type = PosSet
trigger1 =  pos y >= 0
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5000 + var(0)*10000

[State 0, SelfState]
type = SelfState
trigger1 = enemy,name = "Tenten" && enemy,numhelper(1850) = 0
value = 5000
ctrl = 1
;---------------------------------------------------------------------------
;Opponent state (pancerfaust)
[StateDef 106038]
type    = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
velset = 0, -70
sprpriority = 3
anim = 5002

[State 0, Trans]
type = Trans
trigger1 = vel y > 0
trans = addalpha
alpha = 0,256

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokoslow

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, LifeSet]
type = LifeSet
trigger1 = pos y > -70 && vel y > 0
value = 0

[State 0, LifeSet]
type = LifeSet
trigger1 = time = 0
value = 1

[State 0, DestroySelf]
type = selfstate
trigger1 = pos y > -50 && vel y > 0
value = 5150

;----------------------------------------------------------------------
;Opponent state (tensakai)
[StateDef 106039]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 5000
poweradd = 0
sprpriority = 2


[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 15,0
anim = F10+random%2
angle = -25+random%50
pos = -15+random%30,-10-random%50
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 0.7,0.7
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, LifeAdd]
type = LifeAdd
trigger1 = 1
value = -14
kill = 1
absolute = 1

[State 0, Gravity]
type = Gravity
trigger1 = pos y < 0

[State 0, PosSet]
type = PosSet
trigger1 =  pos y >= 0
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5000 + var(0)*10000

;---------------------------------------------------------------------------
; Staff Mode crouch(p2state)
[Statedef 106040]
type    = C                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I                      ;Move-type: A-attack, I-idle, H-gethit
physics = C                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 10011

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 0
value = 1

[State 0, DestroySelf]
type = selfstate
trigger1 = time = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Opponent state (staff mode)
[StateDef 106041]
type = S
movetype= H
physics = S
juggle  = 1
velset = -5,0
ctrl = 0
anim = 5000 + var(0)*10000
poweradd = 0
sprpriority = 1

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5000
value = 5000 + var(0)*10000

[State 0, Gravity]
type = Gravity
trigger1 = pos y < 0

[State 0, PosSet]
type = PosSet
trigger1 =  pos y >= 0
y = 0

[State 1210, end]
type = SelfState
trigger1 = time = 120
value = 0
ctrl = 1

;----------------------------------------------------------------------------
;narzucony 5600
[Statedef 106042]
type = A
movetype= H
physics = N
velset = 0,0
anim = 5030+var(0)*10000

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5030
value = 5030 + var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 0, ScreenBound]
type = ScreenBound
trigger1 =1
value = 0
movecamera = 0,0

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 106043


;---------------------------------------------------------------------------
[Statedef 106043]
type = A
movetype= H
physics = N
anim = 5000+var(0)*10000

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5000
value = 5000 + var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 0, ScreenBound]
type = ScreenBound
trigger1 =1
value = 0
movecamera = 0,0

[State 1026, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 106044

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;---------------------------------------------------------------------------
[Statedef 106044]
type = A
movetype= H
physics = N
anim = 5030+var(0)*10000

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5030
value = 5030 + var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 0, ScreenBound]
type = ScreenBound
trigger1 =1
value = 0
movecamera = 0,0

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3


[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0
volume = 2000

[State 1027, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 106045

;---------------------------------------------------------------------------
[Statedef 106045]
type = A
movetype= H
physics = N
anim = 5060+var(0)*10000

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5060
value = 5060 + var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 0, ScreenBound]
type = ScreenBound
trigger1 =1
value = 0
movecamera = 0,0

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;----------------------------------------------------------------
; Opponent State (linki)
[Statedef 106046]
type    = S
movetype= H
physics = S
anim = 5000+var(0)*10000
sprpriority = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = var(0) != 0
value = 5000 + var(0)*10000

;---------------------------------------------------------------------------
; Staff Mode stand(p2state)
[Statedef 106047]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = animexist(anim+10000)
value = anim+10000

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 0
value = 1

[State 0, DestroySelf]
type = selfstate
trigger1 = time = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kagemane: Nadanie Vara
[Statedef 104099]
type = S
physics = S
sprpriority = 0

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 46  
value = 1

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 5000+var(0)*10000
value = 5000+var(0)*10000

;ANTI CLONE - CLONE DESTROY -----
[State 0, VarSet]
type = VarSet
trigger1 = !ishelper
v = 39
value = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(39) = 0
;triggerall = !ishelper(20000)

[State 0, ChangeState]
type = ChangeState
triggerall = time = 5
trigger1 = !ishelper
;trigger2 = ishelper(20000)
value = 104000
;---------------
[Statedef 109990]
type = A
movetype= H
physics = N
velset = 0,0
anim = 5030

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0


[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5030
value = 5030+var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 109991


;---------------------------------------------------------------------------
[Statedef 109991]
type = A
movetype= H
physics = N
anim = 5000

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0


[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
trigger2 = timemod = 6,0
anim = F1391
ID = 380
pos = -20,-25
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
ontop = 0
angle = atan(vel y/vel x)*180/PI -30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F8,9

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F14,6

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5000
value = 5000+var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 1026, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 109992

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;---------------------------------------------------------------------------
[Statedef 109992]
type = A
movetype= H
physics = N
anim = 5030

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5030
value = 5030+var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time= 1
value = F7,1

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,2

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F15,2

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F15,4

[State 0, Turn]
type = Turn
trigger1 = frontedgedist<backedgedist
trigger1 = time = 0

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 1
anim = F1190
pos = -15,-25
postype = p1
facing = 1
scale = 1,1
sprpriority = 4
angle = 90

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 1
anim = F1080
pos = -15,-25
postype = p1
facing = 1
sprpriority = -1
angle = 270
scale = 0.7,0.7

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 1
anim = F1200
pos = -15,-25
postype = p1
facing = -1
sprpriority = -1
scale = 1.1,1.1

[State 1027, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 109993

;---------------------------------------------------------------------------
[Statedef 109993]
type = A
movetype= H
physics = N
anim = 5060

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = 1
Value = -((ATan(vel y/vel x))*(180.0/PI))

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5060
value = 5060+var(0)*10000


[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5050]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
trigger1 = var(0) != 0
value = 5050+var(0)*10000

[State 1028, Anim 5052]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5052]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
trigger1 = var(0) != 0
value = 5052+var(0)*10000

[State 1028, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
trigger1 = var(0) != 0
value = 5060+var(0)*10000

[State 1028, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
trigger1 = var(0) != 0
value = 5062+var(0)*10000

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;---------------------------------------------------------------------------
[Statedef 109994 ]
type    = A
movetype= H
physics = N
anim = 100022

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = var(0) != 0
value = 100022 + var(0)*10000

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = 1
value = time*20

[State 212, Velocity]
type = HitVelSet
trigger1 = Time = 1
x = 1
y = -1

[State 212, Gravity]
type = VelAdd
trigger1 = time > 1 && 1
y = .3

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -20

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
trigger2 = timemod = 6,0
anim = F1391
ID = 380
pos = -20,-25
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
ontop = 0
angle = atan(vel y/vel x)*180/PI -30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F8,9

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F14,6

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 109992

[State 212, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5050

;---------------------- Integer variable list ----------------------

; var(0):= 412, 500, 505, 555, 510, 515, 530, 535, 550, 555, 2000, 2010, 106040, 106047, 10500, 10510, 10502, 10504, 10512, 70500
; var(1):= 1730, 10501
; var(2):= 1303, 1304, 1305, 1306, 1730, 1842, 1846
; var(3):= 1101
; var(4):= -2, 11170
; var(5):= 1300, 1301
; var(6):= 1200, 5900
; var(8):= 937
;var(10):= 937, 77000, 78000, 77003
;var(12):= 510, 511, 512, 520, 513, 515, 525, 540, 545, 1302, 1308, 1310, 1601
;var(13):= 1401, 1404, 6601
;var(14):= 1401, 1404, 6601, 77000, 78000, 77001, 78001, 77003
;var(15):= 60
;var(18):= 70500
;var(20):= 500, 501, 502, 570, 505, 575, 585, 1200, 6500, 6510, 6520, -2, 5900, 104097, 104098
;var(21):= 503, 555, 550, 555, 1200, -2, 5900
;var(22):= 530, 531, 535, 1200, 1600, -2, 5900
;var(23):= 510, 511, 512, 520, 513, 515, 525, 540, 545, 1200, 6530, 6540, 6550, -2, 5900
;var(24):= 560, 565, 1200, -2
;var(30):= -2, 5900, 106000
;var(35):= -2, 5900, 106025, 106026, 106027, 106028
;var(36):= -2
;var(39):= 104099, -2, 0, 5000, 5001, 5010, 5011, 5020, 5030, 5035, 5040, 5050, 5070, 5071, 5080, 5081, 5100, 5101, 5110
;var(40):= -2, 105251, 105252, 105253, 105254
;var(46):= 104099, -2, 104000, 104001
;var(48):= -1
;var(49):= -1
;var(50):= -1
;var(51):= -2, 5900, 70300, 109910, 109911, 109912, 109913, 109914, 109915
;var(52):= -2, 70300, 109920, 109921, 109922, 109923, 109924, 109925
;var(53):= -2, 70300, 109930, 109931, 109932, 109933, 109934, 109935
;var(54):= -2, 70300, 109940, 109941, 109942, 109943, 109944, 109945
;var(55):= -2, 70300, 109950, 109951, 109952, 109953, 109954, 109955
;var(56):= -2, 70300, 109960, 109961, 109962, 109963, 109964, 109965
;var(57):= -2, 70300, 109970, 109971, 109972, 109973, 109974, 109975

;---------------------- Float variable list ----------------------

; fvar(0):= 5900
; fvar(7):= 5900
; fvar(9):= 1840, 1841
;fvar(10):= 1300, 1308, 77000, 78000
;fvar(11):= 77000, 78000
;fvar(12):= 77003
;fvar(13):= 510, 511, 512, 520, 513, 515, 525, 540, 545, 1000, 1302, 1308, 1310, 1400, 1401, 1601, 1701, 6530, 6540, 6550, 6600, 6601, 60
;fvar(14):= 510, 511, 512, 520, 513, 515, 525, 540, 545, 1000, 1302, 1308, 1310, 1400, 1401, 1601, 1701, 6530, 6540, 6550, 6600, 6601, 60
;fvar(15):= 510, 511, 512, 520, 513, 515, 525, 540, 545, 1000, 1302, 1308, 1310, 1400, 1601, 1701, 6530, 6540, 6550, 6600, 60
;fvar(30):= 1400, 6600
;fvar(31):= 1400, 6600



;------------------------------------------------------------------
[statedef -2]

[State 0, PlaySnd]
type = PlaySnd
trigger1 = random = 999
triggerall = Alive
triggerall = life > 0
triggerall = !matchover
triggerall = !win
triggerall = !lose
triggerall = !drawgame
triggerall = stateno != [170,199]
triggerall = stateno != [5000,5300]
triggerall = stateno != [100000,109999]
value = S1,1+random%16
volume = 256
channel = 2

;---------------------- Integer variable list ----------------------

; var(0):= 412, 500, 505, 555, 510, 515, 530, 535, 550, 555, 2000, 2010, 106040, 106047, 10500, 10510, 10502, 10504, 10512, 70500
; var(1):= 1730, 10501
; var(2):= 1303, 1304, 1305, 1306, 1730, 1842, 1846
; var(3):= 1101
; var(4):= -2, 11170
; var(5):= 1300, 1301
; var(8):= 937
;var(10):= 937, 77000, 78000
;var(12):= 510, 511, 512, 520, 513, 515, 525, 540, 545, 1302, 1308, 1310, 1601
;var(13):= 1401, 1404, 6601
;var(14):= 1401, 1404, 6601, 77000, 78000, 77001, 78001, 77003
;var(18):= 70500
;var(20):= 500, 501, 502, 570, 505, 575, 585, 1200, 6500, 6510, 6520, -2
;var(21):= 503, 555, 550, 555, 1200, -2
;var(22):= 530, 531, 535, 1200, 1600, -2
;var(23):= 510, 511, 512, 520, 513, 515, 525, 540, 545, 1200, 6530, 6540, 6550, -2
;var(24):= 560, 565, 1200, -2
;var(30):= -2
;var(35):= -2
;var(36):= -2
;var(39):= -2, 0
;var(48):= -1
;var(49):= -1
;var(50):= -1

;---------------------- Float variable list ----------------------

; fvar(9):= 1840, 1841
;fvar(10):= 1300, 1308, 77000, 78000
;fvar(11):= 77000, 78000
;fvar(12):= 77000, 77003
;fvar(13):= 510, 511, 512, 520, 513, 515, 525, 540, 545, 1000, 1302, 1308, 1310, 1400, 1401, 1601, 1701, 6530, 6540, 6550, 6600, 6601
;fvar(14):= 510, 511, 512, 520, 513, 515, 525, 540, 545, 1000, 1302, 1308, 1310, 1400, 1401, 1601, 1701, 6530, 6540, 6550, 6600, 6601
;fvar(15):= 510, 511, 512, 520, 513, 515, 525, 540, 545, 1000, 1302, 1308, 1310, 1400, 1601, 1701, 6530, 6540, 6550, 6600
;fvar(30):= 1400, 6600
;fvar(31):= 1400, 6600



;--------BLOKADY-------------------------------

[State 0, SMIERC OSTATECZNA]
type = ChangeState
triggerall = prevstateno = 5150
triggerall = stateno != 5150
trigger1 = alive = 0
trigger2 = life = 0
value = 5150
ctrl = 0

[State 0, przekroczenie licznika]
type = VarSet
trigger1 = var(20) > 30
var(20) = 30

[State 0, przekroczenie licznika]
type = VarSet
trigger1 = var(21) > 20
var(21) = 20

[State 0, przekroczenie licznika]
type = VarSet
trigger1 = var(22) > 8
var(22) = 8

[State 0, przekroczenie licznika]
type = VarSet
trigger1 = var(23) > 30
var(23) = 30

[State 0, przekroczenie licznika]
type = VarSet
trigger1 = var(24) > 40
var(24) = 40

[State 0, STANIE W POWIETRZU]
type = SelfState
trigger1 = stateno = [0,39]
trigger2 = stateno = 100
triggerall = pos y < 0
value = 50

[State 0, STANIE POD ZIEMIA]
type = PosSet
trigger1 = stateno = [0,39]
trigger2 = stateno = 100
triggerall = pos y > 0
y = 0

[State 0, OGRANICZENIE WYSOKOSCI]
type = PosSet
trigger1 = pos y < -500
y = -500

;----Arena Uchiha-----------

[State 0, PosSet]
type = PosSet
trigger1 = pos y < -300
triggerall = helper(70003), var(10) = 0
triggerall = StageVar(info.name) = "U"
y = -300

;ANTI CLONE - CLONE DESTROY -----
[State 0, VarSet]
type = VarSet
trigger1 = !ishelper
v = 39
value = 1

[State 0, DestroySelf]
type = DestroySelf
triggerall = var(39) = 0
trigger1 = stateno = [0,99]
trigger2 = stateno = [5000,5100]
trigger3 = stateno = [100000,199999]
;--------------------------------

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = helper(1840),stateno = [1841,1842]
flag = nobardisplay

[State -1, Helper]
type = Helper
trigger1 = anim = [5000,5999]
trigger1 = time = 1
triggerall = stateno != 2000
triggerall = stateno != 100
triggerall = var(0) = 1
triggerall = command != "a"
triggerall = command != "c"
triggerall = command != "x"
triggerall = command != "z"
triggerall = command != "s"
helpertype = normal ;player
name = "staff"
ID = 10000
stateno = 10502
pos = 22,-24
postype = p1    
facing = -1
ownpal = 1
supermovetime = 99999

[State 0, halabarda]
type = VarSet
trigger1 = var(4) > 4
v = 4
value = 0

[State 0, halabada-efekt]
type = RemoveExplod
trigger1 = stateno != 11171
id = 11172 

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 1300
id = 9998

[State -2, Button X]
type = Explod
triggerall = var(50) = 0
trigger1 = timemod = 10,1
trigger1 = stateno = [11170,11171]
triggerall = numexplod(1610) = 0
anim = F1610
ID = 1610
pos = cond(pos y = 0,-3,5),cond(pos y = 0,-10,-20)
postype = p1
facing = facing
vfacing = 1
;vel = 0,2 
;accel = 0,-0.1
bindtime = 1
removetime = 20
scale = 0.7,0.7
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

;-------------------------------------------------------------------------
;===================[ Liczniki, Okrg i Fatality ]========================
;-------------------------------------------------------------------------

[State -2, Arrow Down]
type = Explod
ownpal = 1
trigger1 = stateno = 70850
trigger2 = prevstateno = 70850 && time < 2
triggerall = command = "holddown"
triggerall = numexplod(1600) = 0
anim = F1600
ID = 1600
pos = cond(pos y = 0,-3,5),cond(pos y = 0,-22,-30)
postype = p1
facing = 1
vfacing = 1
vel = 0,2 
accel = 0,-0.1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Up]
type = Explod
ownpal = 1
trigger1 = stateno = 70850
trigger2 = prevstateno = 70850 && time < 2
triggerall = command = "holdup"
triggerall = numexplod(1601) = 0
anim = F1601
ID = 1601
pos = cond(pos y = 0,-3,5),cond(pos y = 0,-42,-50)
postype = p1
facing = 1
vfacing = 1
vel = 0,-2 
accel = 0,0.1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Forward]
type = Explod
ownpal = 1
trigger1 = stateno = 70850
trigger2 = prevstateno = 70850 && time < 2
triggerall = command = "holdfwd"
triggerall = numexplod(1602) = 0
anim = F1602
ID = 1602
pos = cond(pos y = 0,7,15),cond(pos y = 0,-32,-40)
postype = p1
facing = 1
vfacing = 1
vel = 2,0
accel = -0.1,0
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Back]
type = Explod
ownpal = 1
trigger1 = stateno = 70850
trigger2 = prevstateno = 70850 && time < 2
triggerall = command = "holdback"
triggerall = numexplod(1603) = 0
anim = F1603
ID = 1603
pos = cond(pos y = 0,-13,-5),cond(pos y = 0,-32,-40)
postype = p1
facing = 1
vfacing = 1
vel = -2,0
accel = 0.1,0
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Okrg]
type = Helper
trigger1 = numhelper(70300) = 0
trigger1 = alive
helpertype = normal
name = "Okrg"
ID = 70300
stateno = 70300
pos = 0,0
postype = p1
facing = 1
ownpal = 1
size.yscale = 0.4

[State -2, Fatality Hit]
type = Helper
trigger1 = !alive && numhelper(70400) = 0
helpertype = normal
name = "Fatality Hit"
ID = 70400
stateno = 70400
pos = 0, 0
postype = p1 ;P2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = -20
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State -2, Efekty do aren]
type = Helper
triggerall = teamside = 1 || teamside = 2 && numenemy = 0
triggerall = numhelper(70003) = 0
trigger1 = numpartner = 0
trigger2 = partner, ID > ID
trigger3 = teammode = turns && numpartner = 0
helpertype = normal
name = "Efekty do aren"
ID = 70003
stateno = 77003
pos = 0,30
postype = p1
facing = 1
ownpal = 1

[State -2, Licznik Lewa strona]
type = Helper
triggerall = stateno!=5500
triggerall = numenemy != 0
triggerall = teamside = 1
triggerall = numhelper(70000) = 0
trigger1 = numpartner = 0
trigger2 = partner, ID > ID
trigger3 = teammode = turns && numpartner = 0
helpertype = normal
name = "P1 Licznik Lewa strona"
ID = 70000
stateno = 77000
pos = 0,30
postype = p1
facing = 1
ownpal = 1

[State -2, Licznik Lewa strona 2]
type = Helper
triggerall = numenemy != 0
triggerall = teamside = 1
triggerall = numhelper(70001) = 0
trigger1 = numpartner = 1
trigger1 = partner, ID < ID
helpertype = normal
name = "P3 Licznik Lewa strona"
ID = 70001
stateno = 77001
pos = 0,30
postype = p1
facing = 1
ownpal = 1

[State -2, Licznik Prawa strona]
type = Helper
triggerall = stateno!=5500
triggerall = numenemy != 0
triggerall = teamside = 2
triggerall = numhelper(70000) = 0
trigger1 = numpartner = 0
trigger2 = partner, ID > ID
trigger3 = teammode = turns && numpartner = 0
helpertype = normal
name = "P2 Licznik Prawa strona"
ID = 70000
stateno = 78000
pos = 0,30
postype = p1
facing = 1
ownpal = 1

[State -2, Licznik Prawa strona]
type = Helper
triggerall = numenemy != 0
triggerall = teamside = 2
triggerall = numhelper(70001) = 0
trigger1 = numpartner = 1
trigger1 = partner, ID < ID
helpertype = normal
name = "P4 Licznik Prawa strona"
ID = 70001
stateno = 78001
pos = 0,30
postype = p1
facing = 1
ownpal = 1

;-------------------------------------------------------------------------
;==========================[ Vary Wsplne ]===============================
;-------------------------------------------------------------------------

;>>>>>>>>>>>>>>> Koto Amatsukami <<<<<<<<<<<<<<<
[State 0, CtrlSet]
type = CtrlSet
trigger1 = enemy, var(45) != 0
value = 0

;>>>>>>>>>>>> Byakugan <<<<<<<<<<<<<<<<<
[State 0, PowerSet]
type = PowerSet
trigger1 = power > (PowerMax - enemy, var(34))
value = PowerMax - enemy, var(34)

;>>>>>>>>>>>>>>> Kakashi - Mangekyou Sharingan <<<<<<<<<<<<<<<
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = alive = 0 && var(36) != 0
flag = invisible

[State 0, VarSet]
type = VarSet
trigger1 = stateno != 100051 && alive = 1
v = 36
value = 0

[State -3]
type = AfterImage
trigger1 = alive = 0 && var(36) != 0
time = 1
length = 1
trans = add


;>>>>>>>>>>>>>>> Kltwa Hidana <<<<<<<<<<<<<<<
[State -2, Varset]
type = VarSet
trigger1 = stateno = 5150
var(35) = 0

[State -2, LifeAdd]
type = LifeAdd
trigger1 = var(35) != 0
trigger1 = PlayerID(var(35)),var(0)=1
triggerall = !ishelper
value = -PlayerID(var(35)),var(1)
kill = cond(PlayerID(var(35)),stateno=421 || PlayerID(var(35)),stateno=422 || PlayerID(var(35)),stateno=423 || PlayerID(var(35)),stateno=424 || PlayerID(var(35)),stateno=431 || PlayerID(var(35)),stateno=432 || PlayerID(var(35)),stateno=433 ,1,0)

[State 0, ChangeState]
type = ChangeState
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),var(0)=1
triggerall = !ishelper
trigger1 = PlayerID(var(35)),stateno = [422,429]
trigger1 = PlayerID(var(35)),time < 12
trigger2 = PlayerID(var(35)),stateno = 424
triggerall = PlayerID(var(35)),var(1) != 0
triggerall = stateno != 5050
value = 5050

[State 0, explode]
type = Explod
ownpal = 1
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),stateno = 421
trigger1 = PlayerID(var(35)),time = 5
trigger2 = PlayerID(var(35)),time = 7
anim = F10+random%1
angle = -25+random%50
ID = 4004
pos = cond(statetype != L,8,8),cond(statetype != L,-33,5)
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, explode]
type = Explod
ownpal = 1
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),stateno = 422
trigger1 = PlayerID(var(35)),time = 5
trigger2 = PlayerID(var(35)),time = 7
anim = F10+random%2
angle = -25+random%50
ID = 4004
pos = cond(statetype != L,7,15),cond(statetype != L,-15,-10)
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.7,0.7
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, explode]
type = Explod
ownpal = 1
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),stateno = 423
trigger1 = PlayerID(var(35)),time = 5
trigger2 = PlayerID(var(35)),time = 7
anim = F11+random%1
angle = -25+random%50
ID = 4004
pos = cond(statetype != L,5,0),cond(statetype != L,-32,-10)
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, explode]
type = Explod
ownpal = 1
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),stateno = 431
trigger1 = PlayerID(var(35)),time = 6
anim = F10+random%1
angle = -25+random%50
ID = 4004
pos = cond(statetype != L,8,8),cond(statetype != L,-33,5)
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.4,0.4
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, explode]
type = Explod
ownpal = 1
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),stateno = 432
trigger1 = PlayerID(var(35)),time = 6
anim = F10+random%2
angle = -25+random%50
ID = 4004
pos = cond(statetype != L,7,15),cond(statetype != L,-15,-10)
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, explode]
type = Explod
ownpal = 1
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),stateno = 433
trigger1 = PlayerID(var(35)),time = 6
anim = F11+random%1
angle = -25+random%50
ID = 4004
pos = cond(statetype != L,5,0),cond(statetype != L,-32,-10)
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.6,0.6
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, explode]
type = Explod
ownpal = 1
triggerall = var(35) != 0
trigger1 = PlayerID(var(35)),stateno = 424
trigger1 = PlayerID(var(35)),time = 125
anim = F1500
ID = 4004
pos = 0,-30
postype = p1
bindtime = 1
removetime = 25
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
sprpriority = 6
ownpal = 1
ontop = 0

;>>>>>>>>>>>>>>> Pieczec Danzo <<<<<<<<<<<<<<<
[State -2, Varset]
type = VarSet
trigger1 = stateno = 5150
var(40) = 0

[State 0, ChangeState]
type = ChangeState
triggerall = var(40) != 0
triggerall = !ishelper
trigger1 = PlayerID(var(40)),stateno = 630
triggerall = PlayerID(var(40)),var(3) = 2
triggerall = stateno != 5050
value = 105250

;>>>>>>>>>>>>>>> Kagemane Shikamaru <<<<<<<<<<<<<<<
[State 0, CtrlSet]
type = CtrlSet
trigger1 = var(46) = 1
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = enemy, name = "Shikamaru"
trigger1 = enemy, var(10) = 0
trigger1 = var(46) = 1
v = 46
value = 0

[State 0, Changestate]
type = Changestate
trigger1 = var(46) = 1 && (stateno = 0|| stateno = 12 || stateno = 20 || stateno = 52 || stateno = [98,104])
value = 104000

[State 0, Changestate]
type = Changestate
trigger1 = var(46) = 1 && stateno = [10,11]
trigger2 = var(46) = 1 && stateno = 5120
value = 104002

[State 0, Changestate]
type = Changestate
trigger1 = var(46) = 1 && stateno = [40,59]
value = 104008

[State 0, Selfstate]
type = Selfstate
trigger1 = var(46) = 0 && stateno = [104000,104099]
trigger1 = enemy, name = "Shikamaru"
trigger1 = enemy, var(10) = 0
value = cond(pos y = 0,0,50)
ctrl = 1

;>>>>>>>>>>>>>>> Kankuro, Sasori Poison <<<<<<<<<<<<<<<
[State 0, VarAdd]
type = VarAdd
trigger1 = var(30) !=0 && gametime%4 = 0
v = 30
value = -1

[State 0, PalFXWiz]
type = PalFX
trigger1 = var(30) != 0
trigger1 = gametime%18 = 0
trigger1 = !ishelper
time = 18
add = 100,0,100
mul = 220,120,224
sinadd = 80,50,80,18
invertall = 0
color = 256

[State 0, LifeAdd]
type = LifeAdd
trigger1 = gametime%4 = 0
trigger1 = var(30) != 0
trigger1 = !ishelper
value = -1
kill = 0

[State 0, Trucizna]
type = Explod
trigger1 = var(30) > 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = numexplod(1916) = 0
trigger1 = !ishelper
anim = F1916
ID = 1916
pos = 0*facing,cond(stateno = 5110,-25,cond(statetype = C,-50,-70))
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Trucizna]
type = ModifyExplod
trigger1 = var(30) > 0
triggerall = numexplod(1916) = 1
trigger1 = !ishelper
ID = 1916
pos = 0*facing,cond(stateno = 5110,-25,cond(statetype = C,-50,-70))
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(30) = 0
trigger1 = !ishelper
ID = 1916

;>>>>>>>>>>>>>>> Var Katon <<<<<<<<<<<<<<<

[State 0, - Katon - ]
type = VarAdd
triggerall = var(51) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 51
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(51) <= 0
trigger2 = var(53) != 0
trigger3 = ishelper
trigger4 = stateno = [170,194]
trigger5 = stateno = 5150
triggerall = stateno != [109910,109919]
v = 51
value = 0

;~~ Debuff ~~

[State 0, LifeAdd]
type = LifeAdd
trigger1 = timemod = 3,0
triggerall = var(51) > 0
triggerall = var(53) = 0
triggerall = var(54) = 0
value = -1
kill = 1


;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && timemod = 30,0
triggerall = var(51) > 0
triggerall = var(53) = 0
value = F10,4

[State 0, PalFX]
type = PalFX
trigger1 = time > 0 && timemod = 5,0
triggerall = var(51) > 0
triggerall = var(53) = 0
time = 10
add = 240,50,0
mul = 250,224,120
sinadd = 110,55,85,10
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 5,0
triggerall = var(51) > 0
triggerall = var(53) = 0
triggerall = var(54) = 0
anim = F1402
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 1,1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1901) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(51) > 0
triggerall = var(53) = 0
anim = F1901
ID = 1901
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = 0*facing,-0.04
scale = 0.4,0.4
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

;Polaczony z Futonem
[State 0, Katon + Futon]
type = LifeAdd
trigger1 = timemod = 4,0
triggerall = var(51) > 0
triggerall = var(54) != 0
value = -3
kill = 1

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 5,0
triggerall = var(51) > 0
triggerall = var(54) != 0
anim = F1402
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 1.6,1.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Raiton <<<<<<<<<<<<<<<

[State 0, - Raiton - ]
type = VarAdd
triggerall = var(52) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 52
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(52) <= 0
trigger2 = var(54) != 0
trigger3 = ishelper
trigger4 = stateno = [170,194]
trigger5 = stateno = 5150
triggerall = stateno != [109920,109929]
v = 52
value = 0

;~~ Debuff ~~

[State 0, ChangeState]
type = ChangeState
triggerall = var(52) = 100 || var(52) = 200 || var(52) = 300 || var(52) = 400 || var(52) = 500
triggerall = var(52) != 0
triggerall = !ishelper
trigger1 = stateno = [0,199]
trigger2 = stateno = 70500+var(0)*1000 
triggerall = stateno != [10000,199999]
triggerall = stateno != [170,194]
value = 109929

;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && timemod = 30,0
triggerall = var(52) > 0
triggerall = var(54) = 0
value = F11,3

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 5,0
triggerall = var(52) > 0
triggerall = var(53) = 0
triggerall = var(54) = 0
anim = F1300+random%3
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 5
removetime = -2
sprpriority = -2+random%5
scale = 0.25,0.25
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1902) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(52) > 0
triggerall = var(54) = 0
anim = F1902
ID = 1902
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = 0.02*facing,0.03
scale = 0.4,0.4
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

;Polaczony z Suitonem
[State 0, Raiton + Suiton]
type = LifeAdd
trigger1 = timemod = 3,0
triggerall = var(52) > 0
triggerall = var(53) != 0
value = -1
kill = 1

[State 0, PalFX]
type = PalFX
trigger1 = timemod = 5,0
triggerall = var(52) > 0
triggerall = var(53) != 0
time = 10
add = 50,50,200
mul = 100,200,200
sinadd = 150,150,300,4
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 3,0
triggerall = var(52) > 0
triggerall = var(53) != 0
anim = F1300+random%3
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 5
removetime = -2
sprpriority = -2+random%5
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Suiton <<<<<<<<<<<<<<<

[State 0, - Suiton - ]
type = VarAdd
triggerall = var(53) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 53
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(53) <= 0
trigger2 = var(55) != 0
trigger3 = ishelper
trigger4 = stateno = [170,194]
trigger5 = stateno = 5150
triggerall = stateno != [109930,109939]
v = 53
value = 0

;~~ Debuff ~~

[State 0, Atk Break]
type = Explod
trigger1 = var(53) > 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = numexplod(1910) = 0
anim = F1910
ID = 1910
pos = -10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Atk Break]
type = ModifyExplod
trigger1 = var(53) > 0
triggerall = numexplod(1910) = 1
ID = 1910
pos = -10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(53) = 0
ID = 1910

[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = var(53) = 0
value = 1

[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = var(53) > 0
value = 0.6


;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && timemod = 30,0
triggerall = var(53) > 0
triggerall = var(55) = 0
value = F12,0

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 10,0
triggerall = var(53) > 0
triggerall = var(55) = 0
anim = F1550
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1903) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(53) > 0
triggerall = var(55) = 0
anim = F1903
ID = 1903
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = -0.03*facing,-0.02
scale = 0.4,0.4
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Fuuton <<<<<<<<<<<<<<<

[State 0, - Fuuton - ]
type = VarAdd
triggerall = var(54) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 54
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(54) <= 0
;trigger2 = var(51) != 0
trigger2 = ishelper
trigger3 = stateno = [170,194]
trigger4 = stateno = 5150
triggerall = stateno != [109940,109949]
v = 54
value = 0

;~~ Debuff ~~

[State 0, Def Break]
type = Explod
trigger1 = var(54) > 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = numexplod(1912) = 0
anim = F1912
ID = 1912
pos = 10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Def Break]
type = ModifyExplod
trigger1 = var(54) > 0
triggerall = numexplod(1912) = 1
ID = 1912
pos = 10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(54) = 0
ID = 1912

[State 0, DefenceMulSet]
type = DefenceMulSet
trigger1 = var(54) = 0
value = 1

[State 0, DefenceMulSet]
type = DefenceMulSet
trigger1 = var(54) > 0
value = 1.25

;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && timemod = 40,0
triggerall = var(54) > 0
;triggerall = var(51) = 0
value = F14,6

[State 0, Explod]
type = Explod
trigger1 = time > 0 &&  timemod = 10,0
triggerall = var(54) > 0
;triggerall = var(51) = 0
anim = F643
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1904) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(54) > 0
;triggerall = var(51) = 0
anim = F1904
ID = 1904
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = 0.03*facing,-0.02
scale = 0.4,0.4
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Doton <<<<<<<<<<<<<<<
[State 0, - Doton - ]
type = VarAdd
triggerall = var(55) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 55
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(55) <= 0
trigger2 = var(52) != 0
trigger3 = ishelper
trigger4 = stateno = [170,194]
trigger5 = stateno = 5150
triggerall = stateno != [109950,109959]
v = 55
value = 0

;~~ Debuff ~~

[State 0, Slow]
type = Explod
trigger1 = var(55) > 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = numexplod(1914) = 0
anim = F1914
ID = 1914
pos = -10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Slow]
type = ModifyExplod
trigger1 = var(55) > 0
triggerall = numexplod(1910) = 1
ID = 1910
pos = -10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(55) = 0
ID = 1914

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 45 || stateno = 60
value = 50
ctrl = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = var(55) != 0
trigger1 = stateno = 50
y = -(const(velocity.jump.y))/20

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 100 || stateno = 101
value = 20
ctrl = 1

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 102 || stateno = 103
value = 11
ctrl = 1

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 105
value = 0
ctrl = 1

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 70600
value = 0
ctrl = 1

;~~ Efekty ~~

[State 0, PalFX]
type = PalFX
trigger1 = timemod = 5,0
triggerall = var(55) > 0
triggerall = var(52) = 0
time = 10
add = 25,20,5
mul = 196,186,166
sinadd = 0,0,0,1
invertall = 0
color = 256

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1905) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(55) > 0
triggerall = var(52) = 0
anim = F1905
ID = 1905
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = -0.02*facing,0.03
scale = 0.4,0.4
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Czarne Plomienie <<<<<<<<<<<<<<<
[State 0, - Amaterasu - ]
type = VarAdd
triggerall = var(56) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 56
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(56) <= 0
trigger2 = ishelper
trigger3 = stateno = [170,194]
trigger4 = stateno = 5150
triggerall = stateno != [109960,109969]
v = 56
value = 0

;~~ Debuff ~~

[State 0, LifeAdd]
type = LifeAdd
trigger1 = timemod = 3,0
triggerall = var(56) > 0
value = -2
kill = 1

;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 20,0
triggerall = var(56) > 0
value = F10,2

[State 0, PalFX]
type = PalFX
trigger1 = timemod = 5,0
triggerall = var(56) > 0
time = 10
add = -60,-80,-50
mul = 90,20,120
sinadd = 40,20,50,5
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = timemod = 3,0
triggerall = var(56) > 0
anim = F1700
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-10-random%40))
postype = p1
facing = 1
angle = -20+random%40
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 1,1;0.35,0.35
vel = 0,-1-random%2
accel = 0,0.05
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Kuroi Kaminari <<<<<<<<<<<<<<<
[State 0, - Kuroi Kaminari - ]
type = VarAdd
triggerall = var(57) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 57
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(57) <= 0
trigger2 = ishelper
trigger3 = stateno = [170,194]
trigger4 = stateno = 5150
triggerall = stateno != [109970,109979]
v = 57
value = 0

;~~ Debuff ~~

[State 0, ChangeState]
type = ChangeState
triggerall = timemod = 100,0
triggerall = var(57) != 0
triggerall = !ishelper
trigger1 = stateno = [0,199]
trigger2 = stateno = 70500+var(0)*1000 
;trigger3 = stateno = [5000,5299]
triggerall = stateno != [10000,199999]
triggerall = stateno != [170,194]
value = 109979

;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 30,0
triggerall = var(57) > 0
value = F11,3

[State 0, Explod]
type = Explod
trigger1 = timemod = 5,0
triggerall = var(57) > 0
anim = F1701+random%3
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 5
removetime = -2
sprpriority = -2+random%5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;-------------------------

[Statedef -3]

[State -3, Afterimage normal]
type = AfterImage
triggerall = var(1) = 0
trigger1 = time = 0
time = 1

[State -3, PowerAdd]
type = PowerAdd
triggerall = prevstateno != 190+var(0)*10000 
triggerall = stateno = [0,199]
triggerall = stateno != 70500+var(0)*1000 
triggerall = stateno != [5000,5299]
triggerall = stateno != [10000,199999]
triggerall = timemod = 20,0
trigger1 = !ishelper
value = 4
