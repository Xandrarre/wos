
[Data]
life = 3000
power = 4000
attack = 90
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = 3
guard.sparkno = 40
KO.echo = 0
volume = 0
IntPersistIndex = 0
FloatPersistIndex = 0

[Size]
xscale = 1
yscale = 1
ground.back = 15
ground.front = 15
air.back = 10
air.front = 10
height = 55
attack.dist = 160
proj.attack.dist = 90
proj.doscale = 0
head.pos = 0, -48
mid.pos = 0, -25
shadowoffset = 0
draw.offset = 0,0

[Velocity]
walk.fwd  = 1.5		;Walk forward
walk.back = -1.5		;Walk backward
run.fwd  = 7.4, 0		;Run forward (x, y)
run.back = -5.5,-3.2	;Hop backward (x, y)
jump.neu = 0,-9.5		;Neutral jumping velocity (x, y)
jump.back = -3.2		;Jump back Speed (x, y)
jump.fwd = 3.2		;Jump forward Speed (x, y)
runjump.back = -2.70,-9.1;Running jump speeds (opt)
runjump.fwd = 4,-9.1	;.
airjump.neu = 0,-9.1	;.
airjump.back = -2.65	;Air jump speeds (opt)
airjump.fwd = 2.6

[Movement]
airjump.num = 1
airjump.height = 35
yaccel = .44
stand.friction = .85
crouch.friction = .82

;---------------------------------------------------------------------------
; Variable usage:
; This is a record of the variables that KFM uses. Keeping a record of your
; variable usage helps you avoid careless mistakes later.
; var(1)  - Used in kfm.cmd for combo condition (updated every tick)
; var(2)  - Used in Kung Fu Throw (state 800) to remember if fwd was being
;           held (remembered from state 800 through state 810).

;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181+var(0)

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181+var(0)

;---------------------------------------------------------------------------
; Win pose 1
; CNS difficulty: basic
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S2,11

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 10,0
trigger1 = time < 74
anim = 181
ID = 181
pos = const(size.mid.pos.x)+5,const(size.mid.pos.y)+30
random = 30,60
vel = -0.3,-0.5
accel = 0,0.02
postype = p1
bindtime = 1
removetime = 56
scale = 0.5,0.5
sprpriority = 2
ownpal = 1
ontop = 0

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 10,0
trigger1 = time < 85
anim = 181
ID = 181
pos = const(size.mid.pos.x)-5,const(size.mid.pos.y)+20
random = 30,60
vel = 0.3,-0.5
accel = 0,0.02
postype = p1
bindtime = 1
removetime = 56
scale = 0.5,0.5
sprpriority = 2
ownpal = 1
ontop = 0

[State 170, 1]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 0, VelSet]
type = Velset
trigger1 = time = 84
x = 2

[State 0, VelSet]
type = Veladd
trigger1 = time > 85
x = 0.3

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, Trans]
type = Trans
trigger1 = time=[85,95]
trans = addalpha
alpha = 256-(time-85)*25.6,(time-85)*25.6

[State 0, Trans]
type = Trans
trigger1 = time>=95
trans = addalpha
alpha = 0,256

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

;---------------------------------------------------------------------------
; Win 2
[Statedef 182]
type = S
anim = 10170

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  time = 0
value = S4,17

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  time = 0
value = S4,17

[State 180, 1]
type = ChangeState
trigger1 = 0
value = 181

;---------------------------------------------------------------------------
; Intro
[Statedef 190]
type = S
velset = 1.5,0
anim = 190

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 191+random%2

;---------------------------------------------------------------------------
; Intro
[Statedef 191]
type = S
velset = 0,0
anim = 191

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 0

[State 0, PowerSet]
type = PowerSet
trigger1 = time = 0
value = 2000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,10

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = 0;animelem = 10
anim = F120
ID = 120
pos = -18,0
postype = p1  ;p2,front,back,left,right
vel = -0.3,0
accel = 0,-0.02
removetime = -2
scale = 1.2,1.2
sprpriority = 2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = 0;animelem = 10
anim = F120
ID = 120
pos = -10,0
postype = p1  ;p2,front,back,left,right
vel = -0.3,0
accel = 0,-0.02
removetime = -2
scale = 0.9,0.9
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 10
value = S1,1

[State 180, 1]
type = ChangeState
trigger1 = Time = 198
value = 0

;---------------------------------------------------------------------------
; Intro
[Statedef 192]
type = S
velset = 0,0
anim = 192

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 1

[State 0, PowerSet]
type = PowerSet
trigger1 = time = 0
value = 2000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,18

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 180, 1]
type = ChangeState
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 1
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 5
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 5
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S2,14

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S2,14

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Combo 1.1
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 200                      ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S3,1+random%5
volume = 255
channel = 4

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 5
x = 2

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 5
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 30,6                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,5                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4
sparkxy = -15,-55                ;Spark x y
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -3,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -3,-0.5           ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000
               ;Time before opponent regains control in air

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo 1.2
[Statedef 210]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 210                     ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 2

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 15,3                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,2                ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4               ;Spark anim no (Def: set above)
sparkxy = -15,-10               ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -3,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-0.5           ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 5
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 15,3               ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,5                ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -25,-10               ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -3,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-0.5           ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000
              ;Time before opponent regains control in air

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo 1.3
[Statedef 220]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 220                     ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 6
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
trigger3 = AnimElem = 7
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 10,2                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -40,-55               ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10             ;Time that the opponent slides back
ground.hittime  = 30            ;Time opponent is in hit state
ground.velocity = -6             ;Velocity at which opponent is pushed
airguard.velocity = -6,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -6,-0.5           ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000
             ;Time before opponent regains control in air

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo 1.4
[Statedef 230]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 230                       ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1 

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = F300
ID = 60
pos = 0,2
postype = p1
scale = 1.5,1.5
removetime = -2                 ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
trigger2 = animelem = 3
x = 15

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = F8,0+random%5

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
attr = C, HP                    ;Attribute: Standing, Normal Attack
damage = 30,6             ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 10,10                ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -25,-25               ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 5, 7                  ;Sound to play on hit
guardsound = 6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 30            ;Time opponent is in hit state
ground.velocity = -8.5,-5             ;Velocity at which opponent is pushed
airguard.velocity = -5,-1.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -8.5,-5          ;X-velocity at which opponent is pushed,
p2stateno = 109990                                ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 5
trigger1 = !movecontact
attr = C, HP                   ;Attribute: Standing, Normal Attack
damage = 30,6             ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 10,10                ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -10,-35               ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 5, 7                 ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 30            ;Time opponent is in hit state
ground.velocity = -6,-5             ;Velocity at which opponent is pushed
airguard.velocity = -8.5,-1.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -8.5,-5          ;X-velocity at which opponent is pushed,
p2stateno = 109990                                ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
               ;Time before opponent regains control in air

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo 2.1
[Statedef 240]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 240                      ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 2

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 5
trigger2 = AnimElem = 4
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 15,3                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 4,5                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -15,-55                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -3             ;Velocity at which opponent is pushed
airguard.velocity = -2,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -2,-0.5           ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

              ;Time before opponent regains control in air

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo 2.2
[Statedef 250]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 250                      ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = F8,0+random%5

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 30,6                 ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,2                ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -25,-55              ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -2             ;Velocity at which opponent is pushed
airguard.velocity = -1,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -2,-0.5           ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo 2.3
[Statedef 260]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 260                      ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)
velset=0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 15,3              ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,2                ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -25,-55              ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -5             ;Velocity at which opponent is pushed
airguard.velocity = -4,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -5,-0.5           ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Combo 2.4
[Statedef 270]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 260                     ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)
velset=0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 15,3               ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,2                ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -25,-55              ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = 7             ;Velocity at which opponent is pushed
airguard.velocity = 6,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 7,-0.5           ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Combo 2.5
[Statedef 280]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 280                      ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = F8,0+random%5

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 50,10               ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -40,-25               ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 30            ;Time opponent is in hit state
ground.velocity = -1,-9.5             ;Velocity at which opponent is pushed
airguard.velocity = -0.7,-5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1,-9.5          ;X-velocity at which opponent is pushed,                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000


[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo 5
[Statedef 285]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 280+var(0)*10000                       ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = F8,0+random%5

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 50,10                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -40,-25               ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 30            ;Time opponent is in hit state
ground.velocity = -1,-8.3             ;Velocity at which opponent is pushed
airguard.velocity = -0.7,-4     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1,-3          ;X-velocity at which opponent is pushed,                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
fall = 1
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo 3.1
[Statedef 290]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 300                      ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = F8,0+random%5

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 2

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 5
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 30,6                  ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,5                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -15,-55                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -5             ;Velocity at which opponent is pushed
airguard.velocity = -4,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -5,-0.5           ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10


[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000


[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Combo 3.2
[Statedef 300]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 290                     ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4


[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 3
trigger2 = animelem = 4
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 15,3               ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,5                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -15,-55                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -3,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -3,-0.5           ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Combo 3.4
[Statedef 310]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 310                    ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 0, VelSet]
type = VelSet
trigger1 = time=0
x = 6

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 30,6                 ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,5                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -15,-10                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = 0,-5             ;Velocity at which opponent is pushed
airguard.velocity = 0,-3     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0,-5         ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 16
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Combo 3.5
[Statedef 320]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 320                     ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 5,0
value = F8,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,1+random%5
volume = 255
channel = 4

[State 0, VelSet]
type = VelSet
trigger1 = time = 5
x = 3
y = -7.2
ignorehitpause=1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 5
statetype = A       ;S,A,C,L
movetype = A
physics = A         ;A,C,S,N

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 4
anim = F370
pos = 0,0
scale = 1.1,1.1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = 2000
ID = 2000
pos = 0,-25
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = -1
removetime = 42
pausemovetime = 999
supermovetime = 999
scale = 1,1
sprpriority = 3
ontop = 0
ownpal = 1

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = timemod = 4,2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 10,2                 ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -15,-10                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -1.5,-2             ;Velocity at which opponent is pushed
airguard.velocity = -1,-0.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.5,-2         ;X-velocity at which opponent is pushed,
fall =1                                 ;Y-velocity at which opponent is pushed
air.hittime = 16
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 210, 2]
type = AfterImage
trigger1 = time = 5
time = 10
length = 13
palbright = 0,0,0
palcontrast = 160,150,150
palpostbright = 0,0,0
paladd = 5,0,0
palmul = 1,1,1
trans = add1                ;Time before opponent regains control in air

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time=20
value = 1

;---------------------------------------------------------------------------
; Combo 4
[Statedef 325]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 320                      ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,1+random%5
volume = 255
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 5,0
value = F8,9

[State 0, VelSet]
type = VelSet
trigger1 = time = 5
x = cond(command="holdfwd",3,cond(command="holdback",-3,0))
y = -9
ignorehitpause=1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 4 && command != "holdback" && command != "holdfwd"
anim = F360
pos = 0,0
scale = 1.1,1.1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 4 && command = "holdfwd"
anim = F370
pos = 0,0
scale = 1.1,1.1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 4 && command = "holdback"
anim = F370
pos = 0,0
scale = 1.1,1.1
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = 2000
ID = 2000
pos = 0,-25
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = -1
removetime = 42
pausemovetime = 999
supermovetime = 999
scale = 1,1
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 5
statetype = A       ;S,A,C,L
movetype = A
physics = A         ;A,C,S,N

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = timemod = 4,2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 10,2               ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -15,-10                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -1.5,-1             ;Velocity at which opponent is pushed
airguard.velocity = -1,-0.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.5,-1         ;X-velocity at which opponent is pushed,
fall =1                                 ;Y-velocity at which opponent is pushed
air.hittime = 16
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 5
time = 30
length = 7
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 160,150,150
palpostbright = 0,0,0
paladd = 5,0,0
palmul = .65,.65,.75
timegap = 1
framegap = 1
trans = add                ;Time before opponent regains control in air

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time=25
value = 1

;---------------------------------------------------------------------------
; Combo Air 6
[Statedef 327]
type    = A                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = A                     ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 325                       ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, VelSet]
type = Veladd
trigger1 = time = 0
y = -3
ignorehitpause=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 5,0
value = F8,9

[State 0, VelSet]
type = VelSet
trigger1 = time = 0 && pos y >= -5
x = 3
y = -6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,1+random%5
volume = 255
channel = 4

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = timemod = 4,2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 10,2               ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -15,-10                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -1.5,-2             ;Velocity at which opponent is pushed
airguard.velocity = -1,-0.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.5,-2         ;X-velocity at which opponent is pushed,
fall =1                                 ;Y-velocity at which opponent is pushed
air.hittime = 16
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 5
time = 30
length = 7
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 160,150,150
palpostbright = 0,0,0
paladd = 5,0,0
palmul = .65,.65,.75
timegap = 1
framegap = 1
trans = add                ;Time before opponent regains control in air

;---------------------------------------------------------------------------
; Combo Air 7.1
[Statedef 330]
type    = A                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 330                      ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = F8,0+random%5

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 30,6                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -15,-10                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -2,-2.5             ;Velocity at which opponent is pushed
airguard.velocity = -1,-0.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -2,-2.5         ;X-velocity at which opponent is pushed,                                 ;Y-velocity at which opponent is pushed
air.hittime = 16
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000
;---------------------------------------------------------------------------
; Combo Air 7.2
[Statedef 340]
type    = A                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 360                       ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 1.5
y = -3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 4
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 30,6                 ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -15,-10                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -2,-1            ;Velocity at which opponent is pushed
airguard.velocity = -1,-0.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -2,-1         ;X-velocity at which opponent is pushed,                                 ;Y-velocity at which opponent is pushed
air.hittime = 16
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000


;---------------------------------------------------------------------------
; Combo Air 7.3
[Statedef 350]
type    = A                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 340                      ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 3
y = -6

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 30,6                 ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -25,30                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -6,-1.5             ;Velocity at which opponent is pushed
airguard.velocity = -3,-0.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -6,-1.5         ;X-velocity at which opponent is pushed,                                 ;Y-velocity at which opponent is pushed
air.hittime = 16
fall = 1
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

;---------------------------------------------------------------------------
; Combo Air 8.1
[Statedef 360]
type    = A                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 350                   ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 3
y = 7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 200, 1]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 20,4               ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -15,40                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -6,-1.5             ;Velocity at which opponent is pushed
airguard.velocity = -3,-0.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -6,-1.5         ;X-velocity at which opponent is pushed,                                 ;Y-velocity at which opponent is pushed
air.hittime = 16
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = pos y > -30
trigger1 = anim = 350+var(0)*10000
anim = 355
ID = 355
pos = -38,38
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1.1,1.1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = pos y > -30
trigger1 = anim = 350+var(0)*10000
value = F21,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = pos y > -30
trigger1 = anim = 350+var(0)*10000
value = F21,2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = pos y > -30
trigger1 = anim = 350+var(0)*10000
value = 351+var(0)*10000

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = animtime = 0
trigger1 = anim = 351+var(0)*10000
value = 352+var(0)*10000

[State 0, VelSet]
type = VelSet
trigger1 = anim = 351+var(0)*10000
trigger1 = time<48
x = 0
y = 0

[State 0, VelSet]
type = posSet
trigger1 = anim = 351+var(0)*10000
trigger1 = time<48
y = -30

[State 40, 4]
type = VelSet
trigger1 = anim = 351+var(0)*10000
trigger1 = command = "up"
x = cond(sysvar(1)=0, const(velocity.jump.neu.x), cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)-1



;---------------------------------------------------------------------------
; Combo Air 8.2
[Statedef 370]
type    = A                    ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I                     ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 370                      ;Change animation (Def: no change)
poweradd = 20                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PowerAdd]
type = PowerAdd
trigger1 = timemod = 4,0
trigger1 = time = [8,36]
value = -44

[State 0, Helper]
type = Helper
trigger1 = timemod = 4,0
trigger1 = time = [4,36]
helpertype = normal
name = "senbon"
pos = 30,-22
ID = 70750
stateno = 70750
facing = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 4,0
trigger1 = time = [4,36]
value = F8,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,1+random%5
volume = 255
channel = 4

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 36
value = 375

[State 0, VelSet]
type = VelSet
trigger1 = time<40
x = 0
y = 0

[State 0, VelSet]
type = posSet
trigger1 = time<40
y = -30

;---------------------------------------------------------------------------
; Poison Fog Attack
[Statedef 510]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I                     ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 510                       ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S3,10

[State 0, Helper]
type = Helper
trigger1 = timemod = 8,1
trigger1 = time > 8
trigger1 = anim = 510
helpertype = normal
name = "fog"
pos = 30,-20
ID = 515
stateno = 515
facing = 1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 16,9
trigger1 = time > 8
trigger1 = anim = 510
value = F9,0

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 525
trigger1 = time >25
value = 525

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 525
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Poison Fog Attack Air
[Statedef 511]
type    = A                    ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I                     ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 370                      ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 1                ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S3,10

[State 0, Helper]
type = Helper
trigger1 = timemod = 8,1
trigger1 = time > 4
trigger1 = anim = 370
helpertype = normal
name = "fog"
pos = 30,-20
ID = 516
stateno = 516
facing = 1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 16,9
trigger1 = time > 4
trigger1 = anim = 370
value = F9,0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 36
value = 375

[State 0, VelSet]
type = VelSet
trigger1 = time<40
x = 0
y = 0

[State 0, VelSet]
type = posSet
trigger1 = time<40
y = -30

;---------------------------------------------------------------------------
; Fog
[Statedef 515]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                     ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 515                       ;Change animation (Def: no change)
poweradd = -10                     ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
velset = 2,0.5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time<2
flag = invisible

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 2
add = 100,0,50
mul = 120,20,160
sinadd = 0,0,0,10
invertall = 0
color = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 200, 1]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time%3 = 0
trigger1 = enemynear, var(30) = 0
attr =  C,HP
damage = 80, 0
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
sparkxy = 0, -40
hitsound = 0, 3
guardsound = 6, 0
ground.type = High
ground.slidetime = 0
ground.hittime  = 40
ground.velocity = 0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 40
palfx.time = 30
palfx.mul = 120,20,160
palfx.add = 100,0,50

[State 0, TargetState]
type = TargetState
trigger1 = enemynear, var(30) = 0
value = 106000

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = -0.04

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.025+time*0.005,0.03+time*0.005
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time<=20
trans = addalpha
alpha = 256,256
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time>20
trans = addalpha
alpha = 256-(time-20)*12.8,256
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 40

;---------------------------------------------------------------------------
; Fog Air
[Statedef 516]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                     ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 515                       ;Change animation (Def: no change)
poweradd = -6                     ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
velset = 2,1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time<2
flag = invisible

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 2
add = 100,0,50
mul = 120,20,160
sinadd = 0,0,0,10
invertall = 0
color = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 200, 1]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time%3 = 0
trigger1 = enemynear, var(30) = 0
attr =  C,HP
damage = 0, 0
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
sparkxy = 0, -40
hitsound = 0, 3
guardsound = 6, 0
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 0
palfx.time = 30
palfx.mul = 120,20,160
palfx.add = 100,0,50

[State 0, TargetState]
type = TargetState
trigger1 = enemynear, var(30) = 0
value = 106000

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = -0.04

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.025+time*0.005,0.03+time*0.005
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time<=20
trans = addalpha
alpha = 256,256
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time>20
trans = addalpha
alpha = 256-(time-20)*12.8,256
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 40

;---------------------------------------------------------------------------
; Senbon Shot
[Statedef 520]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I                     ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 520+var(0)*10000                       ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PowerAdd]
type = PowerAdd
trigger1 = timemod = 4,0
trigger1 = time >= 8
trigger1 = anim = 520
value = -44

[State 0, Helper]
type = Helper
trigger1 = timemod = 4,0
trigger1 = time >= 8
trigger1 = anim = 520
helpertype = normal
name = "senbon"
pos = 25,-20
ID = 70750
stateno = 70750
facing = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 4,0
trigger1 = time >= 8
trigger1 = anim = 520
value = F8,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S3,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S3,1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = time >= 40
triggerall = anim = 520
trigger1 = power < 50
trigger2 = var(50) = 0 && command != "holdc"
trigger3 = var(50) = 1 && random = [0,100-var(49)*(var(49))/100]
trigger4 = time = 101
trigger5 = var(50) = 1 && p2bodydist x < 0
value = 525

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 525
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Tail Special Guard
[Statedef 600]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 600                     ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
triggerall = anim = 600
anim = F340
pos = 5,-35
scale = 1.5,1.5
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 7,0
value = F8,5

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time > 4
value = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S3,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S3,9

[State 1027, Sound]
type = PlaySnd
trigger1 = timemod = 25,0
value = F14,5

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, 1]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 4,0
attr = S, NA                     ;Attribute: Standing, Normal Attack
getpower = 0,0
damage = 30,4                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                 ;Time attacker pauses, time opponent shakes
sparkno = 230                 ;Spark anim no (Def: set above)
sparkxy = -15,enemy(0),pos y-25                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 5, 1                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = 3*cond((enemynear(0),pos x - pos x) > 0,-1,1)*facing,-1.5             ;Velocity at which opponent is pushed
airguard.velocity = 2*cond((enemynear(0),pos x - pos x) > 0,-1,1)*facing,-0.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 3*cond((enemynear(0),pos x - pos x) > 0,-1,1)*facing,-1.5         ;X-velocity at which opponent is pushed,                                 ;Y-velocity at which opponent is pushed
air.hittime = 16

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim = 600
trigger1 = var(50) = 0 && command !="holdc"
triggerall = time>20
trigger2 = power = 0
trigger3 = var(50) = 1 && random = [0,100-var(49)*(var(49))/100]
value = 605

[State 0]
type = Explod
ownpal = 1
trigger1 = animelem = 3
trigger1 = anim = 600
anim = F401
ID = 401
pos = -22,0
postype = p1
name = "dym lewa"
scale = 1.15,1.15
ownpal = 1
ontop = 0
ignorehitpause = 1
bindtime=1
removetime= -2
sprpriority = 2

[State 0]
type = Explod
ownpal = 1
trigger1 = animelem = 3
trigger1 = anim = 600
anim = F401
ID = 4011
pos = 22,0
postype = p1
facing = -1
name = "dym prawa"
scale = 1.15,1.15
ownpal = 1
ontop = 0
ignorehitpause = 1
bindtime=1
removetime= -2
sprpriority = 2

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 605
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Kawarimi
[Statedef 700]
;type    = S
movetype= I
;physics = S
juggle  = 4
ctrl = 0
velset = 0,0
anim = 0+var(0)*10000

;---------------------efekty

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,19

[State 500, Explod]
type = Explod
ownpal = 1
trigger1 = Time = 0
trigger2 = Time = 17
anim = F690
ID = 460
pos = 0,10
postype = p1  ;p2,front,back,left,right
facing = 1
scale = 2,2
removetime = -2
ownpal = 1
sprpriority = 3

[State 500, Explod]
type = Explod
ownpal = 1
trigger1 = Time = 7
anim = F700
ID = 450
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = 30
scale = 2,2
ownpal = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 20 
flag = invisible

;--------------przemieszczenie

[State 500, normal]
type = Posadd
triggerall = Time = 17
trigger1 = Abs(p2dist x) > 110
trigger1 = backedgedist > 50
x = -80*cond(enemy(cond((enemy(0),alive),0,1)),pos x > pos x,1,-1)*facing

[State 500, obok scian]
type = Posadd
triggerall = Time = 16
trigger1 = backedgedist <= 50
y = -90

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Time = 16
trigger1 = backedgedist <= 50
value = 45

[State 500, obok przeciwnika]
type = Posadd
triggerall = Time = 15
trigger1 = Abs(p2dist x) <= 110
x = 150*cond(enemy(cond((enemy(0),alive),0,1)),pos x > pos x,1,-1)*facing

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy(cond((enemy(0),alive),0,1)), pos x > pos x
trigger2 = facing = 1 && enemy(cond((enemy(0),alive),0,1)), pos x < pos x
triggerall = time = 20

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

;----------powrt

[State 500]
type = ChangeState
trigger1 = Time = 25
trigger1 = pos y = 0
value = 0
ctrl = 1

[State 500]
type = ChangeState
trigger1 = Time = 25
trigger1 = pos y < 0 
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Kawarimi Air
[Statedef 710]
type    = A
movetype= I
physics = A
juggle  = 4
poweradd= -300
ctrl = 0
velset = 0,0
anim = 44+var(0)*10000

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,9

[State 0, Trans]
type = Trans
trigger1 = time < 20
trans = addalpha
alpha = 0,256

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 45

[State 500, PosAdd]
type = Posset
trigger1 = Time = 17
x = enemy(cond((enemy(0),alive),0,1)),pos x - 70*enemy(cond((enemy(0),alive),0,1)),facing

[State 500, Explod]
type = Explod
ownpal = 1
trigger1 = Time = 0 || Time = 17
anim = F690
ID = 460
pos = 0,10
postype = p1  ;p2,front,back,left,right
facing = 1
scale = 2,2
removetime = -2
ownpal = 1
sprpriority = 3

[State 500, Explod]
type = Explod
ownpal = 1
trigger1 = Time = 7
anim = F700
ID = 450
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
ownpal = 1
scale = 2

[State 0, Turn]
type = Turn
trigger1 = facing = -1 && enemy(cond((enemy(0),alive),0,1)), pos x > pos x
trigger2 = facing = 1 && enemy(cond((enemy(0),alive),0,1)), pos x < pos x

[State 500]
type = ChangeState
trigger1 = Time = 30
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Left Arm Attack
[Statedef 750]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 700                     ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, VarSet]
type = VarSet
trigger1 = time = 24
v = 5
value = 1

[State 0, Helper]
type = Helper
trigger1 = time = 24
helpertype = normal
name = "arm"
pos = 36,-12
ID = 760
stateno = 760
facing = 1
ownpal = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Arm
[Statedef 760]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                     ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 710                       ;Change animation (Def: no change)
poweradd = -1000                     ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
velset = 0,0

[State 0, MakeDust]
type = MakeDust
trigger1 = time>60
pos = 0,0
spacing = 3

[State 210, 2]
type = AfterImage
trigger1 = time = 60
time = -1
length = 20
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 0,0,0
palpostbright = 0,0,0
paladd = 100,100,100
palmul = .50,.50,.50
timegap = 1
framegap = 1
trans = add

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 60
movetime = 60
darken = 1
sound = S2,3
anim = 362463
unhittable = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 59
anim = F401
pos = -17,35
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 50
anim = F675
id = 675
pos = -5,0
scale = 0.5,0.4
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 3

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time > 50
id = 675
angle = -atan(vel y/vel x)*180/PI 
trans = add

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 60
trigger1 = timemod = 9,0
anim = F461
pos = -10,0
scale = 0.4,0.4
vel = 0.2,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
angle = -atan(vel y/vel x)*180/PI 
trans = add

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = S1,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = S1,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = F14,6

[State 0, VelSet]
type = VelSet
trigger1 = time = 60
x = 15
y = -1

[State 0, VelSet]
type = Veladd
trigger1 = time > 60 && pos y < -20
y = 0.3

[State 0, VelSet]
type = Veladd
trigger1 = time > 60 && pos y >= -20
y = -0.3

[State 0, VelSet]
type = VelSet
trigger1 = pos y > 0
y = 0

[State 0, VelSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -atan(vel y/vel x)*180/PI 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1.13,1.13
ignorehitpause = 1

[State 200, 1]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time > 60
attr = S, NA                     ;Attribute: Standing, Normal Attack
getpower = 0,0
damage = 200,25                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                 ;Time attacker pauses, time opponent shakes
sparkno = 636437               ;Spark anim no (Def: set above)
sparkxy = 0,0                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, -3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = 0             ;Velocity at which opponent is pushed
airguard.velocity = 0,0     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0,0           ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
trigger2 = enemy, pos x - pos x = [-10,10]
triggerall = time > 60
value = 765
ctrl = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 765
time = 2

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgedist < -10
recursive = 1
removeexplods = 1

;---------------------------------------------------------------------------
; Arm explode
[Statedef 765]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                     ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 720                       ;Change animation (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 3                  ;Set p1's sprite layering priority to 2 (in front)
velset = 0,0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0 
id = 675



[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1200
pos = 0,0
scale = .8,.8
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1070
pos = 0,0
scale = 1.3,1.3
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1330
pos = 0,0
scale = 1.3,1.3
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time < 10
trigger1 = timemod = 5,0
value = F21,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,3

[State 210, 2]
type = AfterImage
trigger1 = time = 0
time = 0
length = 15
palbright = 0,0,0
palcontrast = 160,150,150
palpostbright = 0,0,0
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.4,0.4

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,0

[State 1011, 1]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 200, 25
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
hitsound = -1, 3
guardsound = -1, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 100
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -3
air.hittime = 100
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10

[State 0, Helper]
type = Helper
trigger1 = time <= 8
;trigger1 = timemod = 2,0
helpertype = normal ;player
name = "senbon"
ID = 771
stateno = 771
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time <= 8
;trigger1 = timemod = 2,1
helpertype = normal ;player
name = "senbon"
ID = 770
stateno = 770
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time <= 8
;trigger1 = timemod = 2,0
helpertype = normal ;player
name = "senbon"
ID = 771
stateno = 771
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time <= 8
;trigger1 = timemod = 2,1
helpertype = normal ;player
name = "senbon"
ID = 770
stateno = 770
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;------------------------------------------------------------------
;Senbon
[Statedef 770]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70750 ; do podstawienia animacja poziomo (state 70700 i 70705)
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 5
value = numhelper(770)*2

[State 0, AngleDraw]
type = Angledraw
trigger1 = 1
value = 45+var(5)*20
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 20*cos(PI*var(5)/9)
y = -20*sin(PI*var(5)/9)

[State 0, 1]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time >= 1
attr = A, NP
damage = 30, 4
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 1
sparkno = -1
sparkxy = -10, 0
hitsound = 0,-1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 15
ground.velocity = 0,0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit
value = F21,3

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70752

[State 0, PlaySnd]
type = PlaySnd
trigger1 = moveguarded
value = F21,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = moveguarded
value = F21,1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70755
time = 9999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
trigger2 = backedgebodydist < -50
trigger3 = movehit
trigger4 = pos y < -200
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70755
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = pos Y >= 1
value = 70756

;------------------------------------------------------------------
;Senbon
[Statedef 771]
type = S
movetype= A
physics = N
juggle  = 3
velset = 0,0
anim = 70750 ; do podstawienia animacja poziomo (state 70700 i 70705)
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 5
value = numhelper(771)*2

[State 0, AngleDraw]
type = Angledraw
trigger1 = 1
value = 45+var(5)*18
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 20*cos(PI*var(5)/10)
y = -20*sin(PI*var(5)/10)

[State 0, 1]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time >= 1
attr = A, NP
damage = 30, 4
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 1
sparkno = -1
sparkxy = -10, 0
hitsound = 0,-1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 15
ground.velocity = 0,0
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1,5
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit
value = F21,3

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 70752

[State 0, PlaySnd]
type = PlaySnd
trigger1 = moveguarded
value = F21,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = moveguarded
value = F21,1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 70755
time = 9999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -50
trigger2 = backedgebodydist < -50
trigger3 = movehit
trigger4 = pos y < -200
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 70755
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = pos Y >= 1
value = 70756

;---------------------------------------------------------------------------
; Tail Binding
[Statedef 800]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 800                     ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = F8,0+random%5

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = animtime = 0
trigger1 = anim = 800
value = 810

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
triggerall = anim = 800
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
attr = S,NA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 0,0
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 60,10
pausetime = 0,0
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -20,-55                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7
ground.type = High      ;Low,Trip,None
ground.slide = 0
ground.hit = 0
air.hittime = 20
ground.velocity = -7,-1
air.velocity = -7,-1
ID = 799

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000
ID = 799

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = time>0
var(4) = (time-time%4)/2

;hit--------------------

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 810
trigger1 = movehit
value = 810

;guarded----------------
[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
trigger1 = var(4) = 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
trigger1 = anim = 810
trigger1 = !movehit
value = 804

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 805

;---------------------------------------------------------------------------
; Tail Binding end normal
[Statedef 804]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)                   ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 1
anim = 805

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Tail Binding end
[Statedef 805]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)                   ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time < 15
value = 805
elem = 6-var(4)

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Tail Binding hold
[Statedef 810]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0
anim = 811                        ;Set ctrl (Def: no change)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)
poweradd = -800

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = time = 0
attr = C,HP        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 0,0
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 60,10
pausetime = 0,0
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -20,-55                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7
ground.type = High      ;Low,Trip,None
ground.slide = 0
ground.hit = 0
air.hittime = 20
ground.velocity = 0,0
air.velocity = 0,0
ID = 800
p2stateno = 106015

[State 0, TargetBind]
type = TargetBind
trigger1 = numhelper(850)=0
time = 2
pos = 130,-35
facing = 1


[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "tail"
ID = 850
stateno = 850
pos = 150,-55
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1
supermovetime = 9999

[State 0, ChangeAnim]
type = Changestate
trigger1 = command = "b"
trigger1 = var(50) = 0
triggerall = var(5) = 0
triggerall = power>500
triggerall = time>1
;AI RANDOM
trigger2 = p2dist x = [100,350]
trigger2 = p2dist y = [-50,50]
trigger2 = random = [400,401+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]
value = 830

[State 0, ChangeAnim]
type = Changestate
trigger1 = time = 30
value = 820

[State 0, ChangeState]
type = ChangeState
trigger1 = numhelper(850)=0
trigger1 = time > 0
value = 804

;---------------------------------------------------------------------------
; Tail Throw
[Statedef 820]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0
anim = 815                        ;Set ctrl (Def: no change)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Left Arm Attack (Bind)
[Statedef 830]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 830                     ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, VarSet]
type = VarSet
trigger1 = time = 20
v = 5
value = 1

[State 0, Helper]
type = Helper
trigger1 = time = 20
helpertype = normal
name = "arm"
pos = 33,-14
ID = 831
stateno = 831
facing = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Arm
[Statedef 831]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                     ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 710                       ;Change animation (Def: no change)
poweradd = -500                     ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
velset = 0,0

[State 210, 2]
type = AfterImage
trigger1 = time = 60
time = -1
length = 20
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 0,0,0
palpostbright = 0,0,0
paladd = 100,100,100
palmul = .50,.50,.50
timegap = 1
framegap = 1
trans = add

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = S1,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = S1,6

[State 0, MakeDust]
type = MakeDust
trigger1 = time>60
pos = 0,0
spacing = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 60
trigger1 = timemod = 9,0
anim = F70
pos = 0,0
scale = 0.5,0.5
vel = 0.2,0
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 59
anim = F401
pos = -17,24
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 60
movetime = 60
darken = 1
sound = S2,3
unhittable = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 60
x = 10
y = -0.8

[State 0, VelSet]
type = Veladd
trigger1 = 0;time > 60
y = 0.3

[State 0, VelSet]
type = VelSet
trigger1 = 0;pos y >= 0
y = -vel y

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1.13,1.13
ignorehitpause = 1

[State 200, 1]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time > 60
attr = S, NA                     ;Attribute: Standing, Normal Attack
getpower = 0,0
damage = 200,25                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 4,5                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = 0,0                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, -3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = 0             ;Velocity at which opponent is pushed
airguard.velocity = 0,0     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0,0           ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
trigger2 = enemy, pos x - pos x = [-10,10]
triggerall = time > 60
value = 765
ignorehitpause = 1


[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 715
time = 2

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgedist < -10

;---------------------------------------------------------------------------
; Tail
[Statedef 850]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0
anim = 820                        ;Set ctrl (Def: no change)
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,12

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 820
ID = 820
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
scale = 1,1
sprpriority = 3
ownpal = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
time = 2
pos = 0,20
facing = 1

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = time = 0
attr = C,HP        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 0,0
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 0,0
pausetime = 0,0
sparkno = -1                 ;Spark anim no (Def: set above)
sparkxy = 0,0                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 0, -3                  ;Sound to play on hit
guardsound = 21, 7
ground.type = High      ;Low,Trip,None
ground.slide = 0
ground.hit = 0
air.hittime = 20
ground.velocity = 0,0
air.velocity = 0,0
ID = 800
p2facing = 1
p2stateno = 106015


[State 0, ChangeAnim]
type = Changestate
trigger1 = enemynear(0), stateno!= 106015
trigger1 = enemynear(0), stateno!= 106016
trigger2 = parent, stateno != [810,849]
trigger3 = parent,stateno = 830 && helper(831), time = 60
triggerall = time>1
value = 851

[State 0, ChangeAnim]
type = Changestate
trigger1 = parent, stateno = 820
value = 852

;---------------------------------------------------------------------------
; Tail end
[Statedef 851]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0
anim = 821                        ;Set ctrl (Def: no change)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = anim = 821
attr = C,HP        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 0,0
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 0,0
pausetime = 0,0
sparkno = -1                 ;Spark anim no (Def: set above)
sparkxy = 0,0                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 0, -3                  ;Sound to play on hit
guardsound = 21, 7
ground.type = High      ;Low,Trip,None
ground.slide = 0
ground.hit = 0
air.hittime = 20
ground.velocity = 0,0
air.velocity = 0,0
fall = 1
fall.recover = 0
ID = 800
p2stateno = 106016

[State 0, Explod]
type = removeExplod
trigger1 = time = 0
ID = 820

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 1

;---------------------------------------------------------------------------
; Tail throw
[Statedef 852]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0
velset = 0,0
anim = 820
sprpriority = 6

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = time = 0
attr = C,HP        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 0,0
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 0,0
pausetime = 0,0
sparkno = -1                 ;Spark anim no (Def: set above)
sparkxy = 0,0                ;Spark x y
hitsound = 0, -3
ID = 850                  ;Sound to play on hit
p2stateno = 106017

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
time = 1
id = 850
pos = 0,20
facing = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0, Explod]
type = removeExplod
trigger1 = time = 12
ID = 820

[State 0, VelSet]
type = VelSet
trigger1 = time = 1
x = -14
y = -0.5

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 1
y = 0.08

[State 0, ChangeAnim]
type = Changestate
trigger1 = backedgedist < 10
trigger2 = pos y > 10
value = 853

;---------------------------------------------------------------------------
; Tail end after throw
[Statedef 853]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0
velset = 0,0
anim = 821

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = time = 0
trigger1 = pos y <= 10
attr = C,HP        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 0,0
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 300,0
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1,0
guardsound = -1,0
ground.type = High
p2stateno = 106009

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = time = 0
trigger1 = pos y > 10
attr = S,NA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 0,0
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 200,0
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1,0
guardsound = -1,0
ground.type = High
ground.velocity = 8,-2
fall = 1
fall.recover = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 1

;---------------------------------------------------------------------------
; Smash
[Statedef 900]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 900                    ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = F8,0+random%5

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 2
attr = S,NA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 0,0
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 100,10
pausetime = 0,0
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -20,-55                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7
ground.type = High      ;Low,Trip,None
ground.slide = 0
ground.hittime = 50
air.hittime = 50
ground.velocity = -0.5,-10
air.velocity = -0.5,-10
ID = 900
fall = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
trigger1 = !movehit
value = 0
ctrl = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 12
trigger1 = movehit
value = S2,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 12
trigger1 = movehit
value = S3,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 12
trigger1 = movehit
value = S3,4

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 12
trigger1 = movehit
time = 30
anim = 101
sound = F19,7
pos = 38,-71
darken = 1
unhittable = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 13
trigger1 = movehit
value = 910

;---------------------------------------------------------------------------
; Smash
[Statedef 910]
type    = S                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 910                    ;Change animation (Def: no change)
poweradd = 0                     ;Power to add (Def: 0)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 1.5
y = -14

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = 2000
ID = 2000
pos = 0,-25
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = -1
removetime = 42
pausemovetime = 999
supermovetime = 999
scale = 1,1
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 5,0
value = F8,9

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 2
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A         ;A,C,S,N

[State 210, 2]
type = AfterImage
trigger1 = animelem = 2
time = 43
length = 13
palbright = 0,0,0
palcontrast = 160,150,150
palpostbright = 0,0,0
paladd = -30,-30,-30
palmul = 1,1,1
trans = add1

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !movehit
attr = C,HP       ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 0,0
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 70,10
pausetime = 0,0
sparkno = -1                 ;Spark anim no (Def: set above)
sparkxy = -20,-55                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 5, 25                 ;Sound to play on hit
guardsound = 21, 7
ground.type = High      ;Low,Trip,None
ground.slide = 0
ground.hittime = 50
air.hittime = 50
ground.velocity = 0,0
air.velocity = 0,0
ID = 900
chainID = 900
p2stateno = 106018

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
trigger1 = animelem = 2
time = 2
id = 900
pos = 25,-20

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
trigger1 = animelem = 3
time = 2
id = 900
pos = -25,-20

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
trigger1 = animelem = 4
time = 2
id = 900
pos = 25,-20

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
trigger1 = animelem = 5
time = 2
id = 900
pos = 25,20

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = time = 40
trigger1 = movehit
attr = C,HP        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 0,0
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 0,0
pausetime = 0,0
sparkno = -1                 ;Spark anim no (Def: set above)
sparkxy = -20,-55                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 0, -1                  ;Sound to play on hit
guardsound = 21, 7
ground.type = High      ;Low,Trip,None
ground.slide = 0
ground.hittime = 50
air.hittime = 50
air.velocity = -1.5,15
ID = 920
chainID = 900
p2stateno = 106019

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 30
trigger1 = movehit
value = S2,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 30
trigger1 = movehit
value = S2,5

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 41
trigger1 = movehit
value = 920

;---------------------------------------------------------------------------
; Smash
[Statedef 920]
type    = A                     ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes                                ;Commonly-used controllers:
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = -2000                     ;Power to add (Def: 0)
sprpriority = 5                 ;Set p1's sprite layering priority to 2 (in front)

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !movehit
trigger1 = time > 10
attr = S,NA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 0,0
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 1000,250
pausetime = 0,0
sparkno = -1                 ;Spark anim no (Def: set above)
sparkxy = -20,-55                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 0, -1                  ;Sound to play on hit
guardsound = 21, 7
ground.type = High      ;Low,Trip,None
ground.slide = 0
ground.hittime = 50
air.hittime = 50
air.velocity = -1,-2
fall = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 32
value = S1,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 32
value = S1,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 32
value = F15,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 32
value = F15,4

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = time = 32
anim = F1190
pos = 0,5
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
sprpriority = 5
scale = 2.,1.5
ownpal = 1
ontop = 0

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = time = 32
anim = F65
id = 930
pos = 0,15
postype = p1
bindtime = 1
removetime = 43
supermovetime = 9999
pausemovetime = 9999
sprpriority = 3
scale = 0.85,0.3
ownpal = 1
ontop = 0

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = time = 32
anim = F540
id = 540
pos = 0,20
postype = p1
bindtime = 1
removetime = 45
supermovetime = 9999
pausemovetime = 9999
sprpriority = 5
scale = 1.5,1.5
ownpal = 1
ontop = 0

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = time = 32
anim = F580
id = 580
pos = 0,13
postype = p1
bindtime = 1
removetime = 48
supermovetime = 9999
pausemovetime = 9999
sprpriority = 5
scale = 0.85,0.25
ownpal = 1
ontop = 0

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = time = 32
anim = F590
id = 590
pos = 30,-10
postype = p1
bindtime = 1
facing = 1
removetime = 56
supermovetime = 9999
pausemovetime = 9999
sprpriority = 4
scale = 1,1
ownpal = 1
ontop = 0

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = time = 32
anim = F590
id = 590
pos = -30,-10
postype = p1
bindtime = 1
facing = -1
removetime = 56
supermovetime = 9999
pausemovetime = 9999
sprpriority = 4
scale = 1,1
ownpal = 1
ontop = 0

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = time = 32
anim = F575
id = 575
pos = 0,0
vfacing = -1
postype = p1
vel = -0.5, -1.5
bindtime = 1
removetime = 21
supermovetime = 9999
pausemovetime = 9999
sprpriority = 4
scale = 1.5,1.5
ownpal = 1
ontop = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 2
value = 920

;---------------------------------------------------------------------------
;Tail Rush
[StateDef 1000]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1000
poweradd = 0
sprpriority = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
trigger2 = time = 50
trigger3 = time = 85
anim = 1011
ID = 1011
pos = -23,-52
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
sprpriority = 3
scale = 0.5,0.5
removeongethit = 1
ownpal = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 10
trigger2 = time = 50
trigger3 = time = 85
value = F19,0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,1
value = F14,0
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,9
channel = 2

[State 7500, VarSet]
type = VarSet
trigger1 = time = 0
fv = 10    ;fv = 10
value = 0

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 1010
ID = 1010
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 92
scale = 1.13,1.13
sprpriority = 2
removeongethit = 1
ownpal = 1

[State 7500, modifyExplod]
type = modifyExplod
trigger1 = time>=8
ID = 1010
trans = addalpha
alpha = (time-8)*2.78,256

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 90001
ID = 90001
pos = -33,-85
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 100
scale = 0.5,0.5
sprpriority = 2
removeongethit = 1
ontop = 0
ownpal = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time < 100
anim = 90002
ID = 90002
pos = -33,-85
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 1
scale = fvar(10), 0.5
sprpriority = 1
removeongethit = 1
ownpal = 1

[State 7500, VarAdd]
type = VarAdd
trigger1 = time%2
fv = 10
value = 0.01

[State 7500, VarSet]
type = VarSet
trigger1 = fvar(10) > 1
fv = 10    ;fv = 10
value = 1

[State 310, end]
type = ChangeState
trigger1 = command != "hold_z" && time >= 0 && time < 50 && power >= 500
trigger1 = var(50) = 0
trigger2 = time >= 0 && time < 50 && power >= 500 && random = [0,100-var(49)*(var(49))/100] 
trigger2 = var(50) = 1
value = 1020
ctrl = 1

[State 310, end]
type = ChangeState
trigger1 = command != "hold_z" && time >= 50 && time < 100 && power >= 1000
trigger1 = var(50) = 0
trigger2 = time >= 50 && time < 100 && power >= 1000 && random = [0,100-var(49)*(var(49))/100]
trigger2 = var(50) = 1
value = 1030
ctrl = 1

[State 310, end]
type = ChangeState
trigger1 = time >= 0 && time < 50 && power < 1000
value = 1020
ctrl = 1

[State 310, end]
type = ChangeState
trigger1 = time >= 50 && time < 100 && power < 1500
value = 1030
ctrl = 1

[State 310, end]
type = ChangeState
trigger1 = time >= 100 && power >= 1500
value = 1040
ctrl = 1
;---------------------------------------------------------------------------
;Tail Rush level 1
[StateDef 1020]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1030
poweradd = -500
sprpriority = 1

[State 200, PlaySnd]
type = StopSnd
trigger1 = time = 0
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,3
channel = 2

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1010

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 90001

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = 1005
ID = 1005
pos = -38,3
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1.13,1.13
sprpriority = 2
removeongethit = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal ;player
name = "tail"
ID = 1020
stateno = 1025
pos = -10,0
postype = p1    ;p2,front,back,left,right
facing = 1
supermove
pausemove

[State 811, end]
type = ChangeState
trigger1 = time > 5
trigger1 = numhelper(1020) = 0
value = 1031

;---------------------------------------------------------------------------
;Tail
[StateDef 1025]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1025
poweradd = 0
sprpriority = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 0
trigger1 = root, time > 130
trigger2 = root, stateno != 1020
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 65

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -50
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = F8,0+random%5

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = animelem = 1
trigger2 = animelem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
getpower = 0,0
damage = 15,5               ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,2                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -12,-40                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 40             ;Time opponent is in hit state
ground.velocity = -6,-2            ;Velocity at which opponent is pushed
airguard.velocity = -1,-2.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -6,-2         ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 40

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1190
ID = 1005
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 4
removeongethit = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1015
ID = 1015
pos = -4,3
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.5,0.7
sprpriority = 2
removeongethit = 1
ownpal = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 1025

;---------------------------------------------------------------------------
;Tail Rush level 2
[StateDef 1030]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1030
poweradd = -1000
sprpriority = 1

[State 200, PlaySnd]
type = StopSnd
trigger1 = time = 0
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,3
channel = 2

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1010

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 90001

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = 1005
ID = 1005
pos = -38,3
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1.13,1.13
sprpriority = 2
removeongethit = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal ;player
name = "tail"
ID = 1030
stateno = 1035
pos = 0,0
postype = p2    ;p2,front,back,left,right
facing = -1
supermove
pausemove

[State 811, end]
type = ChangeState
trigger1 = time > 5
trigger1 = numhelper(1030) = 0
value = 1031

;---------------------------------------------------------------------------
;Tail Rush level 2 end
[StateDef 1031]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1031
poweradd = 0
sprpriority = 1

[State 811, end]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Tail
[StateDef 1035]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1035
poweradd = 0
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = F8,0+random%5

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

;etap I

[State 811, end]
type = ChangeState
trigger1 = animtime = 0
trigger1 = prevstateno != 1035
value = 1035

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 1
trigger2 = animelem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
getpower = 0,0
damage = 55,15                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 4,5                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -12,-65                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 40             ;Time opponent is in hit state
ground.velocity = -2,-3.5             ;Velocity at which opponent is pushed
airguard.velocity = -1,-2.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -2,-3.5          ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 40

;etap II

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = prevstateno = 1035

[State 811, end]
type = ChangeState
trigger1 = animtime = 0
trigger1 = prevstateno = 1035
value = 1036

[State 0, DestroySelf]
type = DestroySelf
trigger1 = parent, stateno != 1030
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
x = -20*facing+enemynear, pos x
y = 3

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
persistent = 0 
anim = F1190
ID = 1005
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1,1
sprpriority = 4
removeongethit = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = 1015
ID = 1015
pos = -4,3
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.5,0.7
sprpriority = 2
removeongethit = 1
ownpal = 1


;---------------------------------------------------------------------------
;Tail
[StateDef 1036]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1036+cond(prevstateno=1036,1,0)
poweradd = 0
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = F8,0+random%5

[State 0, TargetState]
type = TargetState
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(30) = 0
trigger1 = movehit
value = 106000

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 3

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = animelem = 1
trigger2 = animelem = 2
triggerall = anim = 1036
attr = S, NA                     ;Attribute: Standing, Normal Attack
getpower = 0,0
damage = 80,35               ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,0                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -12,-65                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 40             ;Time opponent is in hit state
ground.velocity = 0,-4             ;Velocity at which opponent is pushed
airguard.velocity = -1,-2.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0,-4          ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 40

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
triggerall = anim = 1037
attr = S, NA                     ;Attribute: Standing, Normal Attack
getpower = 0,0
damage = 80,7                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,6                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -12,-65                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 40             ;Time opponent is in hit state
ground.velocity = 0,-6             ;Velocity at which opponent is pushed
airguard.velocity = -1,-2.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0,-6          ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 40
fall = 1
fall.recover = 0

;etap I

[State 811, end]
type = ChangeState
trigger1 = animtime = 0
trigger1 = prevstateno != 1036
value = 1036

;etap II

[State 0, DestroySelf]
type = DestroySelf
trigger1 = parent, stateno != 1030
trigger2 = animtime = 0
trigger2 = prevstateno = 1036
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = prevstateno = 1036


[State 0, PosSet]
type = PosSet
trigger1 = time = 0
x = enemynear, pos x+20*facing
y = 3

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
persistent = 0 
anim = F1190
ID = 1005
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1,1
sprpriority = 4
removeongethit = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1015
ID = 1015
pos = -4,3
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.5,0.7
sprpriority = 2
removeongethit = 1
ownpal = 1

;---------------------------------------------------------------------------
;Tail Rush level 3
[StateDef 1040]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1030
poweradd = -1500
sprpriority = 1

[State 200, PlaySnd]
type = StopSnd
trigger1 = time = 0
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S2,6
channel = 2

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1010

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 90001

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = 1005
ID = 1005
pos = -38,3
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1.13,1.13
sprpriority = 2
removeongethit = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal ;player
name = "tail"
ID = 1040
stateno = 1045
pos = 0,0
postype = p2    ;p2,front,back,left,right
facing = -1
supermove
pausemove

[State 811, end]
type = ChangeState
trigger1 = helper(1040),stateno = 1049
trigger2 = numhelper(1040) = 0
trigger2 = time > 10
value = 1041

;---------------------------------------------------------------------------
;Tail Rush level 3 end
[StateDef 1041]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1032
poweradd = 0
sprpriority = 1

[State 811, end]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Tail
[StateDef 1045]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1040
poweradd = 0
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F8,0+random%5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
getpower = 0,0
damage = 50,25                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2,0                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -12,-30-time*8                ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 40             ;Time opponent is in hit state
ground.velocity = 0,-5.5            ;Velocity at which opponent is pushed
airguard.velocity = -3,-1     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0,-5.5          ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 40
fall = 1
fall.recover = 0

[State 811, end]
type = ChangeState
trigger1 = time = 9
value = 1046

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
x = enemynear, pos x
y = 3

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1015
ID = 1015
pos = -4,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.5,0.7
sprpriority = 2
removeongethit = 1
ownpal = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1190
ID = 1005
pos = -4,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1.5,1.5
sprpriority = 6
removeongethit = 1

;---------------------------------------------------------------------------
;Tail
[StateDef 1046]
movetype= A
juggle  = 1
ctrl = 0
poweradd = 0
sprpriority = 1

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = animelem = 4
attr = C, HP                   ;Attribute: Standing, Normal Attack
getpower = 0,0
damage = 100,50               ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 4,5                 ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -12,-110               ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 24, 3                  ;Sound to play on hit
guardsound = 21, 7                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 40             ;Time opponent is in hit state
ground.velocity = 0,-5.5            ;Velocity at which opponent is pushed
airguard.velocity = -3,-1     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0,-5.5          ;X-velocity at which opponent is pushed,
                                 ;Y-velocity at which opponent is pushed
air.hittime = 40
fall = 1
fall.recover = 0
ID = 1040
p2sprpriority = 2

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
value = 1047

[State 0, ChangeState]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;Tail
[StateDef 1047]
movetype= A
juggle  = 1
ctrl = 0
poweradd = 0
sprpriority = 1
anim = 1041

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 820
ID = 820
pos = 0,-110
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
scale = 1,1
sprpriority = 3
ownpal = 1
supermovetime = 999

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 60
movetime = 60
pos = 0,-110
darken = 1
unhittable = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = time = 0
time = 60
id = 1040
pos = 0,-85

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = F8,0+random%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = F8,0+random%5

[State 0, Explod]
type = modifyExplod
trigger1 = time = [60,67]
ID = 820
pos = 0,-100+(time-60)*10
postype = p1  ;p2,front,back,left,right
facing = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = time = [60,67]
time = 1
id = 1040
pos = 0,-75+(time-60)*10

[State 0, TargetState]
type = TargetState
trigger1 = time = 68
value = 106020

[State 0, Explod]
type = removeExplod
trigger1 = time = 68
ID = 820

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 65
anim = F1190
ID = 1005
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1.5,1.5
sprpriority = 6
removeongethit = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 65
anim = 1015
ID = 1015
pos = -20,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 65
anim = 1015
ID = 1015
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.8,0.8
sprpriority = 2
removeongethit = 1
ownpal = 1

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = time = 65
anim = F540
id = 580
pos = 0,0
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
scale = 1.8,1.5
ontop = 0

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 65
anim = 1015
ID = 1015
pos = 20,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 65
value = S1,3

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 68
value = 1048

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 65
value = S1,3

;---------------------------------------------------------------------------
;Tail
[StateDef 1048]
movetype= A
juggle  = 1
ctrl = 0
poweradd = 0
sprpriority = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = time%30 = 0
time = 30
freq = 90
ampl = -2
phase = 75

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time%30 = 0
value = S1,5
volume = 150
channel = 3

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 4
value = 5*(ABS(rootdist x)+15)*0.002

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = fvar(4) <= 5
fv = 5
value = 800/((ABS(rootdist x)+15)*0.2)

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = fvar(4) <= 5
fv = 4
value = 5

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = fvar(4) > 5
value = -7
kill = 0

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = fvar(4) <= 5
value = -fvar(5)
kill = 0

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = cond(pos x > (parent,pos x),1,-1)*facing = -1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -fvar(4)

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 2,0
anim = 355
ID = 355
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1.3,1
sprpriority = 2
ownpal = 1

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 6,0
anim = F570
id = 570
pos = 0,0
postype = p1
bindtime = 1
removetime = -2
vel = 0.7,-2
accel = -0.1,0.15
sprpriority = 1
scale = 0.5,0.5
ownpal = 1

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 6,3
anim = F575
id = 570
pos = 0,0
postype = p1
bindtime = 1
removetime = -2
vel = 0.7,-2
accel = -0.1,0.15
sprpriority = 1
scale = 0.5,0.5
ownpal = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
time = 1
id = 1040
pos = 0,50

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 100
trigger3 = rootdist x = [15,20]
trigger2 = parent, stateno != 1040
value = 1049

;---------------------------------------------------------------------------
;Tail
[StateDef 1049]
movetype= A
juggle  = 1
ctrl = 0
poweradd = 0
sprpriority = 1

[State 0, PlaySnd]
type = stopSnd
trigger1 = time = 0
channel = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,3

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 1
freq = 90
ampl = -2
phase = 75

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1190
ID = 1005
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1.5,1.5
sprpriority = 6
removeongethit = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1015
ID = 1015
pos = -20,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F540
id = 580
pos = 0,0
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
scale = 1.8,1.5
ownpal = 1
ontop = 0

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1015
ID = 1015
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.8,0.8
sprpriority = 2
removeongethit = 1
ownpal = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 1015
ID = 1015
pos = 20,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State 0, TargetState]
type = TargetState
trigger1 = time = 1
value = 106021

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 2

;---------------------------------------------------------------------------
;Destroy Salamander
[StateDef 1100]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 1100
sprpriority = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 200, 1]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = !time
attr = S, NA                ;Attribute: Standing, Normal Attack
getpower = 0,0
damage = 60,7                ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default                                 ;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0,3                ;Time attacker pauses, time opponent shakes
sparkno = 0+random%4                 ;Spark anim no (Def: set above)
sparkxy = -50,-30               ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 5, 7                ;Sound to play on hit
guardsound = 21, 7               ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 30            ;Time opponent is in hit state
ground.velocity = -8.5,-5             ;Velocity at which opponent is pushed
airguard.velocity = -5,-1.5     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -8.5,-5          ;X-velocity at which opponent is pushed,
fall = 1                                 ;Y-velocity at which opponent is pushed
air.hittime = 0
p2stateno = 106022


[State 1210, end]
type = changeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Destroy Kuroari
[StateDef 1200]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1030
poweradd = 0
sprpriority = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,3
channel = 2

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = 1005
ID = 1005
pos = -38,3
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1.13,1.13
sprpriority = 2
removeongethit = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal ;player
name = "tail"
ID = 1210
stateno = 1210
pos = 100,0
postype = p1    ;p2,front,back,left,right
facing = 1
supermove
pausemove

[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 2
time = 30
pos = -40,0
darken = 1
unhittable = 0

[State 811, end]
type = ChangeState
trigger1 = time > 5
trigger1 = numhelper(1210) = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Tail
[StateDef 1210]
type = S
movetype= I
physics = S
juggle  = 1
ctrl = 0
anim = 1200
poweradd = 0
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,3

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 45
freq = 90
ampl = -2
phase = 75

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = 1015
ID = 1015
pos = -20,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F540
id = 580
pos = 0,0
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
scale = 1.8,1.5
ownpal = 1
ontop = 0

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = 1015
ID = 1015
pos = 20,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -20

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal ;player
name = "kuroari"
ID = 12321
stateno = 1220
pos = 10,-20
postype = p1    ;p2,front,back,left,right
facing = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;Kuroari
[StateDef 1220]
type = S
movetype= I
physics = A
juggle  = 1
ctrl = 0
anim = 1220
poweradd = 0
sprpriority = 2
velset = (frontedgedist)/40,-12

[State 0, VelSet]
type = VelSet
trigger1 = vel x < 5
x = 5

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 60

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgedist < -15

;---------------------------------------------------------------------------
;Ground Wave
[StateDef 1300]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1300
poweradd = -500
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,4
channel = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F15,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F15,4

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1010

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 90001

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = time = 9
anim = F550
id = 550
pos = -45,0
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 2
scale = 2,2
ownpal = 1

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = time = 9
anim = F65
id = 930
pos = -45,3
postype = p1
bindtime = 1
removetime = -2
sprpriority = 1
scale = 0.85,0.3
ownpal = 1
ontop = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,3

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = [9,34]
trigger1 = timemod = 5,4
anim = 1015
ID = 1015
pos = -42+37*(time-9)/5,4
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.6+0.06*(time-9)/5,0.6+0.07*(time-9)/5
sprpriority = 3
removeongethit = 0
ownpal = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = [14,34]
trigger1 = timemod = 5,4
anim = 1015
ID = 1015
pos = -42-37*(time-9)/5,4
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.6+0.06*(time-9)/5,0.6+0.07*(time-9)/5
sprpriority = 3
removeongethit = 0
ownpal = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = [9,34]
trigger1 = timemod = 5,4
anim = F1190
ID = 1015
pos = -42+37*(time-9)/5,4
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7+0.07*(time-9)/5,0.7+0.07*(time-9)/5
sprpriority = 5
removeongethit = 0
ownpal = 1

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = [14,34]
trigger1 = timemod = 5,4
anim = F1190
ID = 1015
pos = -42-37*(time-9)/5,4
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7+0.07*(time-9)/5,0.7+0.07*(time-9)/5
sprpriority = 5
removeongethit = 0
ownpal = 1

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = timemod = 5,0
attr = S,NA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 0,0
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
priority = 4,Hit   ;Hit,Miss,Dodge
damage = 100,30
pausetime = 0,0
sparkno = -1                 ;Spark anim no (Def: set above)
sparkxy = -20,-30               ;Spark x y
                                ;Y-offset for the spark rel. to p1
hitsound = 5, 14                  ;Sound to play on hit
guardsound = 6, 0
ground.type = High      ;Low,Trip,None
ground.slide = 0
ground.hittime = 50
air.hittime = 50
air.velocity = 0,-5
airguard.velocity = 0,-4
ground.velocity = 0,-8
fall = 1


[State 811, end]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Destroy Hiruko
[StateDef 1900]
type = A
movetype= I
physics = A
juggle  = 1
velset = -3,-5
ctrl = 0
anim = 10045
sprpriority = -1
poweradd = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = life = 0
value = 5050

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 0
value = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 15

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 5
value = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = player
name = "hiruko"
ID = 1900
stateno = 5050
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,5

;---------------------------------------------------------------------------
;Destroy Hiruko - Hiruko body
[StateDef 1950]

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*6.4,time*6.4

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 40
;---------------
[Statedef 109990]
type = A
movetype= H
physics = N
velset = 0,0
anim = 5030

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0


[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5030
value = 5030+var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 109991


;---------------------------------------------------------------------------
[Statedef 109991]
type = A
movetype= H
physics = N
anim = 5000

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0


[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
trigger2 = timemod = 6,0
anim = F1391
ID = 380
pos = -20,-25
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
ontop = 0
angle = atan(vel y/vel x)*180/PI -30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F8,9

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F14,6

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5000
value = 5000+var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 1026, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 109992

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;---------------------------------------------------------------------------
[Statedef 109992]
type = A
movetype= H
physics = N
anim = 5030

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5030
value = 5030+var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time= 1
value = F7,1

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,2

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F15,2

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F15,4

[State 0, Turn]
type = Turn
trigger1 = frontedgedist<backedgedist
trigger1 = time = 0

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 1
anim = F1190
pos = -15,-25
postype = p1
facing = 1
scale = 1,1
sprpriority = 4
angle = 90

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 1
anim = F1080
pos = -15,-25
postype = p1
facing = 1
sprpriority = -1
angle = 270
scale = 0.7,0.7

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 1
anim = F1200
pos = -15,-25
postype = p1
facing = -1
sprpriority = -1
scale = 1.1,1.1

[State 1027, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 109993

;---------------------------------------------------------------------------
[Statedef 109993]
type = A
movetype= H
physics = N
anim = 5060

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = 1
Value = -((ATan(vel y/vel x))*(180.0/PI))

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5060
value = 5060+var(0)*10000


[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5050]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
trigger1 = var(0) != 0
value = 5050+var(0)*10000

[State 1028, Anim 5052]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5052]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
trigger1 = var(0) != 0
value = 5052+var(0)*10000

[State 1028, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
trigger1 = var(0) != 0
value = 5060+var(0)*10000

[State 1028, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
trigger1 = var(0) != 0
value = 5062+var(0)*10000

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;---------------------------------------------------------------------------
[Statedef 109994 ]
type    = A
movetype= H
physics = N
anim = 100022

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = var(0) != 0
value = 100022 + var(0)*10000

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = 1
value = time*20

[State 212, Velocity]
type = HitVelSet
trigger1 = Time = 1
x = 1
y = -1

[State 212, Gravity]
type = VelAdd
trigger1 = time > 1 && 1
y = .3

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -20

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
trigger2 = timemod = 6,0
anim = F1391
ID = 380
pos = -20,-25
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
ontop = 0
angle = atan(vel y/vel x)*180/PI -30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F8,9

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F14,6

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 109992

[State 212, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5050
;---------------------------------------------------------------------------
;Kagemane: Nadanie Vara
[Statedef 104099]
type = S
physics = S
sprpriority = 0

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 46  
value = 1

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 5000+var(0)*10000
value = 5000+var(0)*10000

;ANTI CLONE - CLONE DESTROY -----
[State 0, VarSet]
type = VarSet
trigger1 = !ishelper
v = 39
value = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(39) = 0
triggerall = !ishelper(30000)
triggerall = !ishelper(1900)

[State 0, ChangeState]
type = ChangeState
triggerall = time = 5
trigger1 = !ishelper
value = 104000

[State 0, ChangeState]
type = ChangeState
triggerall = time = 5
trigger1 = ishelper(30000)
value = 30000

;---------------------------------------------------------------------------
;Opponent state (Wall bounce)
[Statedef 106009]
type = A
movetype= H
physics = N
velset = 0,-6
anim = 5060

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = 1
Value = -((ATan(vel y/vel x))*(180.0/PI))

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time= 0
value = F7,1

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,2

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F15,2

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F15,4

[State 0, Turn]
type = Turn
trigger1 = frontedgedist<backedgedist
trigger1 = time = 0

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 0
anim = F1190
pos = -2,-25
postype = p1
facing = 1
scale = 1,1
sprpriority = 4
angle = 90

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 0
anim = F1080
pos = -2,-25
postype = p1
facing = 1
sprpriority = -1
angle = 270
scale = 0.7,0.7

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 0
anim = F1200
pos = 0,-25
postype = p1
facing = -1
sprpriority = -1
scale = 1.1,1.1

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5060
value = 5060+var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 0, ScreenBound]
type = ScreenBound
trigger1 =1
value = 0
movecamera = 0,0

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5050]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
trigger1 = var(0) != 0
value = 5050+var(0)*10000

[State 1028, Anim 5052]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5052]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
trigger1 = var(0) != 0
value = 5052+var(0)*10000

[State 1028, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
trigger1 = var(0) != 0
value = 5060+var(0)*10000

[State 1028, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
trigger1 = var(0) != 0
value = 5062+var(0)*10000

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Opponent State (Tail bind)
[StateDef 106015]
anim = 5000+var(0)*10000
velset = 0,0
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

;---------------------------------------------------------------------------
;Opponent State (uwolnienie)
[StateDef 106016]
velset = 0,2

[State 1210, end]
type = SelfState
trigger1 = 1
value = 5050

;---------------------------------------------------------------------------
;Opponent State (lot)
[StateDef 106017]
velset = 14,-0.5
physics = N
sprpriority = 2
anim = 5002+var(0)*10000

[State 0, Turn]
type = Turn
trigger1 = time = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 1
y = 0.08

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
trigger2 = timemod = 6,0
anim = F1391
ID = 380
pos = -20,-25
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = -1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
ontop = 0
angle = 25

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F8,9

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F14,6

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

;---------------------------------------------------------------------------
;Opponent State (smash)
[StateDef 106018]
physics = A
type = A
movetype = H
anim = 5000+var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = time = 0
time = 30
length = 15
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 0,0,0
palpostbright = 0,0,0
paladd = 100,100,100
palmul = .50,.50,.50
timegap = 1
framegap = 1
trans = add

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

;---------------------------------------------------------------------------
;Opponent State (smash) end
[StateDef 106019]
physics = A
type = A
movetype = H
anim = 5090+var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = time = 0
time = 18
length = 15
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 0,0,0
palpostbright = 0,0,0
paladd = 100,100,100
palmul = .50,.50,.50
timegap = 1
framegap = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
y = 9

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = time = 16
y = -3
x = 0

[State 5100, 1]
type = Explod
ownpal = 1
trigger1 = time = 16
anim = F61
id = 61
ownpal = 1
postype = p1
sprpriority = 7
scale = 1.5,1.5
pos = 0,20

[State 5100, 1]
type = Explod
ownpal = 1
trigger1 = time = 16
anim = F310
id = 310
ownpal = 1
postype = p1
sprpriority = 7
scale = 1,0.5
pos = 0, 20

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 16
value = F7, 2


;---------------------------------------------------------------------------
;Opponent State (underground)
[StateDef 106020]
physics = S
type = S
movetype = H
anim = 5000

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

;---------------------------------------------------------------------------
;Opponent State (underground) end
[StateDef 106021]
physics = S
type = S
movetype = H
velset = 0,-10

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 1210, end]
type = SelfState
trigger1 = time = 1
value = 5050

;---------------------------------------------------------------------------
;Opponent State (destroy Salamander)
[StateDef 106022]
movetype = H

[State 0, VarSet]
type = ParentVarset
trigger1 = time = 0
trigger1 = ishelper(50130)
v = 10
value = 1000

[State 1210, end]
type = destroyself
trigger1 = time = 1
trigger1 = ishelper(50130)
value = 5000

[State 1210, end]
type = SelfState
trigger1 = time = 0
trigger1 = !ishelper(50130)
value = 5000

;---------------------------------------------------------------------------
;Opponent State (Iron Forest)
[StateDef 106023]
movetype = H

[State 1210, end]
type = SelfState
trigger1 = time = 0
value = 5000

;---------------------------------------------------------------------------
;Opponent state (rope bind)
[StateDef 106024]
type = S
movetype= H
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 5000
poweradd = 0
sprpriority = 1

[State 0, Gravity]
type = Gravity
trigger1 = pos y < 0

[State 0, PosSet]
type = PosSet
trigger1 =  pos y >= 0
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5000 + var(0)*10000

[State 1210, end]
type = SelfState
trigger1 = time = 200
value = 0
ctrl = 1

;---------------------- Integer variable list ----------------------

; var(0):= 191, 192, 1900, 30000, 30100, 30105
; var(1):= -2, 30650
; var(2):= -2, 30300, 30350, 30390, 30800, 30900, 31000
; var(3):= 1200, -2, 130, 30800, 30900, 31000, 31010, 31020, 31025, 31099, 31199
; var(4):= 800, -2, 130, 30758, 30800, 30900, 31000, 31010, 31020, 31025, 31099, 31199
; var(5):= 750, 770, 771, 830
; var(9):= 2000, 3100, 3105, 3150, 3155, 30000, 30105, 30106
;var(10):= 106022, -2, 77000, 78000, 77003
;var(11):= 31251, 31270
;var(12):= 30810, 31270
;var(13):= 30310, 30320, 30330, 30340, 30360, 30365, 30370, 30375, 30380, 30385, 30410, 30420
;var(14):= 77000, 78000, 77001, 78001, 77003
;var(15):= 60
;var(18):= 70500
;var(19):= 31505
;var(20):= 5900, 104097, 104098
;var(21):= 5900
;var(22):= 5900
;var(23):= 5900
;var(30):= -2, 5900, 106000
;var(35):= -2, 5900, 106025, 106026, 106027, 106028
;var(36):= -2
;var(39):= 104099, -2, 0, 5000, 5001, 5010, 5011, 5020, 5030, 5035, 5040, 5050, 5070, 5071, 5080, 5081, 5100, 5101, 5110
;var(40):= -2, 105251, 105252, 105253, 105254
;var(46):= 104099, -2, 104000, 104001
;var(48):= -1
;var(49):= -1
;var(50):= -1
;var(51):= -2, 5900, 70300, 109910, 109911, 109912, 109913, 109914, 109915
;var(52):= -2, 70300, 109920, 109921, 109922, 109923, 109924, 109925
;var(53):= -2, 70300, 109930, 109931, 109932, 109933, 109934, 109935
;var(54):= -2, 70300, 109940, 109941, 109942, 109943, 109944, 109945
;var(55):= -2, 70300, 109950, 109951, 109952, 109953, 109954, 109955
;var(56):= -2, 70300, 109960, 109961, 109962, 109963, 109964, 109965
;var(57):= -2, 70300, 109970, 109971, 109972, 109973, 109974, 109975

;---------------------- Float variable list ----------------------

; fvar(1):= 5900
; fvar(4):= 1048, 30760
; fvar(5):= 1048, 30760, 31510, 31520, 31550
; fvar(6):= 30760
;fvar(10):= 1000, 77000, 78000
;fvar(11):= 77000, 78000
;fvar(12):= 77003
;fvar(13):= 60, 30760, 30810, 31270
;fvar(14):= 60, 30760, 30810, 31270
;fvar(15):= 60, 2400, 3400, 30760, 30810, 31270



;---------------------------------------------------------------------------
[Statedef -2]

;Pasywne ladowanie piasku

[State 0, VarAdd]
type = VarAdd
trigger1 = timemod = 15,0
trigger1 = var(19) = 0
trigger2 = timemod = 4,0
trigger2 = var(19) = 1
triggerall = ishelper(30000)
triggerall = stateno != [30100,30107]
triggerall = stateno != [5000,5299]
triggerall = stateno != [40000,199999]
v = 2
value = 1

[State 0, VarAdd]
type = Varset
trigger1 = var(2)>999
triggerall = ishelper(30000)
v = 2
value = 999

[State 0, VarRandom]
type = VarRandom
trigger1 = timemod = 10,0
triggerall = ishelper(30000)
v = 3
range = 0,60

[State 0, VarRandom]
type = VarRandom
trigger1 = timemod = 10,0
triggerall = ishelper(30000)
v = 4
range = 0,60

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 50,10
trigger1 = var(19) = 0
trigger2 = timemod = 20,10
trigger2 = var(19) = 1
triggerall = ishelper(30000)
triggerall = stateno != [30100,30107]
triggerall = stateno != [5000,5299]
triggerall = stateno != [40000,199999]
anim = 30131
ID = 30131
pos = -30+random%60,-var(4)
facing = cond(random%2=0,-1,1)
vel = -0.3,-0.5
accel = 0,0.02
postype = p1
bindtime = 1
removetime = 56
scale = 0.5,0.5
sprpriority = 2
ownpal = 1
ontop = 0
supermovetime = 9999

[State -2, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 50,10
trigger1 = var(19) = 0
trigger2 = timemod = 20,10
trigger2 = var(19) = 1
triggerall = ishelper(30000)
triggerall = stateno != [30100,30107]
triggerall = stateno != [5000,5299]
triggerall = stateno != [40000,199999]
anim = 30131
ID = 30131
pos = -30+random%60,-var(3)
facing = cond(random%2=0,1,-1)
vel = 0.3,-0.5
accel = 0,0.02
postype = p1
bindtime = 1
removetime = 56
scale = 0.5,0.5
sprpriority = 2
ownpal = 1
ontop = 0
supermovetime = 9999

;-----------------------------------




[State 0, PlaySnd]
type = PlaySnd
trigger1 = random = 999
triggerall = Alive
triggerall = life > 0
triggerall = !matchover
triggerall = !win
triggerall = !lose
triggerall = !drawgame
triggerall = var(0) = 0
triggerall = stateno != [170,199]
triggerall = stateno != [5000,5300]
triggerall = stateno != [100000,109999]
value = S2,3+random%9
volume = 256
channel = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = random = 999
triggerall = Alive
triggerall = life > 0
triggerall = !matchover
triggerall = !win
triggerall = !lose
triggerall = !drawgame
triggerall = var(0) != 0
triggerall = stateno != [170,199]
triggerall = stateno != [5000,5300]
triggerall = stateno != [100000,109999]
value = S4,4+random%5
volume = 256
channel = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = random = 998
triggerall = Alive
triggerall = life > 0
triggerall = !matchover
triggerall = !win
triggerall = !lose
triggerall = !drawgame
triggerall = var(0) != 0
triggerall = stateno != [170,199]
triggerall = stateno != [5000,5300]
triggerall = stateno != [100000,109999]
value = S4,16+random%9
volume = 256
channel = 2

;SMIERC OSTATECZNA
[State 0, SMIERC OSTATECZNA]
type = ChangeState
triggerall = prevstateno = 5150
triggerall = stateno != 5150
trigger1 = alive = 0
trigger2 = life = 0
value = 5150
ctrl = 0

[State 0, STANIE W POWIETRZU]
type = SelfState
trigger1 = stateno = [0,39]
trigger2 = stateno = 100
triggerall = pos y < 0
value = 50

[State 0, STANIE POD ZIEMIA]
type = PosSet
trigger1 = stateno = [0,39]
trigger2 = stateno = 100
triggerall = pos y > 0
y = 0

[State 0, OGRANICZENIE WYSOKOSCI]
type = PosSet
trigger1 = pos y < -500
y = -500

;----Arena Uchiha-----------

[State 0, PosSet]
type = PosSet
trigger1 = pos y < -300
triggerall = helper(70003), var(10) = 0
triggerall = StageVar(info.name) = "U"
y = -300

;ANTI CLONE - CLONE DESTROY -----
[State 0, VarSet]
type = VarSet
trigger1 = !ishelper
v = 39
value = 1

[State 0, DestroySelf]
type = DestroySelf
triggerall = var(39) = 0
triggerall = !ishelper(30000)
triggerall = !ishelper(1900)
trigger1 = stateno = [0,99]
trigger2 = stateno = [5000,5100]
trigger3 = stateno = [100000,199999]
;--------------------------------

[State 0, toxic guard]
type = VarSet
trigger1 = var(30) != 170
var(30) = 170


;Hiruko-----------------------------

[State 0, rozmiar]
type = AngleDraw
trigger1 = var(0) = 0
trigger1 = !ishelper
trigger2 = ishelper(1900)
scale = 1.13,1.13
value = 0
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = var(0) = 0
trigger1 = life<lifemax
trigger1 = var(1) < 800
var(1) = lifemax-life

[State 0, LifeSet]
type = LifeSet
trigger1 = var(1) < 800
trigger1 = var(0) = 0
trigger1 = life<lifemax
trigger1 = !ishelper
value = Lifemax

[State 0, VarAdd]
type = VarSet
trigger1 = var(1) > 800
trigger2 = var(0) !=0
var(1) = 800

;>>>>>>>>>>>>Kazekage<<<<<<<<<<<<<<<<<

[State 0, Remove Wings]
type = RemoveExplod
trigger1 = stateno != 31500
trigger1 = stateno != 31505
triggerall = numhelper(31500) != 0
ID = 31500

[State 0, anty toxic]
type = NotHitBy
trigger1 = ishelper(30000)
triggerall = stateno != 30700
value = C,HP

[State 0, stop terkot]
type = StopSnd
triggerall = ishelper(30000)
trigger1 = stateno != 30020
trigger1 = stateno != 130
trigger1 = stateno != 30500
channel = 8

[State 0, stop szum]
type = StopSnd
triggerall = ishelper(30000)
trigger1 = stateno != 30900
trigger1 = stateno != 31000
trigger1 = stateno != 31500
channel = 3

[State -1,Kazekage come back]
type = selfState
trigger1 = parent, stateno = 3600
triggerall = stateno != [30120,31999]
triggerall = stateno != [5000,5900]
triggerall = power != 0
triggerall = ishelper(30000)
value = 30600

[State -1,Kazekage block]
type = ChangeState
trigger1 =  parent, command = "holdc"
triggerall = stateno != 130
trigger1 = parent, stateno = [120,155]
triggerall = stateno = 30000 || stateno = 30020
triggerall = ishelper(30000)
value = 130

[State 0, screen block]
type = ScreenBound
trigger1 = ishelper(30000)
value = 1
movecamera = 1,0

[State 0, Kazekage life]
type = Varadd
trigger1 = ishelper(30000) && var(10) < 1000
v = 10
value = gethitvar(damage)*0.5

[State 0, Kazekage]
type = Varset
trigger1 = ishelper(30000) && var(10) > 999
v = 10
value = 2000

[State 0, Kazekage]
type = Varset
trigger1 = ishelper(30000) && var(2) < 0
v = 2
value = 0

[State -1,Kazekage destroy]
type = SelfState
trigger1 =  var(10) > 999
triggerall = ishelper(30000)
triggerall = stateno != 30100
triggerall = stateno != 30105
triggerall = stateno != 30106
trigger2 = root, life = 0
value = 30100

[State 0, dead]
type = Explod
ownpal = 1
trigger1 = numexplod(30105) = 0
trigger1 = helper(30000),stateno = 30105
trigger1 = helper(30000),var(10) > 999
trigger1 = !ishelper
anim = 30106
ID = 30105
pos = ((helper(30000),pos x)-pos x)*facing,((helper(30000),pos y)-pos y)
postype = p1
facing = facing*helper(30000),facing
vfacing = 1
removetime = -1
ownpal = 1


;-------------------------------------------------------------------------
;===================[ Liczniki, Okrg i Fatality ]========================
;-------------------------------------------------------------------------
[State -2, Arrow Down]
type = Explod
ownpal = 1
trigger1 = stateno = 70851
trigger2 = prevstateno = 70851 && time < 2
triggerall = command = "holddown"
triggerall = numexplod(1600) = 0
anim = F1600
ID = 1600
pos = cond(pos y = 0,0,5),-25
postype = p1
facing = 1
vfacing = 1
vel = 0,2 
accel = 0,-0.1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Up]
type = Explod
ownpal = 1
trigger1 = stateno = 70851
trigger2 = prevstateno = 70851 && time < 2
triggerall = command = "holdup"
triggerall = numexplod(1601) = 0
anim = F1601
ID = 1601
pos = cond(pos y = 0,0,5),-45
postype = p1
facing = 1
vfacing = 1
vel = 0,-2 
accel = 0,0.1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Forward]
type = Explod
ownpal = 1
trigger1 = stateno = 70851
trigger2 = prevstateno = 70851 && time < 2
triggerall = command = "holdfwd"
triggerall = numexplod(1602) = 0
anim = F1602
ID = 1602
pos = cond(pos y = 0,10,15),-35
postype = p1
facing = 1
vfacing = 1
vel = 2,0
accel = -0.1,0
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Back]
type = Explod
ownpal = 1
trigger1 = stateno = 70851
trigger2 = prevstateno = 70851 && time < 2
triggerall = command = "holdback"
triggerall = numexplod(1603) = 0
anim = F1603
ID = 1603
pos = cond(pos y = 0,-10,-5),-35
postype = p1
facing = 1
vfacing = 1
vel = -2,0
accel = 0.1,0
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Down]
type = Explod
ownpal = 1
trigger1 = stateno = 70850
trigger2 = prevstateno = 70850 && time < 2
triggerall = command = "holddown"
triggerall = numexplod(1600) = 0
anim = F1600
ID = 1600
pos = cond(pos y = 0,5,8),cond(pos y = 0,-15,-16)
postype = p1
facing = 1
vfacing = 1
vel = 0,2 
accel = 0,-0.1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Up]
type = Explod
ownpal = 1
trigger1 = stateno = 70850
trigger2 = prevstateno = 70850 && time < 2
triggerall = command = "holdup"
triggerall = numexplod(1601) = 0
anim = F1601
ID = 1601
pos = cond(pos y = 0,5,8),cond(pos y = 0,-35,-36)
postype = p1
facing = 1
vfacing = 1
vel = 0,-2 
accel = 0,0.1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Forward]
type = Explod
ownpal = 1
trigger1 = stateno = 70850
trigger2 = prevstateno = 70850 && time < 2
triggerall = command = "holdfwd"
triggerall = numexplod(1602) = 0
anim = F1602
ID = 1602
pos = cond(pos y = 0,15,18),cond(pos y = 0,-25,-26)
postype = p1
facing = 1
vfacing = 1
vel = 2,0
accel = -0.1,0
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Back]
type = Explod
ownpal = 1
trigger1 = stateno = 70850
trigger2 = prevstateno = 70850 && time < 2
triggerall = command = "holdback"
triggerall = numexplod(1603) = 0
anim = F1603
ID = 1603
pos = cond(pos y = 0,-5,-2),cond(pos y = 0,-25,-26)
postype = p1
facing = 1
vfacing = 1
vel = -2,0
accel = 0.1,0
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Okrg]
type = Helper
trigger1 = numhelper(70300) = 0
trigger1 = alive
helpertype = normal
name = "Okrg"
ID = 70300
stateno = 70300
pos = 0,0
postype = p1
facing = 1
ownpal = 1
size.yscale = 0.4

[State -2, Fatality Hit]
type = Helper
trigger1 = !alive && numhelper(70400) = 0
trigger1 = !ishelper
helpertype = normal
name = "Fatality Hit"
ID = 70400
stateno = 70400
pos = 0, 0
postype = p1 ;P2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = -20
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State -2, Efekty do aren]
type = Helper
triggerall = teamside = 1 || teamside = 2 && numenemy = 0
triggerall = numhelper(70003) = 0
trigger1 = numpartner = 0
trigger2 = partner, ID > ID
trigger3 = teammode = turns && numpartner = 0
helpertype = normal
name = "Efekty do aren"
ID = 70003
stateno = 77003
pos = 0,30
postype = p1
facing = 1
ownpal = 1

[State -2, Licznik Lewa strona]
type = Helper
triggerall = stateno!=5500
triggerall = numenemy != 0
triggerall = teamside = 1
triggerall = numhelper(70000) = 0
trigger1 = numpartner = 0
trigger2 = partner, ID > ID
trigger3 = teammode = turns && numpartner = 0
helpertype = normal
name = "P1 Licznik Lewa strona"
ID = 70000
stateno = 77000
pos = 0,30
postype = p1
facing = 1
ownpal = 1

[State -2, Licznik Lewa strona 2]
type = Helper
triggerall = numenemy != 0
triggerall = teamside = 1
triggerall = numhelper(70001) = 0
trigger1 = numpartner = 1
trigger1 = partner, ID < ID
helpertype = normal
name = "P3 Licznik Lewa strona"
ID = 70001
stateno = 77001
pos = 0,30
postype = p1
facing = 1
ownpal = 1

[State -2, Licznik Prawa strona]
type = Helper
triggerall = stateno!=5500
triggerall = numenemy != 0
triggerall = teamside = 2
triggerall = numhelper(70000) = 0
trigger1 = numpartner = 0
trigger2 = partner, ID > ID
trigger3 = teammode = turns && numpartner = 0
helpertype = normal
name = "P2 Licznik Prawa strona"
ID = 70000
stateno = 78000
pos = 0,30
postype = p1
facing = 1
ownpal = 1

[State -2, Licznik Prawa strona]
type = Helper
triggerall = numenemy != 0
triggerall = teamside = 2
triggerall = numhelper(70001) = 0
trigger1 = numpartner = 1
trigger1 = partner, ID < ID
helpertype = normal
name = "P4 Licznik Prawa strona"
ID = 70001
stateno = 78001
pos = 0,30
postype = p1
facing = 1
ownpal = 1

;-------------------------------------------------------------------------
;==========================[ Vary Wsplne ]===============================
;-------------------------------------------------------------------------

;>>>>>>>>>>>> Byakugan <<<<<<<<<<<<<<<<<
[State 0, PowerSet]
type = PowerSet
trigger1 = power > (PowerMax - enemy, var(34))
value = PowerMax - enemy, var(34)

;>>>>>>>>>>>>>>> Kakashi - Mangekyou Sharingan <<<<<<<<<<<<<<<
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = alive = 0 && var(36) != 0
flag = invisible

[State 0, VarSet]
type = VarSet
trigger1 = stateno != 100051 && alive = 1
v = 36
value = 0

[State -3]
type = AfterImage
trigger1 = alive = 0 && var(36) != 0
time = 1
length = 1
trans = add

;>>>>>>>>>>>>>>> Kltwa Hidana <<<<<<<<<<<<<<<
[State -2, Varset]
type = VarSet
trigger1 = stateno = 5150
var(35) = 0

[State -2, LifeAdd]
type = LifeAdd
trigger1 = var(35) != 0
trigger1 = PlayerID(var(35)),var(0)=1
triggerall = !ishelper
value = -PlayerID(var(35)),var(1)
kill = cond(PlayerID(var(35)),stateno=421 || PlayerID(var(35)),stateno=422 || PlayerID(var(35)),stateno=423 || PlayerID(var(35)),stateno=424 || PlayerID(var(35)),stateno=431 || PlayerID(var(35)),stateno=432 || PlayerID(var(35)),stateno=433 ,1,0)

[State 0, ChangeState]
type = ChangeState
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),var(0)=1
triggerall = !ishelper
trigger1 = PlayerID(var(35)),stateno = [422,429]
trigger1 = PlayerID(var(35)),time < 12
trigger2 = PlayerID(var(35)),stateno = 424
triggerall = PlayerID(var(35)),var(1) != 0
triggerall = stateno != 5050
value = 5050

[State 0, explode]
type = Explod
ownpal = 1
triggerall = var(35) != 0
trigger1 = PlayerID(var(35)),stateno = 424
trigger1 = PlayerID(var(35)),time = 125
anim = F1500
ID = 4004
pos = 0,-30
postype = p1
bindtime = 1
removetime = 25
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
sprpriority = 6
ownpal = 1
ontop = 0

;>>>>>>>>>>>>>>> Koto Amatsukami <<<<<<<<<<<<<<<
[State 0, CtrlSet]
type = CtrlSet
trigger1 = enemy, var(45) != 0
value = 0

;>>>>>>>>>>>>>>> Pieczec Danzo <<<<<<<<<<<<<<<
[State -2, Varset]
type = VarSet
trigger1 = stateno = 5150
var(40) = 0

[State 0, ChangeState]
type = ChangeState
triggerall = var(40) != 0
triggerall = !ishelper
trigger1 = PlayerID(var(40)),stateno = 630
triggerall = PlayerID(var(40)),var(3) = 2
triggerall = stateno != 5050
value = 105250

;>>>>>>>>>>>>>>> Kagemane Shikamaru <<<<<<<<<<<<<<<
[State 0, CtrlSet]
type = CtrlSet
trigger1 = var(46) = 1
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = enemy, name = "Shikamaru"
trigger1 = enemy, var(10) = 0
trigger1 = var(46) = 1
v = 46
value = 0

[State 0, Changestate]
type = Changestate
trigger1 = var(46) = 1 && (stateno = 0|| stateno = 12 || stateno = 20 || stateno = 52 || stateno = [98,104])
value = 104000

[State 0, Changestate]
type = Changestate
trigger1 = var(46) = 1 && stateno = [10,11]
trigger2 = var(46) = 1 && stateno = 5120
value = 104002

[State 0, Changestate]
type = Changestate
trigger1 = var(46) = 1 && stateno = [40,59]
value = 104008

[State 0, Selfstate]
type = Selfstate
trigger1 = var(46) = 0 && stateno = [104000,104099]
trigger1 = enemy, name = "Shikamaru"
trigger1 = enemy, var(10) = 0
value = cond(pos y = 0,0,50)
ctrl = 1

;>>>>>>>>>>>>>>> Var Katon <<<<<<<<<<<<<<<

[State 0, - Katon - ]
type = VarAdd
triggerall = var(51) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 51
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(51) <= 0
trigger2 = var(53) != 0
trigger3 = ishelper
trigger4 = stateno = [170,194]
trigger5 = stateno = 5150
triggerall = stateno != [109910,109919]
v = 51
value = 0

;~~ Debuff ~~

[State 0, LifeAdd]
type = LifeAdd
trigger1 = timemod = 3,0
triggerall = var(51) > 0
triggerall = var(53) = 0
triggerall = var(54) = 0
value = -1
kill = 1


;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && timemod = 30,0
triggerall = var(51) > 0
triggerall = var(53) = 0
value = F10,4

[State 0, PalFX]
type = PalFX
trigger1 = time > 0 && timemod = 5,0
triggerall = var(51) > 0
triggerall = var(53) = 0
time = 10
add = 240,50,0
mul = 250,224,120
sinadd = 110,55,85,10
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 5,0
triggerall = var(51) > 0
triggerall = var(53) = 0
triggerall = var(54) = 0
anim = F1402
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 1,1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1901) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(51) > 0
triggerall = var(53) = 0
anim = F1901
ID = 1901
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = 0*facing,-0.04
scale = 0.4,0.4
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

;Polaczony z Futonem
[State 0, Katon + Futon]
type = LifeAdd
trigger1 = timemod = 4,0
triggerall = var(51) > 0
triggerall = var(54) != 0
value = -3
kill = 1

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 5,0
triggerall = var(51) > 0
triggerall = var(54) != 0
anim = F1402
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 1.6,1.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Raiton <<<<<<<<<<<<<<<

[State 0, - Raiton - ]
type = VarAdd
triggerall = var(52) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 52
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(52) <= 0
trigger2 = var(54) != 0
trigger3 = ishelper
trigger4 = stateno = [170,194]
trigger5 = stateno = 5150
triggerall = stateno != [109920,109929]
v = 52
value = 0

;~~ Debuff ~~

[State 0, ChangeState]
type = ChangeState
triggerall = var(52) = 100 || var(52) = 200 || var(52) = 300 || var(52) = 400 || var(52) = 500
triggerall = var(52) != 0
triggerall = !ishelper
trigger1 = stateno = [0,199]
trigger2 = stateno = 70500+var(0)*1000 
triggerall = stateno != [10000,199999]
triggerall = stateno != [170,194]
value = 109929

;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && timemod = 30,0
triggerall = var(52) > 0
triggerall = var(54) = 0
value = F11,3

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 5,0
triggerall = var(52) > 0
triggerall = var(53) = 0
triggerall = var(54) = 0
anim = F1300+random%3
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 5
removetime = -2
sprpriority = -2+random%5
scale = 0.25,0.25
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1902) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(52) > 0
triggerall = var(54) = 0
anim = F1902
ID = 1902
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = 0.02*facing,0.03
scale = 0.4,0.4
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

;Polaczony z Suitonem
[State 0, Raiton + Suiton]
type = LifeAdd
trigger1 = timemod = 3,0
triggerall = var(52) > 0
triggerall = var(53) != 0
value = -1
kill = 1

[State 0, PalFX]
type = PalFX
trigger1 = timemod = 5,0
triggerall = var(52) > 0
triggerall = var(53) != 0
time = 10
add = 50,50,200
mul = 100,200,200
sinadd = 150,150,300,4
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 3,0
triggerall = var(52) > 0
triggerall = var(53) != 0
anim = F1300+random%3
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 5
removetime = -2
sprpriority = -2+random%5
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Suiton <<<<<<<<<<<<<<<

[State 0, - Suiton - ]
type = VarAdd
triggerall = var(53) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 53
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(53) <= 0
trigger2 = var(55) != 0
trigger3 = ishelper
trigger4 = stateno = [170,194]
trigger5 = stateno = 5150
triggerall = stateno != [109930,109939]
v = 53
value = 0

;~~ Debuff ~~

[State 0, Atk Break]
type = Explod
trigger1 = var(53) > 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = numexplod(1910) = 0
anim = F1910
ID = 1910
pos = -10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Atk Break]
type = ModifyExplod
trigger1 = var(53) > 0
triggerall = numexplod(1910) = 1
ID = 1910
pos = -10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(53) = 0
ID = 1910

[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = var(53) = 0
value = 1

[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = var(53) > 0
value = 0.6


;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && timemod = 30,0
triggerall = var(53) > 0
triggerall = var(55) = 0
value = F12,0

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 10,0
triggerall = var(53) > 0
triggerall = var(55) = 0
anim = F1550
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1903) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(53) > 0
triggerall = var(55) = 0
anim = F1903
ID = 1903
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = -0.03*facing,-0.02
scale = 0.4,0.4
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Fuuton <<<<<<<<<<<<<<<

[State 0, - Fuuton - ]
type = VarAdd
triggerall = var(54) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 54
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(54) <= 0
;trigger2 = var(51) != 0
trigger2 = ishelper
trigger3 = stateno = [170,194]
trigger4 = stateno = 5150
triggerall = stateno != [109940,109949]
v = 54
value = 0

;~~ Debuff ~~

[State 0, Def Break]
type = Explod
trigger1 = var(54) > 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = numexplod(1912) = 0
anim = F1912
ID = 1912
pos = 10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Def Break]
type = ModifyExplod
trigger1 = var(54) > 0
triggerall = numexplod(1912) = 1
ID = 1912
pos = 10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(54) = 0
ID = 1912

[State 0, DefenceMulSet]
type = DefenceMulSet
trigger1 = var(54) = 0
value = 1

[State 0, DefenceMulSet]
type = DefenceMulSet
trigger1 = var(54) > 0
value = 1.25

;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && timemod = 40,0
triggerall = var(54) > 0
;triggerall = var(51) = 0
value = F14,6

[State 0, Explod]
type = Explod
trigger1 = time > 0 &&  timemod = 10,0
triggerall = var(54) > 0
;triggerall = var(51) = 0
anim = F643
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1904) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(54) > 0
;triggerall = var(51) = 0
anim = F1904
ID = 1904
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = 0.03*facing,-0.02
scale = 0.4,0.4
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Doton <<<<<<<<<<<<<<<
[State 0, - Doton - ]
type = VarAdd
triggerall = var(55) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 55
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(55) <= 0
trigger2 = var(52) != 0
trigger3 = ishelper
trigger4 = stateno = [170,194]
trigger5 = stateno = 5150
triggerall = stateno != [109950,109959]
v = 55
value = 0

;~~ Debuff ~~

[State 0, Slow]
type = Explod
trigger1 = var(55) > 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = numexplod(1914) = 0
anim = F1914
ID = 1914
pos = -10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Slow]
type = ModifyExplod
trigger1 = var(55) > 0
triggerall = numexplod(1910) = 1
ID = 1910
pos = -10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(55) = 0
ID = 1914

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 45 || stateno = 60
value = 50
ctrl = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = var(55) != 0
trigger1 = stateno = 50
y = -(const(velocity.jump.y))/20

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 100 || stateno = 101
value = 20
ctrl = 1

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 102 || stateno = 103
value = 11
ctrl = 1

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 105
value = 0
ctrl = 1

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 70600
value = 0
ctrl = 1

;~~ Efekty ~~

[State 0, PalFX]
type = PalFX
trigger1 = timemod = 5,0
triggerall = var(55) > 0
triggerall = var(52) = 0
time = 10
add = 25,20,5
mul = 196,186,166
sinadd = 0,0,0,1
invertall = 0
color = 256

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1905) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(55) > 0
triggerall = var(52) = 0
anim = F1905
ID = 1905
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = -0.02*facing,0.03
scale = 0.4,0.4
ownpal = 1
ontop = 1
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Czarne Plomienie <<<<<<<<<<<<<<<
[State 0, - Amaterasu - ]
type = VarAdd
triggerall = var(56) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 56
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(56) <= 0
trigger2 = ishelper
trigger3 = stateno = [170,194]
trigger4 = stateno = 5150
triggerall = stateno != [109960,109969]
v = 56
value = 0

;~~ Debuff ~~

[State 0, LifeAdd]
type = LifeAdd
trigger1 = timemod = 3,0
triggerall = var(56) > 0
value = -2
kill = 1

;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 20,0
triggerall = var(56) > 0
value = F10,2

[State 0, PalFX]
type = PalFX
trigger1 = timemod = 5,0
triggerall = var(56) > 0
time = 10
add = -60,-80,-50
mul = 90,20,120
sinadd = 40,20,50,5
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = timemod = 3,0
triggerall = var(56) > 0
anim = F1700
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-10-random%40))
postype = p1
facing = 1
angle = -20+random%40
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 1,1;0.35,0.35
vel = 0,-1-random%2
accel = 0,0.05
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Kuroi Kaminari <<<<<<<<<<<<<<<
[State 0, - Kuroi Kaminari - ]
type = VarAdd
triggerall = var(57) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 57
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(57) <= 0
trigger2 = ishelper
trigger3 = stateno = [170,194]
trigger4 = stateno = 5150
triggerall = stateno != [109970,109979]
v = 57
value = 0

;~~ Debuff ~~

[State 0, ChangeState]
type = ChangeState
triggerall = timemod = 100,0
triggerall = var(57) != 0
triggerall = !ishelper
trigger1 = stateno = [0,199]
trigger2 = stateno = 70500+var(0)*1000 
;trigger3 = stateno = [5000,5299]
triggerall = stateno != [10000,199999]
triggerall = stateno != [170,194]
value = 109979

;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 30,0
triggerall = var(57) > 0
value = F11,3

[State 0, Explod]
type = Explod
trigger1 = timemod = 5,0
triggerall = var(57) > 0
anim = F1701+random%3
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 5
removetime = -2
sprpriority = -2+random%5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;-------------------------

[Statedef -3]

[State -3, Afterimage normal]
type = AfterImage
triggerall = var(1) = 0
trigger1 = time = 0
time = 1

[State -3, PowerAdd]
type = PowerAdd
triggerall = prevstateno != 190+var(0)*10000 
triggerall = stateno = [0,199]
triggerall = stateno != 70500+var(0)*1000 
triggerall = stateno != [5000,5299]
triggerall = stateno != [10000,199999]
triggerall = timemod = 20,0
trigger1 = !ishelper
value = 5
