
[Data]
life = 3000			
power = 4000		
attack = 100	
defence = 100		
fall.defence_up = 50	
liedown.time = 60		
airjuggle = 15		
sparkno = 0		
guard.sparkno = 40	
KO.echo = 0			
IntPersistIndex = 0	
FloatPersistIndex = 0  

[Size]
xscale = 0.95
yscale = 0.95			
ground.back = 12		
ground.front = 10		
air.back = 10		
air.front = 10		
height = 70			
attack.dist = 160		
proj.attack.dist = 90	
proj.doscale = 0		
head.pos = 0, -65	
mid.pos = 0, -43		
shadowoffset = 0		
draw.offset = 0,0

[Velocity]
walk.fwd  = 1.6
walk.back = -1.6
run.fwd  = 8.2, 0
run.back = -6.2,-5.7
jump.neu = 0,-8.9
jump.back = -3.35
jump.fwd = 3.35
runjump.back = -2.75,-8.9
runjump.fwd = 6.0,-8.9
airjump.neu = 0,-8.9
airjump.back = -2.75
airjump.fwd = 2.7

[Movement]
airjump.num = 1		
airjump.height = 35	
yaccel = .44	
stand.friction = .85	
crouch.friction = .82	

;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S2,11+random%2

[State 310, 2]
type = Explod
trigger1 = animelem = 5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F14,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F9,1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
; Win pose 1
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S2,20

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F9,3

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Introduction
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = 191
ID = 191
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.95,0.95
sprpriority = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S2,0+random%3

[State 0, PowerSet]
type = PowerSet
trigger1 = Time = 0
value = 2000

[State 0, PowerSet]
type = PowerAdd
trigger1 = Time = 1
value = 500

[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;-----------------
;Combo Ending R
[StateDef 194]
type = S
movetype = I
physics = S
juggle = 1
velset = 0,0
ctrl = 0
anim = 194
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S2,21+random%3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F9,3

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelem = 3
value = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 1
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S2,0+random%24
channel = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 6
value = F9,3

[State 195, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------
;Combo Ending P1
[StateDef 196]
type = S
movetype = I
physics = S
juggle = 1
velset = 0,0
ctrl = 0
anim = 196
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S2,21+random%3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S6,8

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelem = 5
value = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo Ending P2
[StateDef 197]
type = S
movetype = I
physics = S
juggle = 1
velset = 0,0
ctrl = 0
anim = 197
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S2,21+random%3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S6,8

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelem = 5
value = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo Ending L
[StateDef 198]
type = S
movetype = I
physics = S
juggle = 1
velset = 0,0
ctrl = 0
anim = 198
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S2,21+random%3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,8

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelem = 4
value = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo Ending B
[StateDef 199]
type = S
movetype = I
physics = S
juggle = 1
velset = 0,0
ctrl = 0
anim = 199
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S2,21+random%3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S6,8

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelem = 5
value = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;-- Combo1
[StateDef 200]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 200
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SP
damage = ceil(35*(1+var(2)*1.25)),ceil(7*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(46*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-2
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo1
[StateDef 201]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 201
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 35,7
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(50*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-1
airguard.velocity = -2,-1
air.type = High
air.velocity = -2,-1
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo1
[StateDef 202]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 202
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = ceil(35*(1+var(2)*1.25)),ceil(7*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(47*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-1
airguard.velocity = -2,-1
air.type = High
air.velocity = -2,-1
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Combo1
[StateDef 203]
type = S
movetype= A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 203
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(23*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,3
airguard.velocity = -2,3
air.type = High
air.velocity = -2,3
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -7
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Combo1
[StateDef 204]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 204
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 15
sparkno = 0+random%4
sparkxy = -15, -ceil(48*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -4,-2
airguard.velocity = -4,-2
air.type = High
air.velocity = 4,-2
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Combo1
[StateDef 205]
type = S
movetype= A
physics = S
juggle  = 1
velset = 5,0
ctrl = 0
anim = 205
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0+random%12
channel = 4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = -10,-ceil(48*0.95)
postype = p2
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.2,1.2
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(75*(1+var(2)*1.25)),ceil(15*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(48*0.95)
hitsound = 24, 14
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -4,0
airguard.velocity = -4,0
air.type = High
air.velocity = -4,0
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -7
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;-- Combo2
[StateDef 210]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 210
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 35,7
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(38*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1,-1
airguard.velocity = -1,-1
air.type = High
air.velocity = -1,-1
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo2
[StateDef 211]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 211
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 35,7
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(51*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-1
airguard.velocity = -2,-1
air.type = High
air.velocity = -2,-1
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo2
[StateDef 212]
type = S
movetype= A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 203
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(23*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,3
airguard.velocity = -2,3
air.type = High
air.velocity = -2,3
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -7
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Combo2
[StateDef 213]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 213
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F4,0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = 28*0.95,1
postype = p1
scale = 1,0.9
sprpriority = 3
ontop = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Reka"
ID = 200
stateno = 2131
pos = 60,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.95
size.yscale = 0.95

[State 0, End]
type = ChangeState
trigger1 = Time >= 10 && numhelper(200) = 0
value = 197
ctrl = 1
;-----------------
;Reka
[StateDef 2131]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2131
poweradd = 0
sprpriority = 2

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F64
ID = 64
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.25,0.15
sprpriority = -1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F583
ID = 583
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.4,0.8
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F15,6

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(40*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1,-9
airguard.velocity = -1,-9
air.type = High
air.velocity = -1,-9
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -7
fall = 1

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
;-----------------
;Combo2
[StateDef 214]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 214
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 10
sparkno = 0+random%4
sparkxy = -15, -ceil(100*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-3
airguard.velocity = -2,-3
air.type = High
air.velocity = -2,-3
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Combo2
[StateDef 215]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 215
poweradd = 20
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, Helper]
type = Helper
trigger1 = time = 18
helpertype = normal
name = "Futon"
ID = 215
stateno = 216
pos = ceil(43*0.95),-ceil(57*0.95)
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;------------------
;Futon
[StateDef 216]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 216
poweradd = 0
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 20

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 7 && parent, stateno = 215
time = 1
pos = ceil(43*0.95),ceil(-57*0.95)

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 7 && parent, stateno = 219
time = 1
pos = ceil(26*0.95),-ceil(60*0.95)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = -15,-30
postype = p2
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F643
pos = -5+random%20,-15-random%30
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 0.7,0.7
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,1

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = timemod = 5,0
triggerall = hitcount < 3
attr = S, SA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 3
sparkno = 4
sparkxy = -15,0
hitsound = 14, 6
guardsound = 14, 6
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -4,-4
airguard.velocity = -4,-4
air.type = High
air.velocity = -4,-4
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -7
fall = 1

[State 0, End]
type = destroyself
trigger1 = animtime = 0
;-----------------
;Futon Air
[StateDef 219]
type = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 219
poweradd = 20
sprpriority = 2

;----------------
[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 1
y = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < 0
y = const(movement.yaccel)*.2

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, End]
type = ChangeState
trigger1 = pos y >= 0
value = 52

[State 0, VelSet]
type = VelSet
trigger1 = time = [15,50]
trigger1 = pos y >= -10
x = 0
y = 0
;----------------

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, Helper]
type = Helper
trigger1 = time = 18
helpertype = normal
name = "Futon"
ID = 215
stateno = 216
pos = ceil(26*0.95),-ceil(60*0.95)
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-----------------
;-- Combo3
[StateDef 220]
type = S
movetype= A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 220
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = ceil(35*(1+var(2)*1.25)),ceil(7*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(43*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,0
airguard.velocity = -2,-1
air.type = High
air.velocity = -2,-1
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo3
[StateDef 221]
type = S
movetype= A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 221
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 35,7
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(60*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-3
airguard.velocity = -2,-3
air.type = High
air.velocity = -2,-3
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo3
[StateDef 222]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 214
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(100*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-3
airguard.velocity = -2,-3
air.type = High
air.velocity = -2,-3
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Combo3
[StateDef 223]
type = S
movetype= A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 223
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S4,0+random%10
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = F7,2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 7
anim = F60
ID = 60
pos = 80*0.95,1
postype = p1
scale = 2,1
sprpriority = 2
ontop = 0

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(25*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,6
airguard.velocity = -2,6
air.type = High
air.velocity = -2,6
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -7
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Combo3
[StateDef 224]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 224
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F4,0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = F290
ID = 23
pos = ceil(28*0.95),1
postype = p1
scale = 1,0.9
sprpriority = 2
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = F290
ID = 23
pos = ceil(3*0.95),2
postype = p1
scale = 1,0.9
sprpriority = 3
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = F290
ID = 23
pos = ceil(46*0.95),1
postype = p1
scale = 1,0.9
sprpriority = 3
ontop = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Reka"
ID = 200
stateno = 2131
pos = 70,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.95
size.yscale = 0.95

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Reka"
ID = 200
stateno = 2131
pos = 110,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.95
size.yscale = 0.95

[State 0, End]
type = ChangeState
trigger1 = Time >= 10 && numhelper(200) = 0
value = 199
ctrl = 1
;-----------------
;Combo3
[StateDef 225]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 225
poweradd = 20
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, Helper]
type = Helper
trigger1 = time = 18
helpertype = normal
name = "Katon"
ID = 225
stateno = 226
pos = ceil(43*0.95),-ceil(57*0.95)
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------
;Katon
[StateDef 226]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 226
poweradd = 0
sprpriority = 4

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 50 && parent, stateno = 225
time = 1
facing = 0
pos = ceil(43*0.95),-ceil(57*0.95)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F271
ID = 6001
pos = 15,0
postype = p1
bindtime = -1
removetime = -2
supermovetime=9999
pausemovetime=9999
scale = 0.85,0.85
sprpriority = 3
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F271
ID = 6001
pos = 70,0
postype = p1
bindtime = -1
removetime = -2
supermovetime=9999
pausemovetime=9999
scale = 0.85,0.85
sprpriority = 3
ownpal = 1

[State 0, hitdef]
type = HitDef
fall.yvelocity = -6
trigger1 = timemod = 5,0
triggerall = hitcount < 10
attr = S, SA
damage = 7,2
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 4
pausetime = 0, 10
sparkno = 1400
sparkxy = ceil(-5-random%20),ceil(enemy, pos y +25-random%50)
hitsound = 10, 0
guardsound = 10, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -0.5,-3
airguard.velocity = 0,-3
air.type = High
air.velocity = -0.5,-3
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
fall = 1

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = parent, stateno != 225
;-----------------
;Katon
[StateDef 227]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 227
poweradd = 0
sprpriority = 4

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 24 && parent, stateno = 229
time = 1
facing = 0
pos = ceil(26*0.95),-ceil(60*0.95)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F271
ID = 6001
pos = 15,0
postype = p1
bindtime = -1
removetime = -2
supermovetime=9999
pausemovetime=9999
scale = 0.85,0.85
sprpriority = 3
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F271
ID = 6001
pos = 70,0
postype = p1
bindtime = -1
removetime = -2
supermovetime=9999
pausemovetime=9999
scale = 0.85,0.85
sprpriority = 3
ownpal = 1

[State 0, hitdef]
type = HitDef
fall.yvelocity = -6
trigger1 = timemod = 5,0
triggerall = hitcount < 5
attr = S, SA
damage = 15,3
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 4
pausetime = 0, 10
sparkno = 1400
sparkxy = ceil(-5-random%20),ceil(enemy, pos y +25-random%50)
hitsound = 10, 0
guardsound = 10, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -0.5,-3
airguard.velocity = 0,-3
air.type = High
air.velocity = -0.5,-3
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
fall = 1

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = parent, stateno != 229 && time < 24
;-----------------
;Katon Air
[StateDef 229]
type = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 229
poweradd = 20
sprpriority = 2

;----------------
[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 1
y = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < 0
y = const(movement.yaccel)*.2

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, End]
type = ChangeState
trigger1 = pos y >= 0
value = 52

[State 0, VelSet]
type = VelSet
trigger1 = time = [15,50]
trigger1 = pos y >= -10
x = 0
y = 0
;----------------

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, Helper]
type = Helper
trigger1 = time = 18
helpertype = normal
name = "Katon"
ID = 225
stateno = 227
pos = ceil(26*0.95),-ceil(60*0.95)
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.6
size.yscale = 0.6

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-----------------
;-- Combo4
[StateDef 230]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 230
poweradd = 20
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = ceil(35*(1+var(2)*1.25)),ceil(7*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(47*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-2
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-2
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[state 0, velset]
type = velset
trigger1 = movecontact
triggerall = NumTarget
x = -target, vel x*1.5
y = target, vel y*1.5

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo4
[StateDef 231]
type = A
movetype= A
physics = A
juggle  = 1
velset = 3,-2+(enemynear, pos y - pos y)/10
ctrl = 0
anim = 231
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = 35,7
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(54*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-3
airguard.velocity = -2,-3
air.type = High
air.velocity = -2,-3
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[state 0, velset]
type = velset
trigger1 = movecontact
triggerall = NumTarget
x = -target, vel x*1.5
y = target, vel y*1.5

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo4
[StateDef 232]
type = A
movetype= A
physics = A
juggle  = 1
velset = 3,-2+(enemynear, pos y - pos y)/10
ctrl = 0
anim = 232
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = ceil(35*(1+var(2)*1.25)),ceil(7*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(57*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-2
airguard.velocity = -2,-2
air.type = High
air.velocity = -2,-2
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[state 0, velset]
type = velset
trigger1 = movecontact
triggerall = NumTarget
x = -target, vel x*1.5
y = target, vel y*1.5

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo4
[StateDef 233]
type = A
movetype= A
physics = A
juggle  = 1
velset = 4,-2+(enemynear, pos y - pos y)/10
ctrl = 0
anim = 233
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(43*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -5,-3
airguard.velocity = -5,-3
air.type = High
air.velocity = -5,-3
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[state 0, velset]
type = velset
trigger1 = movecontact
triggerall = NumTarget
x = -target, vel x*1.5
y = target, vel y*1.5

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo4
[StateDef 234]
type = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 234
poweradd = 20
sprpriority = 2

;----------------
[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 2
y = cond(vel y > 0, 0.5, -0.5)+(enemynear, pos y - pos y)/10

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < 0
y = const(movement.yaccel)*.2

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, End]
type = ChangeState
trigger1 = pos y >= 0
value = 52
;----------------

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S1,0+random%12
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = A, NA
damage = ceil(75*(1+var(2)*1.25)),ceil(15*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, -ceil(58*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -8,-2
airguard.velocity = -8,-2
air.type = High
air.velocity = -8,-2
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;-- Combo5
[StateDef 240]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 240
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 35,7
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(28*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,1
airguard.velocity = -2,1
air.type = High
air.velocity = -2,1
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo5
[StateDef 241]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 210
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 35,7
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(38*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1,-1
airguard.velocity = -1,-1
air.type = High
air.velocity = -1,-1
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo5
[StateDef 242]
type = S
movetype= A
physics = S
juggle  = 1
velset = 1,0
ctrl = 0
anim = 242
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 10
sparkno = 0+random%4
sparkxy = -15, -ceil(48*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3,-2
airguard.velocity = -3,-2
air.type = High
air.velocity = -3,-2
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Combo5
[StateDef 243]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 243
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(44*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3,-2
airguard.velocity = -3,-2
air.type = High
air.velocity = -3,-2
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 196
ctrl = 1
;-----------------
;Combo5
[StateDef 244]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 213
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F4,0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = ceil(28*0.95),1
postype = p1
scale = 1,0.9
sprpriority = 3
ontop = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Reka"
ID = 200
stateno = 2441
pos = -10,0
postype = p2
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.95
size.yscale = 0.95

[State 0, End]
type = ChangeState
trigger1 = Time >= 10 && numhelper(200) = 0
value = 197
ctrl = 1
;-----------------
;Reka
[StateDef 2441]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2131
poweradd = 0
sprpriority = 2

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F64
ID = 64
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.25,0.15
sprpriority = -1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F583
ID = 583
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.4,0.8
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F15,6

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(40*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-6
airguard.velocity = -2,-6
air.type = High
air.velocity = -2,-6
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -7
fall = 1

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
;-----------------
;Combo5
[StateDef 245]
type = S
movetype= A
physics = S
juggle  = 1
velset = 1,0
ctrl = 0
anim = 245
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0+random%12
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time && time < 15
attr = S,NA
damage = 75,15
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(40*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -10,-4
airguard.velocity = -10,-4
air.type = High
air.velocity = -10,-4
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = target, ishelper = 0
trigger1 = movehit
persistent = 0
value = 109990

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;-- Combo6
[StateDef 250]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 250
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = ceil(35*(1+var(2)*1.25)),ceil(7*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(49*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,0
airguard.velocity = -2,0
air.type = High
air.velocity = -2,0
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo6
[StateDef 251]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 211
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 35,7
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(51*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-1
airguard.velocity = -2,-1
air.type = High
air.velocity = -2,-1
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo6
[StateDef 252]
type = S
movetype= A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 240
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 35,7
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(28*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,1
airguard.velocity = -2,1
air.type = High
air.velocity = -2,1
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo6
[StateDef 253]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 213
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F4,0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = 28*0.95,1
postype = p1  
scale = 1,0.9
sprpriority = 3
ontop = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Reka"
ID = 200
stateno = 2531
pos = 70,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.95
size.yscale = 0.95

[State 0, End]
type = ChangeState
trigger1 = Time >= 10 && numhelper(200) = 0
value = 197
ctrl = 1
;-----------------
;Reka
[StateDef 2531]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2131
poweradd = 0
sprpriority = 2

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F64
ID = 64
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.25,0.15
sprpriority = -1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F583
ID = 583
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.4,0.8
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F15,6

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(40*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1,-6
airguard.velocity = -1,-6
air.type = High
air.velocity = -1,-6
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -7
fall = 1

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
;-----------------
;Combo6
[StateDef 254]
type = S
movetype= A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 223
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S4,0+random%10
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = F7,2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 7
anim = F60
ID = 60
pos = 80*0.95,1
postype = p1  
scale = 2,1
sprpriority = 2
ontop = 0

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(25*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,7
airguard.velocity = -2,7
air.type = High
air.velocity = -2,7
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -8
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Combo6
[StateDef 255]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 255
poweradd = 20
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S1,0+random%12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, Helper]
type = Helper
trigger1 = time = 18
helpertype = normal
name = "Suiton"
ID = 255
stateno = 256
pos = ceil(43*0.95),-ceil(57*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.4
size.yscale = 0.4

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;------------------
;Suiton
[StateDef 256]
type = A
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 256
poweradd = 0
sprpriority = 4

[State 0, VelSet]
type = VelSet
trigger1 = pos y < 0
triggerall = ishelper(255)
x = 9

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
triggerall = ishelper(255)
y = 4

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < 0
y = 0.2

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = F461
pos = -10,0
postype = p1  
facing = 1
bindtime = 10
removetime = -2
sprpriority = 4
scale = 0.35,0.35
ontop = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
angle = cond(vel x != 0,-atan(vel y/vel x)*180/PI, 0)

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time > 0 && vel x != 0
value = -atan(vel y/vel x)*180/PI 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time < 5
scale = 0.2+time*0.18,0.2+time*0.18

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F14,6

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = !time
attr = S, SA
damage = 25,5
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
sprpriority = 4
pausetime = 0, 0
sparkno = 1550;240
sparkxy = -20+random%40, 10-random%20
hitsound = F12,0
guardsound = F12,0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -4,5
airguard.velocity = -4,5
air.type = High
air.velocity = -4,5
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = pos y >= -5
value = 257
;------------------
;Suiton
[StateDef 257]
type = A
movetype= A
physics = S
juggle  = 1
velset = 1,0
ctrl = 0
anim = 257
poweradd = 0
sprpriority = 4

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
y = 0

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 258
pos = 0,0
postype = p1  
facing = 1
bindtime = -1
removetime = -2
sprpriority = 14
scale = 0.2,0.2
ontop = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = timemod = 5,0
trigger1 = time < 20
anim = F241
pos = -40+random%80,-20-random%30
postype = p1  
facing = 1
bindtime = -1
removetime = -2
sprpriority = 4
scale = 1.5,1.5
ontop = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F12,3

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = !time
attr = S, SA
damage = 50,10
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
sprpriority = 3
pausetime = 0, 3
sparkno = 242
sparkxy = -20+random%40, 0
hitsound = F12,0
guardsound = F12,0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -5,-5
airguard.velocity = -5, -5
air.type = High
air.velocity = -5,-5
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, End]
type = destroyself
trigger1 = animtime = 0
;-----------------
;Suiton Air
[StateDef 259]
type = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 259
poweradd = 20
sprpriority = 2

;----------------
[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 1
y = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < 0
y = const(movement.yaccel)*.2

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, End]
type = ChangeState
trigger1 = pos y >= 0
value = 52

[State 0, VelSet]
type = VelSet
trigger1 = time = [15,50]
trigger1 = pos y >= -10
x = 0
y = 0
;----------------

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S1,0+random%12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, Helper]
type = Helper
trigger1 = time = 18
helpertype = normal
name = "Suiton"
ID = 255
stateno = 256
pos = ceil(26*0.95),-ceil(60*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.4
size.yscale = 0.4

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-----------------
;-- Combo7
[StateDef 260]
type = S
movetype= A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 202
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = ceil(35*(1+var(2)*1.25)),ceil(7*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(47*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-1
airguard.velocity = -2,-1
air.type = High
air.velocity = -2,-1
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Combo7
[StateDef 261]
type = S
movetype= A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 203
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(23*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1,4
airguard.velocity = -1,4
air.type = High
air.velocity = -1,4
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -8
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Combo7
[StateDef 262]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 213
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F4,0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = ceil(28*0.95),1
postype = p1  
scale = 1,0.9
sprpriority = 3
ontop = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Reka"
ID = 200
stateno = 2131
pos = 60,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.95
size.yscale = 0.95

[State 0, End]
type = ChangeState
trigger1 = Time >= 10 && numhelper(200) = 0
value = 197
ctrl = 1
;-----------------
;Combo7
[StateDef 263]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 263
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 10
sparkno = 0+random%4
sparkxy = -15, -ceil(48*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3,1
airguard.velocity = -3,1
air.type = High
air.velocity = -3,1
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Combo7
[StateDef 264]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 264
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 10
sparkno = 0+random%4
sparkxy = -15, -ceil(53*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3,2
airguard.velocity = -3,2
air.type = High
air.velocity = -3,2
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -5
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 196
ctrl = 1
;-----------------
;Combo7
[StateDef 265]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 265
poweradd = 20
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, Helper]
type = Helper
trigger1 = time = 18
helpertype = normal
name = "Raiton"
ID = 265
stateno = 266
pos = ceil(43*0.95),-ceil(57*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.7
size.yscale = 0.7

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;------------------
;Raiton
[StateDef 266]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 266
poweradd = 0
sprpriority = 3

[State 0, VarSet]
type = VarSet
trigger1 = !time && parent, stateno = 265
v = 10
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = !time && parent, stateno = 269
v = 10
value = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = var(10) = 0
value = -22

[State 0, AngleDraw]
type = AngleDraw
trigger1 = var(10) = 1
value = -40

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 15 && parent, stateno = 265
time = 1
pos = ceil(43*0.95),-ceil(57*0.95)

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 15 && parent, stateno = 269
time = 1
pos = ceil(26*0.95),-ceil(60*0.95)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 10,0
triggerall = time < 15
anim = F1300
id = 1300
pos = 15+time*3,10+time*2
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 6
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F1420+random%3
pos = -5+random%20,-15-random%30
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 0.5,0.5
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F11,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F11,4

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = timemod = 5,0
triggerall = hitcount < 3
attr = S, SA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 15
sparkno = 4
sparkxy = -15,0
hitsound = F11,7
guardsound = F11,7
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3,2
airguard.velocity = -3,2
air.type = High
air.velocity = -3,2
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1
palfx.time = 40
palfx.mul = 100,200,200
palfx.add = 50,50,200
palfx.sinadd = 150,150,300,4

[State 0, End]
type = destroyself
trigger1 = animtime = 0
;-----------------
;Raiton Air
[StateDef 269]
type = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 269
poweradd = 20
sprpriority = 2

;----------------
[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 1
y = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < 0
y = const(movement.yaccel)*.2

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, End]
type = ChangeState
trigger1 = pos y >= 0
value = 52

[State 0, VelSet]
type = VelSet
trigger1 = time = [15,50]
trigger1 = pos y >= -10
x = 0
y = 0
;----------------


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,8

[State 0, Helper]
type = Helper
trigger1 = time = 18
helpertype = normal
name = "Raiton"
ID = 265
stateno = 266
pos = ceil(26*0.95),-ceil(60*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.7
size.yscale = 0.7

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-----------------
;-- Combo8
[StateDef 270]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 270
poweradd = 20
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = ceil(35*(1+var(2)*1.25)),ceil(7*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(48*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-1
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-1
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[state 0, velset]
type = velset
trigger1 = movecontact
triggerall = NumTarget
x = -target, vel x*1.5
y = target, vel y*1.5

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo8
[StateDef 271]
type = A
movetype= A
physics = A
juggle  = 1
velset = 3,-1
ctrl = 0
anim = 271
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = ceil(35*(1+var(2)*1.25)),ceil(7*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(54*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3,-2
airguard.velocity = -3,-2
air.type = High
air.velocity = -3,-2
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[state 0, velset]
type = velset
trigger1 = movecontact
triggerall = NumTarget
x = -target, vel x*1.5
y = target, vel y*1.5

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo8
[StateDef 272]
type = A
movetype= A
physics = A
juggle  = 1
velset = 3,-2
ctrl = 0
anim = 272
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage = 35,7
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(53*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-2
airguard.velocity = -2,-2
air.type = High
air.velocity = -2,-2
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6

[state 0, velset]
type = velset
trigger1 = movecontact
triggerall = NumTarget
x = -target, vel x*1.5
y = target, vel y*1.5

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo8
[StateDef 273]
type = A
movetype= A
physics = A
juggle  = 1
velset = 4,-3
ctrl = 0
anim = 273
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(25*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -6,1
airguard.velocity = -6,1
air.type = High
air.velocity = -6,1
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[state 0, velset]
type = velset
trigger1 = movecontact
triggerall = NumTarget
x = -target, vel x*1.5
y = target, vel y*1.5

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo8
[StateDef 274]
type = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 274
poweradd = 20
sprpriority = 2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -30

;----------------
[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = cond(vel y > 0, 0.5, -0.5)

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < 0
y = const(movement.yaccel)*.2

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, End]
type = ChangeState
trigger1 = pos y >= 0
value = 52
;----------------

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S1,0+random%12
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = A, NA
damage = ceil(75*(1+var(2)*1.25)),ceil(15*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, 0
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -5,7
airguard.velocity = -5,7
air.type = High
air.velocity = -5,7
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;-- Podrzucenie
[StateDef 280]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 280
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 10, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(65*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1,-5
airguard.velocity = -1,-5
air.type = High
air.velocity = -1,-5
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6
p1stateno = 281

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Podrzucenie
[StateDef 281]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 214
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S6,11+random%2
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(75*(1+var(2)*1.25)),ceil(15*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, -ceil(100*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -6,-9
airguard.velocity = -6,-9
air.type = High
air.velocity = -6,-9
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;-- Przerzucenie
[StateDef 290]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 290
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(35*(1+var(2)*1.25)),ceil(7*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 20, 30
sparkno = 0+random%4
sparkxy = -15, -ceil(47*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = 0,0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6
p1stateno = 291

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 6
value = 0

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Przerzucenie
[StateDef 291]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 291
poweradd = 0
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = -3

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = numtarget  != 0
trigger1 = animelem = 1
time = 3
pos = ceil(35*0.95),ceil(16*0.95)
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = numtarget  != 0
trigger1 = animelem = 2
time = 3
pos = ceil(41*0.95),-ceil(19*0.95)
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = numtarget  != 0
trigger1 = animelem = 3
time = 3
pos = ceil(33*0.95),-ceil(43*0.95)
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = numtarget  != 0
trigger1 = animelem = 4
time = 10
pos = ceil(13*0.95),-ceil(51*0.95)
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = numtarget != 0
trigger1 = animelem = 5
time = 1
pos = -ceil(50*0.95),-ceil(27*0.95)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S6,11+random%2
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
damage = 60,12
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = 54363
sparkxy = -15, -ceil(20*0.95)
hitsound = 35, 6456
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = 8,-6
airguard.velocity = 8,-6
air.type = High
air.velocity = 8,-6
air.hittime = 20
fall.recover = 0
fall.envshake.time = 20
fall.envshake.freq = 60
fall.envshake.ampl = -20
fall.envshake.phase = 20
fall.yvelocity = -3
yaccel = 1.5
fall.damage = 50
fall = 1

[State 0, Turn]
type = Turn
trigger1 = AnimTime = 0

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Jiongu Attack 1
[StateDef 300]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 300
poweradd = -500
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S1,0+random%12
channel = 4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%3
pos = -10,-ceil(48*0.95)
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.2,1.2
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = 250,150
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 2000
sparkxy = -15, -ceil(47*0.95)
hitsound = 24, 14
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -4,-2
airguard.velocity = -4,-2
air.type = High
air.velocity = -4,-2
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -7
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Jiongu Attack 2
[StateDef 310]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 213
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0+random%12
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F4,0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = ceil(28*0.95),1
postype = p1  
scale = 1,0.9
sprpriority = 3
ontop = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3 && p2bodydist x <= 400
helpertype = normal
name = "Reka"
ID = 315
stateno = 315
pos = 0,0
postype = p2    
facing = -1
keyctrl = 0
ownpal = 1
size.xscale = 0.95
size.yscale = 0.95

[State 0, Helper]
type = Helper
trigger1 = animelem = 3 && p2bodydist x > 400
helpertype = normal
name = "Reka"
ID = 315
stateno = 315
pos = 100,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.95
size.yscale = 0.95

[State 0, End]
type = ChangeState
trigger1 = Time >= 10 && numhelper(315) = 0
value = 197
ctrl = 1
;-----------------
;Reka
[StateDef 315]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 315
poweradd = -250
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F64
ID = 64
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.4,0.25
sprpriority = -1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F583
ID = 583
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.5,1
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F15,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = F14,5

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
trigger1 = time > 25
anim = F11+random%2
pos = -10,-ceil(48*0.95)
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.2,1.2
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
trigger1 = time < 25
triggerall = timemod = 5,0
triggerall = hitcount < 3
attr = S, NA
damage = 50,20
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(40*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-3
airguard.velocity = -2,-3
air.type = High
air.velocity = -2,-3
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -7
fall = 1

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 8
value = -250


[State 0, HitDef]
type = HitDef
trigger1 = animelem = 8
attr = S, NA
damage = 100,35
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -ceil(75*0.95)
hitsound = 24, 14
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -4,-2
airguard.velocity = -4,-2
air.type = High
air.velocity = -4,-2
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
;-----------------
;Jiongu Attack 3
[StateDef 320]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 213
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0+random%12
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F4,0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = ceil(28*0.95),1
postype = p1  
scale = 1,0.9
sprpriority = 3
ontop = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3 && p2bodydist x <= 400
helpertype = normal
name = "Nici"
ID = 325
stateno = 325
pos = 0,0
postype = p2    
facing = -1
keyctrl = 0
ownpal = 1
size.xscale = 0.95
size.yscale = 0.95

[State 0, Helper]
type = Helper
trigger1 = animelem = 3 && p2bodydist x > 400
helpertype = normal
name = "Nici"
ID = 325
stateno = 325
pos = 100,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.95
size.yscale = 0.95

[State 0, End]
type = ChangeState
trigger1 = animTime = 0
value = 197
ctrl = 1
;-----------------
;Nici
[StateDef 325]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 325
poweradd = -250
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = 90-25+random%50
pos = -10,-ceil(30*0.95)
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.2,1.2
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
persistent = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F64
ID = 64
pos = 0,3
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.6,0.3
sprpriority = -1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F550
ID = 550
pos = 0,5
postype = p1  
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1,1
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F550
ID = 550
pos = 0,8
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.6,0.6
sprpriority = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F15,6

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = 200,50
getpower = -250
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 100, 100
sparkno = 0+random%4
sparkxy = -15, -ceil(30*0.95)
hitsound = 24, 14
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = 0,0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -7
fall = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = time > 9
time = 100
pos = 0,0
ignorehitpause = 1

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
;-----------------
;Jiongu Attack 4
[StateDef 330]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 330
poweradd = -250
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S1,0+random%12
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(150*(1+var(2)*1.25)),ceil(50*(1+var(2)*1.25))
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0,0
sparkno = 2001
sparkxy = -15, -ceil(48*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -6,-2
airguard.velocity = -6,-2
air.type = High
air.velocity = -6,-2
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
;Air Jiongu Attack 4
[StateDef 335]
type = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 335
poweradd = -250
sprpriority = 2

;----------------
[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 1
y = cond(vel y > 0, 0.5, -0.5)

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < 0
y = const(movement.yaccel)*.2

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, End]
type = ChangeState
trigger1 = pos y >= 0
value = 52
;----------------

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S1,0+random%12
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = A, NA
damage = ceil(150*(1+var(2)*1.25)),ceil(50*(1+var(2)*1.25))
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0,0
sparkno = 2001
sparkxy = -15, -ceil(55*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -6,-2
airguard.velocity = -6,-2
air.type = High
air.velocity = -6,-2
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Jiongu Attack 5
[StateDef 340]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 224
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0+random%12
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F4,0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = F290
ID = 23
pos = ceil(3*0.95),2
postype = p1  
scale = 1,0.9
sprpriority = 3
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = F290
ID = 23
pos = ceil(46*0.95),1
postype = p1  
scale = 1,0.9
sprpriority = 3
ontop = 0

[State 0, Helper]
type = Helper
trigger1 = time = 10
trigger2 = time = 18
trigger3 = time = 26
trigger4 = time = 34
trigger5 = time = 42
triggerall = numhelper(340) < 2
helpertype = normal
name = "Reka"
ID = 340
stateno = 345
pos = 60+(time-10)*7,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.95
size.yscale = 0.95

[State 0, End]
type = ChangeState
trigger1 = Time >= 42 && numhelper(340) = 0
value = 199
ctrl = 1
;-----------------
;Reka
[StateDef 345]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 345
poweradd = -50
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F64
ID = 64
pos = 0,2
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.25,0.15
sprpriority = -1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F583
ID = 583
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.4,0.8
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F15,6

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(60*(1+var(2)*1.25)),ceil(12*(1+var(2)*1.25))
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, -ceil(40*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -4,-4
airguard.velocity = -4,-4
air.type = High
air.velocity = -4,-4
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
;-----------------
;Jiongu Attack 6
[StateDef 350]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 213
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0+random%12
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F4,0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = ceil(28*0.95),1
postype = p1  
scale = 1,0.9
sprpriority = 3
ontop = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3 && p2bodydist x <= 300
helpertype = normal
name = "Reka"
ID = 355
stateno = 355
pos = 0,0
postype = p2    
facing = -1
keyctrl = 0
ownpal = 0
size.xscale = 0.95
size.yscale = 0.95

[State 0, Helper]
type = Helper
trigger1 = animelem = 3 && p2bodydist x > 300
helpertype = normal
name = "Reka"
ID = 355
stateno = 355
pos = 100,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.95
size.yscale = 0.95

[State 0, End]
type = ChangeState
trigger1 = Time >= 10 && numhelper(355) = 0
value = 197
ctrl = 1
;-----------------
;Reka
[StateDef 355]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 355
poweradd = -250
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F64
ID = 64
pos = 0,2
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.25,0.15
sprpriority = -1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F583
ID = 583
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.4,0.8
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F15,6

[State 0, HitDef]
type = HitDef
trigger1 = !time && time < 15
attr = S, NA
damage = ceil(50*(1+var(2)*1.25)),ceil(10*(1+var(2)*1.25))
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 30
sparkno = 0+random%4
sparkxy = -15, -ceil(40*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = 2,-8
airguard.velocity = 2,-8
air.type = High
air.velocity = 2,-8
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = animelem = 2
time = 25
pos = 0,-ceil(60*0.95)
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = animelem = 3
time = 3
pos = 0,-ceil(30*0.95)
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = animelem = 4
time = 3
pos = 0,0
ignorehitpause = 1

[State 0, TargetDrop]
type = TargetDrop
triggerall = NumTarget
trigger1 = animelem = 5

[State 0, HitDef]
type = HitDef
trigger1 = animelem = 5
attr = S,NA
damage = ceil(150*(1+var(2)*1.25)),ceil(50*(1+var(2)*1.25))
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
sparkxy = -15,0
hitsound = -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = 2,12
airguard.velocity = 2,12
air.type = High
air.velocity = 2,12
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -8
fall = 1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = target, ishelper = 0
trigger1 = movehit
persistent = 0
value = 105502

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
;-----------------------------------------------------------------
;Odbicie od ziemi
[StateDef 105502]
type = A
movetype= H
physics = S
juggle  = 1
ctrl = 0
anim = 5060+ var(0)*10000
poweradd = 0
sprpriority = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = var(0) != 0
value = 5060 + var(0)*10000

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -5
y = 8

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = pos y >= 0
persistent = 0
anim = F60
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.7,1.7
ownpal = 1  

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = pos y >= 0
persistent = 0
anim = F540
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.7,1.4
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = pos y >= 0
persistent = 0
anim = F550
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.3,1.3
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = pos y >= 0
persistent = 0
value = F15,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = pos y >= 0
persistent = 0
value = F15,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = F14,6

[State 0, End]
type = ChangeState
trigger1 = pos y >= 0
value = 105503
;-----------------------------------------------------------------
;Odbicie od ziemi
[StateDef 105503]
type = A
movetype= H
physics = S
juggle  = 1
ctrl = 0
anim = 5050+ var(0)*10000
poweradd = 0
sprpriority = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = var(0) != 0
value = 5050 + var(0)*10000

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -2
y = -5

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time > 1
statetype = A       
movetype = H      
physics = A 

[State 0, End]
type = SelfState
trigger1 = vel y > 0
value = 5050
;-----------------
;Doton Domu Attack 1
[StateDef 360]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = cond(var(2)=0,360,370)
poweradd = -500
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 1
value = S6,16

[State 0, Explod]
type = Explod
trigger1 = time <= 15 && var(2) = 0
anim = 361
ID = 361
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = -1
removetime = 1
supermovetime = 999
scale = 0.95,0.95
sprpriority = 1
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = (time)*17,256-(time)*17

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 365
ctrl = 1
;-----------------
;Doton Domu Attack 1
[StateDef 362]
type = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = cond(var(2)=0,362,372)
poweradd = -500
sprpriority = 2

;----------------
[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = cond(p2bodydist x/50 < 4,p2bodydist x/50,4)

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, End]
type = ChangeState
trigger1 = pos y >= 0
value = cond(time<15,52,365)
;----------------

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 1
value = S6,16

[State 0, Explod]
type = Explod
trigger1 = time <= 15 && var(2) = 0
anim = 362
ID = 362
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = -1
removetime = 1
supermovetime = 999
scale = 0.95,0.95
sprpriority = 1
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = (time)*17,256-(time)*17
;-----------------
;Doton Domu Attack 1
[StateDef 365]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = cond(var(2)=0,365,375)
poweradd = -500
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S1,0+random%12
channel = 4

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
helpertype = normal
name = "Ziemia"
ID = 366
stateno = 366
pos = ceil(29*0.95),ceil(1*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Efekty Ziemia
[StateDef 366]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 366
poweradd = 0
sprpriority = 2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(55) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109952

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F16,1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F530
ID = 530
pos = -30,0
postype = p1  
facing = 1
bindtime = 1
removetime = -2
vel = 0,0
scale = 1.1,1.1
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F540
ID = 540
pos = 0,0
postype = p1  
facing = 1
bindtime = 1
removetime = -2
vel = 0,0
scale = 1.8,1.8
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F530
ID = 530
pos = 30,0
postype = p1  
facing = -1
bindtime = 1
removetime = -2
vel = 0,0
scale = 1.1,1.1
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F587
ID = 587
pos = 0,0
postype = p1  
facing = 1
bindtime = 1
removetime = -2
vel = 0,0
scale = 1.2,1.2
sprpriority = 6
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F580
ID = 580
pos = 0,5
postype = p1  
facing = 1
bindtime = 1
removetime = -2
vel = 0,0
scale = 1.3,1.3
sprpriority = -2
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F64
ID = 64
pos = 0,0
postype = p1  
facing = 1
bindtime = 1
removetime = -2
vel = 0,0
scale = 1.6,0.7
sprpriority = -2
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time < 15
anim = F591
ID = 591
pos = -30+random%60,0-random%20
vel = -2+random%4,-2-random%4
accel = 0,0.05
angle = random
postype = p1
bindtime = 1
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 1.2,1.2
sprpriority = 5
ownpal = 1
ontop = 0
ignorehitpause = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 40
freq = 160
ampl = -15
phase = 190

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, ST
damage = 500,250
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
sparkxy = -15, 0
hitsound = 5, -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3,-8
airguard.velocity = -3,-8
air.type = High
air.velocity = -3,-8
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, end]
type = destroyself
trigger1 = time = 20
;-----------------
;Doton Domu Attack 2
[StateDef 370]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = cond(var(2)=0,360,370)
poweradd = -500
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 1
value = S6,16

[State 0, Explod]
type = Explod
trigger1 = time <= 15 && var(2) = 0
anim = 361
ID = 361
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = -1
removetime = 1
supermovetime = 999
scale = 0.95,0.95
sprpriority = 1
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = (time)*17,256-(time)*17

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 375
ctrl = 1
;-----------------
;Doton Domu Attack 2
[StateDef 372]
type = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = cond(var(2)=0,362,372)
poweradd = -500
sprpriority = 2

;----------------
[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = cond(p2bodydist x/50 < 4,p2bodydist x/50,4)

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, End]
type = ChangeState
trigger1 = pos y >= 0
value = cond(time<15,52,375)
;----------------

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 1
value = S6,16

[State 0, Explod]
type = Explod
trigger1 = time <= 15 && var(2) = 0
anim = 362
ID = 362
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = -1
removetime = 1
supermovetime = 999
scale = 0.95,0.95
sprpriority = 1
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = (time)*17,256-(time)*17
;-----------------
;Doton Domu Attack 2
[StateDef 375]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = cond(var(2)=0,365,375)
poweradd = -500
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S1,0+random%12
channel = 4

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
helpertype = normal
name = "Ziemia"
ID = 376
stateno = 376
pos = ceil(29*0.95),ceil(1*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, End]
type = ChangeState
trigger1 = Time = 60
value = 0
ctrl = 1
;-----------------
;Efekty Ziemia
[StateDef 376]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 376
poweradd = 0
sprpriority = 2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(55) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109952

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F15,10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F16,1

[State 0, Explod]
type = Explod
trigger1 = timemod = 15,0
anim = F530
ID = 530
pos = -10,5
postype = p1  
facing = -1
bindtime = 1
removetime = -2
vel = 0,0
scale = 1.2,1.2
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = timemod = 15,10
anim = F64
ID = 64
pos = 0,0
postype = p1  
facing = 1
bindtime = 1
removetime = -2
vel = 0,0
scale = 1,0.5
sprpriority = -2
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time < 50
anim = F591
ID = 591
pos = -15+random%30,0-random%20
vel = 1+random%2,-1-random%2
accel = 0,0.05
angle = random
postype = p1
bindtime = 1
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 1.2,1.2
sprpriority = 3+random%3
ownpal = 1
ontop = 0
ignorehitpause = 1

[State 0, Skaly]
type = Explod
trigger1 = timemod = 10,5
anim = F590
ID = 590
pos = 15,-25
postype = p1
bindtime = 3
removetime = -2
scale = 1,1
sprpriority = 4
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, EnvShake]
type = EnvShake
trigger1 = time >= 0 && timemod = 15,0
time = 10
freq = 50
ampl = -10
phase = 190

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, ST
damage = 500,250
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
sparkxy = -15, 0
hitsound = 5, -1
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -6,-6
airguard.velocity = -6,-6
air.type = High
air.velocity = -6,-6
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, end]
type = destroyself
trigger1 = time = 50
;-----------------
;-- Fatality
[StateDef 380]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 380
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 1
v = 12 
value = 0

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = ceil(35*(1+var(2)*1.25)),ceil(7*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 10
sparkno = 0+random%4
sparkxy = -15, -ceil(46*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1
airguard.velocity = -1,-.8
air.type = High
air.velocity = -1,-2
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6
p1stateno = 385

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Fatality
[StateDef 385]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 385
poweradd = 0
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = NumTarget
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 1
attr = S, NT
damage = 0,0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
sparkxy = -15, -ceil(66*0.95)
hitsound = 35, 657757
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = 0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 20
p2stateno = 105275

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = target, ishelper = 0
trigger1 = movehit
persistent = 0
value = 105275

[State 0, Explod]
type = Explod
trigger1 = animelem = 6 && p2movetype = H
persistent = 0
anim = F11
angle = 0
pos = ceil(24*0.95),-ceil(56*0.95)
postype = p1  
facing = -1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.2,1.2
ontop = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = animelem = 6 && p2movetype = H
persistent = 0
anim = F19
angle = 0
pos = ceil(24*0.95),-ceil(56*0.95)
postype = p1  
facing = -1
bindtime = 1
removetime = -2
sprpriority = -2
scale = 1,1
ontop = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = time = 0
time = 110
pos = ceil(19*0.95),-ceil(12*0.95)
ignorehitpause = 1

[State 0, TargetDrop]
type = TargetDrop
triggerall = NumTarget
trigger1 = animtime = 0

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 10
time = 60
movetime = 0
anim = -1
darken = 0
unhittable = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F34,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F34,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F34,2

[State 0, Swiatlo do superpausy]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = 4000
ID = 4000
pos = 190,100
postype = back
bindtime = -1
removetime = 60
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = -100
ownpal = 1
ontop = 0

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time >= 10 && time < 90
time = 60
add = -120,-120,-120
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time >= 10 && time < 90
time = 60
add = -80,-80,-80
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time >= 90 && time < 110
time = 1
add = -120+(time-90)*6,-120+(time-90)*6,-120+(time-90)*6
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time >= 90 && time < 110
time = 1
add = -80+(time-90)*4,-80+(time-90)*4,-80+(time-90)*4
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F24,14

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S1,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = F14,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S1,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,17

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,17

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 1
v = 12 
value = cond(enemynear, life >= 1000, 1000, enemynear, life)

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = NumTarget
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, LifeAdd]
type = LifeAdd
trigger1 = AnimElem = 6 && movehit
persistent = 0
value = ceil(var(12))
kill = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 6 && movehit
persistent = 0
value = -2000;-ceil(var(12)*2.0)

[State 0, Decider]
type = VarSet
trigger1 = time = 0
persistent = 0
v = 11
value = 0

[State 0, Decider]
type = VarSet
trigger1 = time = 10 && movehit
triggerall = (var(3) + var(4) + var(5) + var(6)) > 0
persistent = 0
v = 11
value = cond(var(3)=1,cond(var(4)=1,cond(var(5)=1, cond(var(6)=1,1+random%4,1+random%3),1+random%2),1),cond(var(4)=1, cond(var(5)=1,cond(var(6)=1,2+random%3,2+random%2),2),cond(var(5)=1,cond(var(6)=1,3+random%2,3),4)))

[State 0, VarSet]
type = Null
triggerall = AnimElem = 6
trigger1 = var(11) = 1
trigger1 = var(3) := 0
trigger2 = var(11) = 2
trigger2 = var(4) := 0
trigger3 = var(11) = 3
trigger3 = var(5) := 0
trigger4 = var(11) = 4
trigger4 = var(6) := 0
persistent = 0

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NT
damage = 9999,9999
givepower = 0
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 60
sparkno = 2016
sparkxy = -15, -ceil(56*0.95)
hitsound = 5, 32
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = 0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 20
palfx.time = 60
palfx.add = 100,-0,0
palfx.mul = 256,50,50
palfx.sinadd = 0,0,0,10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = NumTarget
trigger2 = target, ishelper = 1
value = 0
ctrl = 1
;-----------------------------------------------------------------
;Odbicie od ziemi
[StateDef 105275]
type = A
movetype= H
physics = S
juggle  = 1
ctrl = 0
anim = 104150+var(0)*10000
poweradd = 0
sprpriority = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = var(0) != 0
value = 104150+var(0)*10000

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 0, End]
type = ChangeState
trigger1 = time = 200
value = 5050
;-----------------
;Katon Mask Destroy
[StateDef 391]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 390
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F20,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F20,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F20,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 25
value = S6,8

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 10 && time < 25 && timemod = 5,0
anim = F1651
pos = 2,-40
angle = random
postype = p1  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = F1650
pos = 2,3
postype = p1  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1.2
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = [10,25]
value = 66
kill = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = [10,25]
value = -66
v = 10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 0;time = 10 
value = -1000

[State 0, VarSet]
type = VarSet
trigger1 = time = 10 
v = 3
value = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = 391
id = 391
pos = -6,-ceil(55*0.95)
vel = -1,-1
accel = 0,0.03
scale = 0.95,0.95
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = -1
ownpal = 1

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------
;Futon Mask Destroy
[StateDef 392]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 390
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F20,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F20,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F20,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 25
value = S6,8

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 10 && time < 25 && timemod = 5,0
anim = F1651
pos = 2,-40
angle = random
postype = p1  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = F1650
pos = 2,3
postype = p1  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1.2
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = [10,25]
value = 66
kill = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = [10,25]
value = -66
v = 10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 0;time = 10 
value = -1000

[State 0, VarSet]
type = VarSet
trigger1 = time = 10 
v = 4
value = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = 392
id = 392
pos = -6,-ceil(42*0.95)
vel = -1,-1
accel = 0,0.03
scale = 0.95,0.95
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = -1
ownpal = 1

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------
;Raiton Mask Destroy
[StateDef 393]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 390
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F20,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F20,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F20,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 25
value = S6,8

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 10 && time < 25 && timemod = 5,0
anim = F1651
pos = 2,-40
angle = random
postype = p1  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = F1650
pos = 2,3
postype = p1  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1.2
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = [10,25]
value = 66
kill = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = [10,25]
value = -66
v = 10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 0;time = 10 
value = -1000

[State 0, VarSet]
type = VarSet
trigger1 = time = 10 
v = 5
value = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = 393
id = 393
pos = 4,-ceil(42*0.95)
vel = -1,-1
accel = 0,0.03
scale = 0.95,0.95
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = -1
ownpal = 1

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------
;Suiton Mask Destroy
[StateDef 394]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 390
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F20,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F20,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F20,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 25
value = S6,8

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 10 && time < 25 && timemod = 5,0
anim = F1651
pos = 2,-40
angle = random
postype = p1  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = F1650
pos = 2,3
postype = p1  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1.2
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = [10,25]
value = 66
kill = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = [10,25]
value = -66
v = 10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 0;time = 10 
value = -1000

[State 0, VarSet]
type = VarSet
trigger1 = time = 10 
v = 6
value = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = 394
id = 394
pos = 4,-ceil(55*0.95)
vel = -1,-1
accel = 0,0.03
scale = 0.95,0.95
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = -1
ownpal = 1

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------
;-- Katon Pociski
[StateDef 400]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 400
poweradd = 0
sprpriority = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 19 && numexplod(810) = 0
anim = F810
id = 810
pos = ceil(43*0.95),-ceil(55*0.95)
scale = 0.30,0.45
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, Helper]
type = Helper
trigger1 = animelem = 7
trigger2 = animelem = 8
trigger3 = animelem = 9
triggerall = power > 100
helpertype = normal
name = "katon"
ID = 838
stateno = 838
pos = ceil(43*0.95),-ceil(57*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.12
size.yscale = 0.12
supermovetime = 9999
pausemovetime = 9999

;Katon
[State -1, Katon]
type = ChangeState
value = 401
trigger1 = var(50) = 0 && (command = "z" || command = "x")
triggerall = time > 31
trigger2 = var(50) = 1 && random = [0,1+ceil(var(49)*ceil(Power/100)/10)]
triggerall = power >= 200

[State 0, end]
type = ChangeState
trigger1 = time = 40
trigger2 = power < 200
trigger3 = win
trigger4 = lose
trigger5 = drawgame
trigger6 = life = 0
trigger7 = !ALive
trigger8 = var(50) = 1 && p2bodydist x < 0
trigger9 = p2statetype = L
value = 402
ctrl = 1

;-----------------
;Katon
[StateDef 401]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 401
poweradd = 0
sprpriority = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = F810
id = 810
pos = ceil(43*0.95),-ceil(55*0.95)
scale = 0.30,0.45
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
triggerall = power > 100
helpertype = normal
name = "katon"
ID = 838
stateno = 838
pos = ceil(43*0.95),-ceil(57*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.12
size.yscale = 0.12
supermovetime = 9999
pausemovetime = 9999

;Katon
[State -1, Katon]
type = ChangeState
value = 401
trigger1 = var(50) = 0 && (command = "z" || command = "x")
triggerall = time > 9
trigger2 = var(50) = 1 && random = [0,1+ceil(var(49)*ceil(Power/100)/10)]
triggerall = power >= 200

[State 0, end]
type = ChangeState
trigger1 = time = 25
trigger2 = power < 100
trigger4 = win
trigger5 = lose
trigger6 = drawgame
trigger7 = life = 0
trigger8 = !ALive
trigger9 = var(50) = 1 && p2bodydist x < 0
trigger9 = p2statetype = L
value = 402
ctrl = 1
;-----------------
;Katon
[StateDef 402]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 402
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S2,21+random%3

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------
;Katon
[StateDef 838]
type = A
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 838
poweradd = -100
sprpriority = 3

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(51) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109911

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1470
ID = 840
pos = 0,0
postype = p1
bindtime = -1
removetime = -1
supermovetime=9999
pausemovetime=9999
scale = 0.3,0.3
sprpriority = 3
ownpal = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = vel x != 0
ID = 840
angle = -atan(vel y/vel x)*180/PI 

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F271
ID = 6001
pos = -15,0
postype = p1
bindtime = -1
removetime = 40
supermovetime=9999
pausemovetime=9999
scale = 0.4,0.4
sprpriority = 3

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = vel x != 0
ID = 6001
angle = -atan(vel y/vel x)*180/PI

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,10+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,0

[State 0, EnvShake]
type = EnvShake
trigger1 = time%5 = 0
time = 6
freq = 20
ampl = 2
phase = 90

[State 0, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 10
range = -100,75

[State 0, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 8
range = 3,6

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = (4+var(8))*1.5
y = var(10)/50.0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,ST,HT,NT
stateno = 839
time = 9999
forceair = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,ST,NT
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,HP,HT
time = -1

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 5,0
attr = A, ST
damage = 25,10
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = 1402
sparkxy = -5+random%10, 0-random%10
hitsound = 10, 0
guardsound = 10, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1,0
airguard.velocity = -1,0
air.type = High
air.velocity = -1,0
air.hittime = 20
envshake.time = 15
envshake.ampl = -9
envshake.freq = 25
envshake.phase = 10
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10

[State 0, End]
type = changestate
trigger1 = movecontact
trigger2 = time = 100
value = 839

[State 0, End]
type = changestate
trigger1 = pos y > 0
value = 840
persistent = 1


;-----------------
;Katon
[StateDef 839]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 839
poweradd = 0
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1451
ID = 1451
pos = 0,0
postype = p1
bindtime = -1
removetime = 12
supermovetime=9999
pausemovetime=9999
scale = 0.55,0.55
sprpriority = 3

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 840

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= 1
x=2-time/10

[State 0, End]
type = destroyself
trigger1 = time = 12
;-----------------
;Katon
[StateDef 840]
type = S
movetype= A
physics = S
anim = 861
sprpriority = 3

[State 0, VelSet]
type = VelSet
trigger1 = 1 
x = 0
y = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 5
id = 840

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time= 0
anim = F1402
ID = 1402
pos = 0,0
postype = p1
bindtime = 1
removetime = -2
scale = 1.2,1.2
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = F550
ID = 24
pos = 0,3
facing = 1
postype = p1  
scale = 0.4,0.4
sprpriority = 0
bindtime = 1
ownpal = 1
ontop = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 0, End]
type = destroyself
trigger1 = time = 40
;-----------------
;-- Katon Hold
[StateDef 410]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 410
poweradd = 0
sprpriority = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 25 && numexplod(810) = 0
anim = F810
id = 810
pos = ceil(43*0.95),-ceil(55*0.95)
scale = 0.4,0.6
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time > 28 
value = -10

[State 0, Helper]
type = Helper
trigger1 = time = 25 && numhelper(846) = 0
helpertype = normal
name = "katon"
ID = 846
stateno = 846
pos = ceil(43*0.95),-ceil(57*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.7
size.yscale = 0.7
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = time > 50 && var(50) = 0 && command != "hold_z"
trigger2 = power = 0
trigger3 = time > 50 && var(50) = 1 && random = [0,25+ceil(var(49)/2)]
trigger4 = win
trigger5 = lose
trigger6 = drawgame
trigger7 = life = 0
trigger8 = !ALive
trigger9 = time > 30 && var(50) = 1 && p2bodydist x < 0
value = 402
ctrl = 1
;-----------------
;Katon
[StateDef 846]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 846
poweradd = -200
sprpriority = 3

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(51) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109912

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 410
time = 1
facing = 0
pos = ceil(43*0.95),-ceil(57*0.95)

[State 0, EnvShake]
type = EnvShake
trigger1 = time%5 = 0
time = 20
freq = 25
ampl = -3
phase = 90

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,20

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,2

[State 0, VarAdd]
type = VarAdd
trigger1 = time > 0
triggerall = var(12) < 40
trigger2 = var(12) = 0
v = 12
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(12) >= 40
v = 12
value = 0

[State 0, Ogien na ziemi]
type = Explod
ownpal = 1
trigger1 = time%6 = 0 && numexplod(1462) < 10 
anim = F1462
ID = 1462
pos = 50+ceil(var(12)*6),-pos y +15
postype = p1
bindtime = 5
removetime = -2
scale = 2.5,2
sprpriority = 5
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, Iskry]
type = Explod
ownpal = 1
trigger1 = time % 16 = 0 && numexplod(271) <= 2
anim = F271
ID = 271
pos = 100,5
postype = p1
vel = 0,0
bindtime = 1
removetime = 60
supermovetime=9999
pausemovetime=9999
scale = 1,1
sprpriority = 5
ownpal = 1

[State 0, Kola]
type = Explod
ownpal = 1
trigger1 = time > 15 && time % 20 = 0 && numexplod(820) <= 1
anim = F820
id = 820
pos = 200,0
scale = 1.3,2
vel = -4,0
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 6
supermovetime=9999
pausemovetime=9999

[State 0, hitdef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 5,0
attr = S, ST
damage = 15,5
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 4
sprpriority = 4
pausetime = 0, 4
sparkno = 1400
sparkxy = -30+random%30, -7-random%40
hitsound = F10, 0
guardsound = F10, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3,-2
airguard.velocity = -3,-1
air.type = High
air.velocity = -3,-1
air.hittime = 20
fall = 1
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10

[State 0, end]
type = changestate
trigger1 = parent, stateno != 410
value = 847
;-----------------
;Katon
[StateDef 847]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 847
poweradd = 0
sprpriority = 3

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,2

[State 0, end]
type = destroyself
trigger1 = animtime = 0
;-----------------
;-- Katon Zukkoku
[StateDef 420]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 420
poweradd = 0
sprpriority = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 50 && numexplod(810) = 0
anim = F810
id = 810
pos = ceil(43*0.95),-ceil(55*0.95)
scale = 0.4,0.6
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1
angle = -10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 5
trigger3 = animelem = 7
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 9
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 12
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 12
value = S6,6

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time > 50
value = -15

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 40
value = F19,2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 40
anim = F2000
id = 2000
pos = ceil(41*0.95),-ceil(55*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 50
helpertype = normal
name = "katon"
ID = 425
stateno = 425
pos = ceil(43*0.95),-ceil(57*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 2
size.yscale = 1.2
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = time = 200
value = 402
ctrl = 1
;-----------------
;Katon
[StateDef 425]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 425
poweradd = -250
sprpriority = 4

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(51) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109914

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -10

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 420
time = 1
facing = 0
pos = ceil(43*0.95),-ceil(57*0.95)

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 450
time = 1
facing = 0
pos = ceil(18*0.95),-ceil(57*0.95)

[State 0, EnvShake]
type = EnvShake
trigger1 = time%5 = 0
time = 10
freq = 20
ampl = 2
phase = 90

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,20

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 50,0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,2

[State 0, Ogien na ziemi]
type = Explod
ownpal = 1
trigger1 = time = 20
anim = 427
ID = 427
pos = 175,-pos y
postype = p1
bindtime = -1
removetime = -1
scale = 0.48,0.65
sprpriority = 3
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, Iskry]
type = Explod
ownpal = 1
trigger1 = time = 20
anim = 428
ID = 428
pos = 50,-pos y
postype = p1
vel = 0,0
bindtime = -1
removetime = -1
scale = 0.4,0.2
sprpriority = 6
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, Iskry]
type = Explod
ownpal = 1
trigger1 = time%30 = 0 && numexplod(271) < 2 && time > 20
anim = F271
ID = 271
pos = 100,-15
postype = p1
vel = 0,0
bindtime = -1
removetime = -2
scale = 1.2,1.2
sprpriority = 5
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, Iskry]
type = Explod
ownpal = 1
trigger1 = time%30 = 0 && numexplod(272) < 2 && time > 40
anim = F271
ID = 272
pos = 250,-50
postype = p1
vel = 0,0
bindtime = -1
removetime = -2
scale = 2,2
sprpriority = 5
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, Wybuch ziemia]
type = Explod
ownpal = 1
trigger1 = time%30 = 0 && numexplod(1200) < 4 && time > 30
anim = F1200
ID = 1200
pos = 350,-pos y-20
postype = p1
bindtime = 10
vfacing = -1
removetime = 60
scale = 1.8,1.8
sprpriority = 6
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, Kola]
type = Explod
ownpal = 1
trigger1 = time > 10 && time%20 = 0 && numexplod(810) < 2
anim = F810
id = 810
pos = 100,20
scale = 1.2,2.5
vel = -2,-0.5
angle = -10
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, Kola]
type = Explod
ownpal = 1
trigger1 = time > 20 && time%5 = 0 && numexplod(1463) < 10
anim = F1462
id = 1463
pos = 50+random%400,50-random%80
scale = 1.5,1.5
vel = -3,-1
angle = time*35
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, hitdef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 5,0
attr = S, ST
damage = 40,20
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 4
sprpriority = 4
pausetime = 0, 4
sparkno = 1400
sparkxy = -30+random%30, -7-random%40
hitsound = F10, 0
guardsound = F10, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3,-2
airguard.velocity = -3,-1
air.type = High
air.velocity = -3,-1
air.hittime = 20
fall = 1
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10

[State 0, end]
type = changestate
trigger1 = parent, stateno != 420
trigger1 = parent, stateno != 450
value = 426
;-----------------
;Katon
[StateDef 426]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 426
poweradd = 0
sprpriority = 4

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time = [10,35]
ID = 427
trans = addalpha
alpha = 256-(time-10)*10,256

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 35
id = 427

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time = [10,35]
ID = 428
trans = addalpha
alpha = 256-(time-10)*10,256

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 35
id = 428

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -10

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,2

[State 0, end]
type = destroyself
trigger1 = animtime = 0
;-----------------
;-- Katon Air
[StateDef 430]
type = A
movetype= A
physics = A
juggle  = 1
velset = 3,-3
ctrl = 0
anim = 430
poweradd = 0
sprpriority = 2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 25 && numexplod(810) = 0
anim = F810
id = 810
pos = ceil(25*0.95),-ceil(62*0.95)
scale = 0.40,0.55
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = 3
supermovetime=9999
pausemovetime=9999
ownpal = 1
angle = 315

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, VelSet]
type = VelSet
trigger1 = time = 25
x = -5
y = -3

[State 0, Helper]
type = Helper
trigger1 = time = 25
helpertype = normal
name = "katon"
ID = 864
stateno = 864
pos = ceil(25*0.95),-ceil(32*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.6
size.yscale = 0.6
supermovetime = 9999
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = time = 36
value = 431
ctrl = 1
;-----------------
;Katon
[StateDef 431]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 431
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S2,21+random%3

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-----------------
;Katon
[StateDef 864]
type = A
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 864
poweradd = -1000
sprpriority = 3

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(51) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109912

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F270
ID = 6001
pos = 0,0
postype = p1
bindtime = -1
removetime = -1
supermovetime=9999
pausemovetime=9999
scale = 1,1
sprpriority = 3
ownpal = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = vel x != 0
ID = 6001
angle = atan(vel y/vel x)*180/PI

[State 0, EnvShake]
type = EnvShake
trigger1 = time%5 = 0
time = 10
freq = 30
ampl = -3
phase = 90

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = [10,20] 
x = 3+time/2
y = 3+time/2

[State 0, VelSet]
type = VelSet
trigger1 = time > 20 && time < 100 && vel x > 5
x = 8-(time-20)/20+var(1)
y = 8-(time-20)/20+var(1)

[State 0, VelSet]
type = VelSet
trigger1 = time > 20 && vel x <= 5
x = 5
y = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,20

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,2

[State 0, Iskry]
type = Explod
ownpal = 1
trigger1 = time%30 = 0 && numexplod(271) < 2 && time < 100
anim = F271
ID = 271
pos = 15,15
postype = p1
vel = 0,0
bindtime = -1
removetime = -2
scale = 1.1,1.1
sprpriority = 5
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = vel x != 0
ID = 271
angle = -atan(vel y/vel x)*180/PI

[State 0, Iskry]
type = Explod
ownpal = 1
trigger1 = time%30 = 0 && numexplod(272) < 2 && time < 100
anim = F271
ID = 272
pos = -10,-10
postype = p1
vel = 0,0
bindtime = -1
removetime = -2
scale = 1.2,1.2
sprpriority = 5
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = vel x != 0
ID = 272
angle = -atan(vel y/vel x)*180/PI

[State 0, Kola]
type = Explod
ownpal = 1
trigger1 = time > 10 && time%10 = 0 && numexplod(820) < 2 && time < 100
anim = F810
id = 810
pos = 15,15
scale = 1.3,2
vel = -3,-3
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 4
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = vel x != 0
ID = 810
angle = atan(vel y/vel x)*180/PI

[State 0, Kula]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1480
id = 1480
pos = 0,0
postype = p1
bindtime = -1
removetime = -1
scale = 1.5,1.5
sprpriority = 4
angle = -45
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 3,0
attr = A, ST
damage = 75,25
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 3
sparkno = 1400
sparkxy = -30+random%30, -5-random%30
hitsound = F10, 0
guardsound = F10, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -5,5
airguard.velocity = -5,5
air.type = High
air.velocity = -5,5
air.hittime = 20
envshake.time = 15
envshake.ampl = -7
envshake.freq = 25
envshake.phase = 10
fall = 1
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10

[State 0, end]
type = changestate
trigger1 = pos y > -10
value = 866
;-----------------
;Katon ziemia
[StateDef 866]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 866
poweradd = 0
sprpriority = 3

[State 0, Wybuch]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1450
id = 1450
pos = 0,0
scale = 1.4,0.5
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 3
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 6001

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1480

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F550
ID = 550
pos = 0,5
postype = p1
bindtime = 1
removetime = 40
supermovetime = 9999
pausemovetime = 9999
scale = 1.6,1.6
sprpriority = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1400
ID = 1400
pos = 0,-10
vel = -1.7,-2
postype = p1
bindtime = 1
removetime = 30
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 3
ownpal = 1

[State 0, Wybuch]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1340
id = 1340
pos = 0,0
scale = 1,1
vel = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 5
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, Swietliki]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F1331
id = 1331
pos = 0,0
scale = 1.5,1.5
vel = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 6
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = !time
hitonce = 1
attr = S, ST
damage = 200,100
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 4
sprpriority = 4
pausetime = 0, 0
sparkno = 1400
sparkxy = -30+random%30, -5-random%30
hitsound = F10, 0
guardsound = F10, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3,-6
airguard.velocity = -3,-6
air.type = High
air.velocity = -3,-6
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10

[State 0, end]
type = destroyself
trigger1 = time = 50
;-----------------
;-- Jiongu: Katon Zukkoku
[StateDef 440]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 440
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 5
trigger3 = animelem = 7
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S3,2

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Fire Jiongu"
ID = 450
stateno = 445
pos = -50+random%100,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.95
size.yscale = 0.95
pausemovetime = 9999
size.ground.back = ceil(15*0.95)
size.ground.front = ceil(10*0.95)
size.air.back = ceil(10*0.95)
size.air.front = ceil(15*0.95)
size.height = ceil(75*0.95)

[State 0, end]
type = ChangeState
trigger1 = time = 60
value = 0
ctrl = 1
;-----------------
;Jiongu: Katon
[StateDef 445]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 445
poweradd = -2750
sprpriority = 2

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time = 0
v = 3
value = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 450
ctrl = 1
;-----------------
;Jiongu: Katon
[StateDef 450]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 450
poweradd = 0
sprpriority = 2
facep2 = 1 

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 15 && time < 155 && numexplod(810) = 0
anim = F810
id = 810
pos = ceil(18*0.95),-ceil(55*0.95)
scale = 0.4,0.6
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
ownpal = 1
angle = -10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F19,2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = F2000
id = 2000
pos = ceil(18*0.95),-ceil(55*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 20
helpertype = normal
name = "katon"
ID = 425
stateno = 425
pos = ceil(18*0.95),-ceil(57*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.8
size.yscale = 1.2
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 455
ctrl = 1
;-----------------
;Jiongu: Katon
[StateDef 455]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 455
poweradd = 0
sprpriority = 2

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = animtime = 0
v = 3
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, end]
type = destroyself
trigger1 = animtime = 0
;-----------------
;-- Futon: Tornado 
[StateDef 500]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 500
poweradd = 0
sprpriority = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = 0;time >= 25 && numexplod(810) = 0
anim = F810
id = 810
pos = ceil(43*0.95),-ceil(55*0.95)
scale = 0.4,0.6
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, Helper]
type = Helper
trigger1 = time = 25
helpertype = normal
name = "Futon"
ID = 505
stateno = 505
pos = ceil(43*0.95),-ceil(57*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = time = 40
value = 502
ctrl = 1
;-----------------
;Futon
[StateDef 502]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 502
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S2,21+random%3

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;------------------
;Futon
[StateDef 505]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 505
poweradd = -1000
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.4,0.2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(54) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109942

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = time = [5,45]
trigger1 = pos y < 0
time = 1
pos = 35,15

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F460
ID = 460
scale = 0.8,0.5
pos = 0,0
postype = p1  
facing = 1
bindtime = -1
removetime = 25
sprpriority = 4
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = vel x != 0
ID = 460
angle = -atan(vel y/vel x)*180/PI 

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 507
id = 507
pos = 0,0
scale = 0.8,0.4
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 4
supermovetime = 99999
pausemovetime = 99999
ownpal = 0

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = vel x != 0
ID = 507
angle = -atan(vel y/vel x)*180/PI 

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 10
y = 5

[State 0, AngleDraw]
type = AngleDraw
trigger1 = vel x != 0
value = -atan(vel y/vel x)*180/PI 

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%3
angle = -25+random%50
pos = 0,0
postype = p1  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 0.8,0.8
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F643
pos = -5-random%20,-15-random%30
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,0

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = timemod = 5,0
triggerall = hitcount < 3
attr = A, ST
damage = 50,20
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0,0
sparkno = 4
sparkxy = -15, 0
hitsound = 14, 5
guardsound = 14, 5
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -4,2
airguard.velocity = -4,2
air.type = High
air.velocity = -4,2
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y >= 0
value = 506

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
;------------------
;Futon
[StateDef 506]
type = S
movetype= A
physics = S
juggle  = 1
velset = 5,0
ctrl = 0
anim = 506
poweradd = 0
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.7,0.5

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(54) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109942

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F16,2

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = F530
ID = 530
pos = -20,5
postype = p1  
facing = 1
bindtime = 10
removetime = -2
vel = 0,0
scale = 0.6,0.6
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = F530
ID = 530
pos = 20,5
postype = p1  
facing = -1
bindtime = 10
removetime = -2
vel = 0,0
scale = 0.6,0.6
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F587
ID = 587
pos = 0,10
postype = p1  
facing = 1
bindtime = 10
removetime = -2
vel = 0,0
scale = 0.4,0.4
sprpriority = 6
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time < 30
triggerall = timemod = 2,0
anim = F591
ID = 591
pos = -25+random%50,10-random%20
vel = -2+random%4,-2-random%4
accel = 0,0.05
angle = random
postype = p1
bindtime = 1
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.6,0.6
sprpriority = 5
ownpal = 1
ontop = 0
ignorehitpause = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20
freq = 100
ampl = -5
phase = 190

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 508
ID = 508
scale = 0.7,0.7
pos = 0,5
postype = p1  
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
sprpriority = 5
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, VelSet]
type = VelSet
trigger1 = 1
y = 0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%3
angle = 90-25+random%50
pos = 0,-30-random%30
postype = p1  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F643
pos = -5-random%20,-15-random%30
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 20,0
value = F14,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F15,11

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = timemod = 5,0
triggerall = hitcount < 6
attr = S, ST
damage = 50,20
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 3
sparkno = 4
sparkxy = -15, 0
hitsound = 14, 5
guardsound = 14, 5
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3,-9
airguard.velocity = -3,-9
air.type = High
air.velocity = -3,-9
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
;-----------------
;-- Futon: Ostrza
[StateDef 510]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 510
poweradd = 0
sprpriority = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 6
anim = 519
id = 519
pos = ceil(40*0.95),0
scale = 0.8,0.7
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
trigger5 = animelem = 10
value = S6,6

[State 0, Helper]
type = Helper
trigger1 = animelem = 6
helpertype = normal
name = "Futon: Blade"
ID = 515
stateno = 515
pos = ceil(43*0.95),-ceil(57*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 0, Helper]
type = Helper
trigger1 = animelem = 7
helpertype = normal
name = "Futon: Blade"
ID = 516
stateno = 515
pos = ceil(43*0.95),-ceil(57*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 0, Helper]
type = Helper
trigger1 = animelem = 8
helpertype = normal
name = "Futon: Blade"
ID = 517
stateno = 515
pos = ceil(43*0.95),-ceil(57*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.8
size.yscale = 0.8

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 502
ctrl = 1
;------------------
;Futon
[StateDef 515]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 515+random%4
poweradd = -500
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time < 10
scale = 0.1+time*0.09,0.1+time*0.09

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(54) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109943

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = vel x != 0
value = -atan(vel y/vel x)*180/PI 

[State 0, VelSet]
type = VelSet
trigger1 = ishelper(515)
x = 14-time/5
y = -3+random%5

[State 0, VelSet]
type = VelSet
trigger1 = ishelper(516)
x = 14-time/6
y = -3+random%5

[State 0, VelSet]
type = VelSet
trigger1 = ishelper(517)
x = 14-time/7
y = -3+random%5

[State 0, VelSet]
type = VelSet
trigger1 = ishelper(518)
x = 14-time/8
y = -3+random%5

[State 0, VelSet]
type = VelSet
trigger1 = ishelper(519)
x = 14
y = -3+random%5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H ;&& timemod = 2,0
anim = F10+random%3
angle = -25+random%50
pos = -5-random%20,-20-random%30
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F643
pos = -5-random%20,-15-random%30
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 0.7,0.7
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,0

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = ishelper(565)
time = 1
pos = 15,30

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = timemod = 5,0
trigger1 = !ishelper(517)
attr = A, ST
damage = 50,20
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = 4
sparkxy = -15,0
hitsound = 14,5
guardsound = 14, 5
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -5,-1
airguard.velocity = -5,-1
air.type = High
air.velocity = -5,-1
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = timemod = 5,0
trigger1 = ishelper(517)
attr = A, ST
damage = 50,20
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = 4
sparkxy = -15,0
hitsound = 14,5
guardsound = 14, 5
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -7,-3
airguard.velocity = -7,-3
air.type = High
air.velocity = -7,-3
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = destroyself
trigger1 = Time = 25
;-----------------
;-- Futon Atsugai
[StateDef 520]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 520
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 5
trigger3 = animelem = 7
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S3,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 9
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 12
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 12
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 40
value = F19,4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 40
anim = F2005
id = 2005
pos = ceil(41*0.95),-ceil(57*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 50
value = F14,6

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 50
value = -2500

[State 0, Helper]
type = Helper
trigger1 = time = 50
helpertype = normal
name = "futon"
ID = 525
stateno = 525
pos = 200,0;-57*0.95
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = time = 100
value = 502
ctrl = 1
;---------------------------------------------
;Atsugai
[StateDef 525]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 525
poweradd = 0
sprpriority = 6

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(54) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109944

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,11

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 40,0
value = S6,14

[State 0, EnvShake]
type = EnvShake
trigger1 = timemod = 5,0
time = 10
freq = 40
ampl = -10
phase = 100

[State 0,Wybuch]
type = Explod
ownpal = 1
trigger1 = timemod = 20,0
anim = 529
id = 529
pos = 0,0
scale = 0.8,0.8
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 7
supermovetime = 9999
pausemovetime = 9999

[State 0, Wybuch]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 527
id = 527
pos = 0,0
scale = 0.7,0.7
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 6
supermovetime = 9999
pausemovetime = 9999

[State 0, Wybuch Dym]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F587
id = 587
pos = 0,0
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 7
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999
scale = 1.4,1.4
ownpal = 1

[State 0, Dym]
type = Explod
ownpal = 1
trigger1 = time = 0 
trigger2 = time > 0 && timemod = 35,0
anim = F580
id = 580
pos = 0,20
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 5
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999
scale = 3,3
ownpal = 1

[State 0, Wiatr]
type = Explod
ownpal = 1
trigger1 = time = 0 
anim = F1370
id = 1370
pos = -50,40
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 7
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999
scale = 1.7,1.7
ownpal = 1

[State 0, Wiatr]
type = Explod
ownpal = 1
trigger1 = time = 0 
anim = F1370
id = 1370
pos = 50,40
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 7
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999
scale = 1.7,1.7
ownpal = 1

[State 0, Ziemia]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 524
id = 524
pos = 0,15
postype = p1
facing = -1
bindtime = 1
removetime = 185
sprpriority = 4
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
ownpal = 1

[State 0, Rozwalona ziemia]
type = Explod
ownpal = 1
trigger1 = time = 0 
trigger2 = time > 0 && timemod = 50,0
anim = F64
id = 64
pos = 0,20
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = -2
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999
scale = 2.4,0.8
ownpal = 1

[State 0, Kamienie]
type = Explod
trigger1 = timemod = 5,0
anim = F591
ID = 591
pos = -150+random%300,0-random%20
vel = -1+random%3,-6
accel = 0,0.2
angle = random
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 3+random%5
ontop = 0

[State 0, Kamienie]
type = Explod
trigger1 = timemod = 5,0
anim = F591
ID = 591
pos = -200+random%100,0-random%20
vel = -3+random%2,-6
accel = 0,0.2
angle = random
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 3+random%5
ontop = 0

[State 0, Kamienie]
type = Explod
trigger1 = timemod = 5,0
anim = F591
ID = 591
pos = 100+random%100,0-random%20
vel = 1+random%2,-6
accel = 0,0.2
angle = random
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 3+random%5
ontop = 0

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = -15

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 3,0
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = random
pos = -10+random%20,-15-random%40
postype = p2  
facing = 1
bindtime = 15
removetime = -2
sprpriority = -2+random%4
scale = 1,1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 811, 1]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 5,0
triggerall = hitcount < 10
attr = S, ST
damage = 100,50
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3
pausetime = 0, 10
sparkno = S1234
sparkxy = -15, -40
hitsound = S36,33
guardsound = S36,33
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -7,-8
airguard.velocity = -7,-8
air.type = High
air.velocity = -7,-8
air.hittime = 20
envshake.time = 60
envshake.ampl = 6
envshake.freq = 60
fall = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 100
value = 526
;-----------------
;Atsugai
[StateDef 526]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 526
poweradd = 0
sprpriority = 6

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 6

[State 0, EnvShake]
type = EnvShake
trigger1 = timemod = 5,0
time = 5
freq = 40
ampl = -5
phase = 50

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 1
id = 527

[State 0, Wybuch]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 528
id = 528
pos = 0,0
scale = 0.7,0.7
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 6
supermovetime = 9999
pausemovetime = 9999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 20
;------------------
;-- Futon Air
[StateDef 530]
type = A
movetype= A
physics = A
juggle  = 1
velset = -1.3,-5
ctrl = 0
anim = 530
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, Helper]
type = Helper
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
triggerall = power > 100
helpertype = normal 
name = "Futon"
ID = 535
stateno = 535
pos = ceil(30*0.95),-ceil(58*0.95)
postype = p1    
facing = 1
ownpal = 1
size.xscale = 0.1
size.yscale = 0.05
supermovetime = 9999
pausemovetime = 9999

;Futon
[State -1, Futon]
type = ChangeState
value = 531
trigger1 = var(50) = 0 && (command = "z" || command = "x")
triggerall = time > 31
trigger2 = var(50) = 1 && random = [0,1+ceil(var(49)*ceil(Power/100)/10)]
trigger2 = abs((p2dist x/((p2dist y+1)+cond(p2statetype=C,-5,-20)))*10) = [3,16]
triggerall = power >= 200

[State 0, end]
type = ChangeState
trigger1 = time = 40
trigger2 = power < 200
trigger3 = win
trigger4 = lose
trigger5 = drawgame
trigger6 = life = 0
trigger7 = !ALive
trigger8 = var(50) = 1 && p2bodydist x < 0
trigger9 = p2statetype = L
value = 532
ctrl = 1

;------------------
;Futon Air
[StateDef 531]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 531
poweradd = 0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 2
y = -1.3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S6,15
channel = 8

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
triggerall = power > 100
helpertype = normal
name = "Futon"
ID = 535
stateno = 535
pos = ceil(30*0.95),-ceil(58*0.95)
postype = p1    
facing = 1
ownpal = 1
size.xscale = 0.1
size.yscale = 0.05
supermovetime = 9999
pausemovetime = 9999

;Futon
[State -1, Futon]
type = ChangeState
value = 531
trigger1 = var(50) = 0 && (command = "z" || command = "x")
triggerall = time > 9
trigger2 = var(50) = 1 && random = [0,1+ceil(var(49)*ceil(Power/100)/10)]
trigger2 = abs((p2dist x/((p2dist y+1)+cond(p2statetype=C,-5,-20)))*10) = [3,16]
triggerall = power >= 200

[State 0, end]
type = ChangeState
trigger1 = time = 25
trigger2 = power < 100
trigger4 = win
trigger5 = lose
trigger6 = drawgame
trigger7 = life = 0
trigger8 = !ALive
trigger9 = var(50) = 1 && p2bodydist x < 0
trigger9 = p2statetype = L
value = 532
ctrl = 1
;-----------------
;Futon Air
[StateDef 532]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 532
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S2,21+random%3

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-----------------
;Futon Air
[StateDef 535]
type = A
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 535
poweradd = -100
sprpriority = 3

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(54) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109941

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%2
angle = -25+random%50
pos = 0,0
postype = p1  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 0.5,0.5
ontop = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F643
pos = -3+random%8,5-random%10
postype = p1  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 0.5,0.5
ontop = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time = 0
value = 45

[State 0, AngleDraw]
type = AngleDraw
trigger1 = vel x != 0
value = -atan(vel y/vel x)*180/PI 

[State 0, Explod]
type = Explod
trigger1 = time = 0
trigger2 = timemod = 22,0
anim = 507
id = 507
pos = 0,0
scale = 0.3,0.15
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 4
supermovetime = 99999
pausemovetime = 99999
ownpal = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = vel x != 0
ID = 507
angle = -atan(vel y/vel x)*180/PI 

[State 0, EnvShake]
type = EnvShake
trigger1 = time%5 = 0
time = 6
freq = 20
ampl = 2
phase = 90

[State 0, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 10
range = -100,75

[State 0, VarRandom]
type = VarSet
trigger1 = time = 0
v = 7
value = 2+random%6

[State 0, VarRandom]
type = VarSet
trigger1 = time = 0
v = 8
value = 3+random%3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 3+var(7)
y = (4+var(8))*1.5;var(10)/50.0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,ST,HT,NT
stateno = 536
time = -1
forceair = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,ST,NT
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,HP,HT
time = -1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,0

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = timemod = 5,0
attr = A, ST
damage = 45,20
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 4
sparkxy = -15,0
hitsound = 14, 5
guardsound = 14, 5
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1,0
airguard.velocity = -1,0
air.type = High
air.velocity = -1,0
air.hittime = 20
envshake.time = 15
envshake.ampl = -9
envshake.freq = 25
envshake.phase = 10

[State 0, End]
type = changestate
trigger1 = movecontact
trigger2 = animtime = 0
trigger3 = pos y > -1
value = 536
;-----------------
;Futon Air
[StateDef 536]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 536
poweradd = 0
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = vel x != 0
value = -atan(vel y/vel x)*180/PI 

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 507

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,6

[State 0, Explod]
type = Explod
trigger1 = time = 0 && pos y > -1
anim = F1090
id = 1090
pos = 20,0
scale = 0.3,0.3
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
supermovetime = 99999
pausemovetime = 99999
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0 && pos y > -1
anim = F1200
id = 1200
pos = 20,0
scale = 0.3,0.3
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
supermovetime = 99999
pausemovetime = 99999
ownpal = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 0, VelSet]
type=VelSet
trigger1= 1
x=2-time/10

[State 0, End]
type = destroyself
trigger1 = animtime = 0
;-----------------
;-- Jiongu: Futon Atsugai
[StateDef 540]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 540
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 5
trigger3 = animelem = 7
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S3,0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Wind Jiongu"
ID = 550
stateno = 545
pos = -50+random%100,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.95
size.yscale = 0.95
pausemovetime = 9999
size.ground.back = ceil(30*0.95)
size.ground.front = ceil(27*0.95)
size.air.back = ceil(30*0.95)
size.air.front = ceil(27*0.95)
size.height = ceil(45*0.95)

[State 0, end]
type = ChangeState
trigger1 = time = 60
value = 0
ctrl = 1
;-----------------
;Jiongu: Futon
[StateDef 545]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 545
poweradd = -3000
sprpriority = 2

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time = 0
v = 4
value = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 550
ctrl = 1
;-----------------
;Jiongu: Futon
[StateDef 550]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 550
poweradd = 0
sprpriority = 2
facep2 = 1 

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F19,4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = F2005
id = 2005
pos = ceil(27*0.95),-ceil(28*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = F14,6

[State 0, Helper]
type = Helper
trigger1 = time = 20
helpertype = normal
name = "futon"
ID = 525
stateno = 525
pos = 200,0;-57*0.95
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 555
ctrl = 1
;-----------------
;Jiongu: Futon
[StateDef 555]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 555
poweradd = 0
sprpriority = 2

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = animtime = 0
v = 4
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, end]
type = destroyself
trigger1 = animtime = 0
;-----------------
;-- Raiton Hold
[StateDef 600]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 600
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 3,0
triggerall = time >= 20
anim = F1300+random%3
id = 1300
pos = 0+random%50,-ceil(55*0.95)-random%15
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 2+random%3
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = F11,6

[State 0, Helper]
type = Helper
trigger1 = time = 25
helpertype = normal
name = "Raiton"
ID = 605
stateno = 605
pos = ceil(43*0.95),-ceil(58*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = time > 75 && var(50) = 0 && command != "hold_z"
trigger2 = power = 0
trigger3 = time > 75 && var(50) = 1 && random = [0,25+ceil(var(49)/2)]
trigger4 = win
trigger5 = lose
trigger6 = drawgame
trigger7 = life = 0
trigger8 = !ALive
trigger9 = time > 75 && var(50) = 1 && p2bodydist x != [-60,140]
trigger10 = time > 75 && var(50) = 1 && p2bodydist y != [-80,80]
value = 602
ctrl = 1
;-----------------
;Raiton
[StateDef 602]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 602
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S2,21+random%3

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------
;Raiton Hold
[StateDef 605]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 605
poweradd = -500
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, EnvShake]
type = EnvShake
trigger1 = timemod = 5,0
time = 10
freq = 30
ampl = 3
phase = 50

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time > 10
value = -10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,13

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 30,0
value = F11,4

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(52) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109921

[State 0, 1]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 5,0
attr = S, ST
damage = 30-time/20,10-time/30
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 5
sparkno = 4
sparkxy = -15, 0
hitsound = 11, 5
guardsound = 11, 5
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -4,-4
airguard.velocity = -4,-.8
air.type = High
air.velocity = -4,-4
air.hittime = 20
fall = 1
envshake.time = 30
envshake.ampl = 4
envshake.freq = 30
palfx.time = 50
palfx.mul = 100,200,200
palfx.add = 50,50,200
palfx.sinadd = 150,150,300,4

[State 0, BindToParent]
type = BindToParent
trigger1 = root,stateno = 600
time = 1
pos = 43*0.95,-58*0.95

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0 && numexplod(1410) = 0
trigger2 = time > 0 && timemod = 5,1 && numexplod(1410) = 0
anim = F1410
id = 1410
pos = 0,0
postype = p1
facing = -1
vfacing = -1
bindtime = -1
removetime = -1
sprpriority = 4
removeongethit = 1
scale = 1.35,1.35
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,stateno != 600
id = 1410

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0 && numexplod(510) = 0
trigger2 = time > 0 && timemod = 5,1 && numexplod(510) = 0
anim = F510
id = 510
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 4
removeongethit = 1
scale = 1.7,1.7
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0 && numexplod(511) = 0
trigger2 = time > 0 && timemod = 5,1 && numexplod(511) = 0
anim = F510
id = 511
pos = 0,0
postype = p1
facing = -1
vfacing = -1
bindtime = -1
removetime = -1
sprpriority = 4
removeongethit = 1
scale = 1.7,1.7
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,stateno != 600
id = 510

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,stateno != 600
id = 511

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0 && numexplod(1380) = 0
trigger2 = time > 0 && timemod = 5,1 && numexplod(1380) = 0
anim = F1380
id = 1380
pos = -25,-pos y
postype = p1
facing = -1
bindtime = -1
removetime = -1
sprpriority = 4
removeongethit = 1
scale = 1,1
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0 && numexplod(1381) = 0
trigger2 = time > 0 && timemod = 5,1 && numexplod(1381) = 0
anim = F1380
id = 1381
pos = 25,-pos y
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 4
removeongethit = 1
scale = 1,1
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,stateno != 600
id = 1380

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,stateno != 600
id = 1381

[State 0, end]
type = Destroyself
trigger1 = parent, stateno != 600
;-----------------
;-- Raiton
[StateDef 610]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 600
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 3,0
triggerall = time >= 20
anim = F1300+random%3
id = 1300
pos = 0+random%50,-ceil(55*0.95)-random%15
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 2+random%3
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = F11,6

[State 0, Helper]
type = Helper
trigger1 = time = 30
trigger2 = time = 40
trigger3 = time = 50
helpertype = normal
name = "Raiton"
ID = 615
stateno = 615
pos = -75+random%150,0
postype = p2    
facing = -1
keyctrl = 0
ownpal = 1
size.xscale = 0.7
size.yscale = 0.7
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = time = 60
value = 602
ctrl = 1
;--------------------
;Thunder
[StateDef 615]
type = S
movetype= A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 615
poweradd = -500
sprpriority = 3

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(52) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109923

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 7
time = 40
freq = 40
ampl = -10
phase = 90

[State 0, Explod]
type = Explod
ownpal = 0
trigger1 = time = 7
anim = 616
id = 616
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 0.45,0.45
sprpriority = 4

[State 0, Explod]
type = Explod
ownpal = 0
trigger1 = time = 7
anim = F587
id = 587
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 0.45,0.45
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 0
trigger1 = time = 7
anim = F64
id = 64
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 0.7,0.35
sprpriority = -2

[State 0, VelSet]
type = VelSet
trigger1= time = 1
x = 0
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 7
value = F15,10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = timemod = 10,0
trigger1 = hitcount = 0
attr = S, ST
damage = 270,100
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 15
sparkno = 1420+random%3
sparkxy = -15+random%10, -50+random%20
hitsound = F11, 7
guardsound = F11, 7
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-7
airguard.velocity = -2,-7
air.type = High
air.velocity = -2,-7
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
palfx.time = 50
palfx.mul = 100,200,200
palfx.add = 50,50,200
palfx.sinadd = 150,150,300,4
fall = 1

[State 0, ChangeState]
type = destroyself
trigger1 = animtime = 0
;-----------------
;-- Raiton: Gian
[StateDef 620]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 620
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 40
value = F19,6

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 40
anim = F2015
id = 2015
pos = ceil(44*0.95),-ceil(57*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 3,0
triggerall = time >= 35
anim = F1300+random%3
id = 1300
pos = 0+random%50,-ceil(55*0.95)-random%15
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 2+random%3
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 35
value = F11,6

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 50
value = -2500

[State 0, Helper]
type = Helper
trigger1 = time = 50
helpertype = normal
name = "Raiton"
ID = 625
stateno = 625
pos = ceil(49*0.95),-ceil(53*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 1
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = time = 110
value = 602
ctrl = 1
;-----------------
;Raiton
[StateDef 625]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 625
poweradd = 0
sprpriority = 4

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 90

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(52) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109924

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 620
time = 1
pos = ceil(49*0.95),-ceil(53*0.95)

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 650
time = 1
pos = ceil(10*0.95),-ceil(62*0.95)

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = timemod = 4,0 && time > 6
time = 2
add = 0,32,64
mul = 256,256,256

[State 0, BGPalFX]
type = BGPalFX
trigger1 = timemod = 4,2 && time > 6
time = 2
add = 0,96,128
mul = 256,256,256

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20
freq = 50
ampl = 20
phase = 50

[State 0, EnvShake]
type = EnvShake
trigger1 = time > 0 && timemod = 5,0
time = 10
freq = 20
ampl = 2
phase = 20

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F25,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 10,0
value = F11,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F11,10

[State 0, Explod]
type = Explod
trigger1 = 1
anim = F1300+random%3
id = 1300
pos = 50+random%700,40-random%80
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3+random%4
scale = 1,1
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal 
name = "White Flash"
ID = 9999
stateno = 9999
pos = 0,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 10
size.yscale = 10
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 3,0
trigger1 = hitcount < 15
attr = S, ST
damage = 80,35
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 5
sprpriority = 5
pausetime = 0, 60
sparkno = 1420+random%3
sparkxy = -10+random%20, 20-random%40
hitsound = F11,7
guardsound = F11,7
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3, 0
airguard.velocity = -3, -1
air.type = High
air.velocity = -3, -1
air.hittime = 20
envshake.time = 20
envshake.ampl = 20
envshake.freq = 100
palfx.time = 70
palfx.mul = 100,200,200
palfx.add = 50,50,200
palfx.sinadd = 150,150,300,4
fall = 1

[State 0, End]
type = destroyself
trigger1 = animtime = 0
;-----------------
;-- Raiton Air
[StateDef 630]
type = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 630
poweradd = 0
sprpriority = 2

;----------------
[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = cond(vel x > 0, 1, -1)
y = cond(vel y > 0, 1, -1)

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < 0
y = const(movement.yaccel)*.2

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, End]
type = ChangeState
trigger1 = pos y >= 0
value = 52
;----------------

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S3,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 3,0
triggerall = time >= 20
anim = F1300+random%3
id = 1300
pos = -ceil(15*0.95)+random%45,-ceil(55*0.95)-random%15
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 2+random%3
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = F11,6

[State 0, Helper]
type = Helper
trigger1 = time = 25
helpertype = normal
name = "Raiton"
ID = 615
stateno = 615
pos = -25+random%50,0
postype = p2    
facing = -1
keyctrl = 0
ownpal = 1
size.xscale = 0.7
size.yscale = 0.7
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = time = 35
value = 631
ctrl = 1
;-----------------
;Raiton
[StateDef 631]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 631
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S2,21+random%3

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-----------------
;-- Jiongu: Raiton Gian
[StateDef 640]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 640
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,4

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Lightning Jiongu"
ID = 650
stateno = 645
pos = -50+random%100,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.95
size.yscale = 0.95
pausemovetime = 9999
size.ground.back = ceil(10*0.95)
size.ground.front = ceil(10*0.95)
size.air.back = ceil(20*0.95)
size.air.front = ceil(20*0.95)
size.height = ceil(90*0.95)

[State 0, end]
type = ChangeState
trigger1 = time = 60
value = 0
ctrl = 1
;-----------------
;Jiongu: Raiton
[StateDef 645]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 645
poweradd = -3000
sprpriority = 2

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time = 0
v = 5
value = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 650
ctrl = 1
;-----------------
;Jiongu: Raiton
[StateDef 650]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 650
poweradd = 0
sprpriority = 2
facep2 = 1 

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F19,6

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 11
anim = F2015
id = 2015
pos = ceil(8*0.95),-ceil(62*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 3,0
anim = F1300+random%3
id = 1300
pos = -ceil(15*0.95)+random%30,-ceil(30*0.95)-random%50
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3+random%2
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,6

[State 0, Helper]
type = Helper
trigger1 = time = 20
helpertype = normal
name = "Raiton"
ID = 625
stateno = 625
pos = ceil(10*0.95),-ceil(62*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 1
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 655
ctrl = 1
;-----------------
;Jiongu: Raiton
[StateDef 655]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 655
poweradd = 0
sprpriority = 2

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = animtime = 0
v = 5
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, end]
type = destroyself
trigger1 = animtime = 0
;-----------------
;-- Suiton: Suijinheki
[StateDef 700]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 700
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S1,0+random%12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 25 && timemod = 8,0
anim = F1550
ID = 987601
pos = ceil(38*0.95)+random%10,-ceil(60*0.95)+random%10
postype = p1
bindtime = 1
removetime = 18
vel = 0.5,-.5
scale = 0.5,0.5
sprpriority = 10
ownpal = 1
angle = random
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 25 && numexplod(1520) = 0
anim = F1520
id = 1520
pos = ceil(43*0.95),-ceil(55*0.95)
scale = 0.4,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
supermovetime=9999
pausemovetime=9999
ownpal = 1
angle = -30

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 20 && timemod = 8,0
anim = 704
ID = 704
pos = ceil(43*0.95),-ceil(55*0.95)
postype = p1
bindtime = 1
removetime = -2
scale = 0.45,0.55
sprpriority = 4
ownpal = 1
ontop = 0

[State 0, Helper]
type = Helper
trigger1 = time = 35
helpertype = normal
name = "Suiton"
ID = 705
stateno = 705
pos = ceil(70*0.95),0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.4
size.yscale = 0.7
pausemovetime = 9999

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time > 35
value = -4

[State 400, end]
type = ChangeState
trigger1 = time > 50 && var(50) = 0 && command != "hold_z"
trigger2 = power = 0
trigger3 = time > 50 && var(50) = 1 && random = [0,25+ceil(var(49)/2)]
trigger4 = win
trigger5 = lose
trigger6 = drawgame
trigger7 = life = 0
trigger8 = !ALive
trigger9 = time > 40 && var(50) = 1 && p2bodydist x < 0
triggerall = time > 50
value = 702
ctrl = 1
;-----------------
;Suiton
[StateDef 702]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 702
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S2,21+random%3

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------------------------------------------
;Suijuheki
[StateDef 705]
type = S
movetype= A
physics = S
juggle  = 3
velset = 0,0
ctrl = 0
anim = 705
poweradd = -300
sprpriority = 6

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 700
time = 1
pos = ceil(70*0.95),0

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(53) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109931

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = parentdist x <= 40 && parentdist x >= -80
triggerall = p2bodydist x > 20
triggerall = ishelper(705)
v = 18
value = 1

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = parentdist x > 40
trigger2 = p2bodydist x < 20
trigger3 = parentdist x < -80
triggerall = ishelper(705)
v = 18
value = 0

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F1530
id = 1530
pos = 20,0
scale = 1.5,1.5
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 7
supermovetime=9999
pausemovetime=9999
trans = addalpha 
alpha = 200,256

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F1530
id = 1530
pos = -20,0
scale = 1.5,1.5
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 7
supermovetime=9999
pausemovetime=9999
trans = addalpha 
alpha = 200,256

[State 1533,excplod ]
type = Explod
trigger1 = timemod = 10,0
anim = F250
ID = 6054
postype = p1
pos = 0,2
bindtime = -1
sprpriority = 2
ontop = 0
removetime = 15
supermovetime = 9999
pausemovetime = 9999
scale = 1.3,1.3
trans = addalpha 
alpha = 200,256

[State 1533,excplod ]
type = Explod
trigger1 = timemod = 10,0
anim = F250
ID = 6054
postype = p1
pos = 0,2
facing = -1
bindtime = -1
sprpriority = 2
ontop = 0
removetime = 15
supermovetime = 9999
pausemovetime = 9999
scale = 1.3,1.3
trans = addalpha 
alpha = 200,256

[State 1533,excplod ]
type = Explod
trigger1 = time = 0
anim = 708
ID = 6054
postype = p1
pos = 0,-3
facing = -1
bindtime = -1
sprpriority = 8
ownpal = 1
ontop = 0
removetime = -1
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.15

[State 1533,excplod ]
type = Explod
trigger1 = time = 0
anim = F550
ID = 6054
postype = p1
pos = 0,0
facing = -1
bindtime = -1
sprpriority = 7
ownpal = 1
ontop = 0
removetime = -1
supermovetime = 9999
pausemovetime = 9999
scale = 0.9,0.9

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time < 25 && timemod = 4,0
anim = F591
ID = 591
pos = -20+random%40,0-random%20
vel = -1+random%3,-3
accel = 0,0.05
angle = random
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 4
ownpal = 1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 4,0
anim = F242
ID = 242
pos = -20+random%40,0-random%20
vel = -1+random%3,-1-random%2
accel = 0,0.05
postype = p1
bindtime = 1
angle = random
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1.2,1.2
sprpriority = 4
ownpal = 1
ontop = 0

[State 0, PosFreeze]
type = PosFreeze
trigger1 = 1 
value = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, Helper]
type = Helper
trigger1 = time = 10
helpertype = normal
name = "def"
ID = 707
stateno = 707
pos = 0,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 0, StopSnd]
type = StopSnd
trigger1 = animelem = 20
channel = -1

[State 331, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 6000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = F12,2

[State 6000, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F12,1

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 5,0
attr = S, ST
damage = 50,10
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
sprpriority = 6
priority = 6, Hit
pausetime = 0, 0
sparkno = 240
sparkxy = -5+random%10,-10-random%70
hitsound = F12,0
guardsound = F12,0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-8
airguard.velocity = -2,-8
air.type = High
air.velocity = -2,-8
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 400, end]
type = ChangeState
trigger1 = root,stateno != 700
value = 706
ctrl = 1
;---------------------------------
[StateDef 706]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 706
poweradd = 0
sprpriority = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 9
id = 6054

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PosFreeze]
type = PosFreeze
trigger1 = 1 
value = 1

[State 0, End]
type = Destroyself
trigger1 = time = 12
;-----------------
;Tarcza
[StateDef 707]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 707
poweradd = 0
sprpriority = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,ST,HT,NT
slot = 0
stateno = 707
time = 9999
forceair = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,ST,NT
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,HP,HT
time = -1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
pos = 0,0

[State 0, End]
type = Destroyself
trigger1 = parent, stateno != 705
;-----------------
;-- Suiton
[StateDef 710]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 700
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S1,0+random%12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 25 && timemod = 8,0
anim = F1550
ID = 987601
pos = ceil(38*0.95)+random%10,-ceil(59*0.95)+random%10
postype = p1
bindtime = 1
removetime = 18
vel = 0.5,-.5
scale = 1,1
sprpriority = 10
ownpal = 1
angle = random
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 25 && numexplod(1520) = 0
anim = F1520
id = 1520
pos = ceil(43*0.95),-ceil(53*0.95)
scale = 0.6,1.4
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
supermovetime=9999
pausemovetime=9999
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 25
helpertype = normal
name = "Suiton"
ID = 715
stateno = 715
pos = ceil(38*0.95),-ceil(54*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5*0.95
size.yscale = 0.4*0.95
pausemovetime = 9999

[State 400, end]
type = ChangeState
trigger1 = time = 110
value = 0
ctrl = 1
;-----------------
;Suiton
[StateDef 715]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 715
poweradd = -1000
sprpriority = 3

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(53) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109932

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 710
time = 1
pos = ceil(38*0.95),-ceil(57*0.95)

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
trigger1 = time < 70
value = F12,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 10,0
trigger1 = time < 70
value = F12,2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = NumTarget
trigger1 = time > 50
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time = 80
attr = S, ST
damage = 50,20
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
sprpriority = 3
pausetime = 0, 0
sparkno = 1550;240
sparkxy = -20+random%40, 20-random%40
hitsound = F12,0
guardsound = F12,0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -9,-3
airguard.velocity = -9,-3
air.type = High
air.velocity = -9,-3
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time < 80 && timemod = 5,0
attr = S, ST
damage = 30,10
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
sprpriority = 3
pausetime = 0, 3
sparkno = 1550;240
sparkxy = -20+random%40, 20-random%40
hitsound = F12,0
guardsound = F12,0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3, 0
airguard.velocity = -3, -1
air.type = High
air.velocity = -3, -1
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = destroyself
trigger1 = animtime = 0
trigger2 = parent, stateno != 710
trigger2 = parent, stateno != 702
;-----------------
;-- Suiton: Daisuijinheki
[StateDef 720]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 720
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0+random%12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 40
value = F19,7

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 40
anim = F2001
id = 2001
pos = ceil(43*0.95),-ceil(57*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 40 && timemod = 8,0
anim = F1550
ID = 987601
pos = ceil(38*0.95+random%10),-ceil(60*0.95+random%10)
postype = p1
bindtime = 1
removetime = 18
vel = 0.5,-.5
scale = 0.5,0.5
sprpriority = 10
ownpal = 1
angle = random
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 40 && numexplod(1520) = 0
anim = F1520
id = 1520
pos = ceil(43*0.95),-ceil(55*0.95)
scale = 0.4,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
supermovetime=9999
pausemovetime=9999
ownpal = 1
angle = -30

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 35 && time < 80 && timemod = 8,0
anim = 704
ID = 704
pos = ceil(43*0.95),-ceil(55*0.95)
postype = p1
bindtime = 1
removetime = -2
scale = 0.45,0.55
sprpriority = 4
ownpal = 1
ontop = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 50
value = -2500

[State 0, Helper]
type = Helper
trigger1 = time = 50
helpertype = normal
name = "Suiton"
ID = 725
stateno = 725
pos = 75,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 70
helpertype = normal
name = "Suiton"
ID = 725
stateno = 725
pos = 175,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 90
helpertype = normal
name = "Suiton"
ID = 725
stateno = 725
pos = 275,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = time = 90
value = 602
ctrl = 1
;-----------------
;Suiton
[StateDef 725]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 725
poweradd = 0
sprpriority = 5

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(53) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109934

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time =0
value = F12,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time =0
value = F12,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 30
value = F12,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 30
value = F12,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 30
value = F12,4

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time < 25 && timemod = 5,0
attr = S, ST
damage = 20,5
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
sprpriority = 5
priority = 5
pausetime = 0, 3
sparkno = 1550;240
sparkxy = -20+random%40, -40-random%40
hitsound = F12,0
guardsound = F12,0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3, 0
airguard.velocity = -3, -1
air.type = High
air.velocity = -3, -1
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time >= 25 && timemod = 5,0
attr = S, ST
damage = 70,20
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
sprpriority = 5
priority = 5
pausetime = 0, 3
sparkno = 1550;240
sparkxy = -20+random%40, -420-random%40
hitsound = F12,0
guardsound = F12,0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2, 7
airguard.velocity = -2, 7
air.type = High
air.velocity = -2, 7
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = destroyself
trigger1 = animtime = 0
;-----------------
;-- Suiton Air
[StateDef 730]
type = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 730
poweradd = 0
sprpriority = 2

;----------------
[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 1
y = cond(vel y > 0, 0.5, -0.5)

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < 0
y = const(movement.yaccel)*.2

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, End]
type = ChangeState
trigger1 = pos y >= 0
value = 52

[State 0, VelSet]
type = VelSet
trigger1 = time >= 25
x = 0
y = 0
;----------------

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S1,0+random%12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,6

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 25 && timemod = 8,0
anim = F1550
ID = 987601
pos = ceil(26*0.95)+random%10,-ceil(63*0.95)+random%10
postype = p1
bindtime = 1
removetime = 18
vel = 0.5,-.5
scale = 1,1
sprpriority = 10
ownpal = 1
angle = random
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 25 && numexplod(1520) = 0
anim = F1520
id = 1520
pos = ceil(43*0.95),-ceil(53*0.95)
scale = 0.6,1.4
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
supermovetime=9999
pausemovetime=9999
ownpal = 1
angle = -30

[State 0, Helper]
type = Helper
trigger1 = time = 25
helpertype = normal
name = "Suiton"
ID = 735
stateno = 735
pos = ceil(26*0.95),-ceil(58*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.4*0.95
size.yscale = 0.4*0.95
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = time = 110
value = 731
ctrl = 1
;-----------------
;Suiton
[StateDef 731]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 731
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S2,21+random%3

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-----------------
;Suiton
[StateDef 735]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 735
poweradd = -1000
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -30

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(53) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109932

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 730
time = 1
pos = 26*0.95,-58*0.95

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
trigger1 = time < 70
value = F12,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 10,0
trigger1 = time < 70
value = F12,2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = NumTarget
trigger1 = time > 50
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time = 80
attr = A, ST
damage = 50,20
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
sprpriority = 3
pausetime = 0, 0
sparkno = 1550;240
sparkxy = -20+random%40, 40+random%30
hitsound = F12,0
guardsound = F12,0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -5,8
airguard.velocity = -5,8
air.type = High
air.velocity = -5,8
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time < 80 && timemod = 5,0
attr = S, ST
damage = 30,10
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
sprpriority = 3
pausetime = 0, 3
sparkno = 1550;240
sparkxy = -20+random%40, 40+random%30
hitsound = F12,0
guardsound = F12,0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1, 1
airguard.velocity = -1, 1
air.type = High
air.velocity = -1, 1
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = destroyself
trigger1 = animtime = 0
trigger2 = parent, stateno != [730,731]
;-----------------
;-- Jiongu: Suiton Daisuijinheki
[StateDef 740]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 740
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0+random%12

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Water Jiongu"
ID = 750
stateno = 745
pos = -50+random%100,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.95
size.yscale = 0.95
pausemovetime = 9999
size.ground.back = ceil(15*0.95)
size.ground.front = ceil(15*0.95)
size.air.back = ceil(5*0.95)
size.air.front = ceil(15*0.95)
size.height = ceil(55*0.95)

[State 0, end]
type = ChangeState
trigger1 = time = 60
value = 0
ctrl = 1
;-----------------
;Jiongu: Suiton
[StateDef 745]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 745
poweradd = -3000
sprpriority = 2

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time = 0
v = 6
value = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 750
ctrl = 1
;-----------------
;Jiongu: Suiton
[StateDef 750]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 750
poweradd = 0
sprpriority = 2
facep2 = 1 

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F19,7

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 10
anim = F2001
id = 2001
pos = ceil(17*0.95),-ceil(30*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 10 && timemod = 8,0
anim = F1550
ID = 987601
pos = ceil(12*0.95)+random%10,-ceil(35*0.95)+random%10
postype = p1
bindtime = 1
removetime = 18
vel = 0.5,-.5
scale = 0.5,0.5
sprpriority = 10
ownpal = 1
angle = random
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 10 && numexplod(1520) = 0
anim = F1520
id = 1520
pos = ceil(17*0.95),-ceil(30*0.95)
scale = 0.4,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
supermovetime=9999
pausemovetime=9999
ownpal = 1
angle = -30

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 10 && time < 60 && timemod = 8,0
anim = 704
ID = 704
pos = ceil(17*0.95),-ceil(30*0.95)
postype = p1
bindtime = 1
removetime = -2
scale = 0.45,0.30
sprpriority = 4
ownpal = 1
ontop = 0

[State 0, Helper]
type = Helper
trigger1 = time = 20
helpertype = normal
name = "Suiton"
ID = 725
stateno = 725
pos = 75,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 40
helpertype = normal
name = "Suiton"
ID = 725
stateno = 725
pos = 175,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 60
helpertype = normal
name = "Suiton"
ID = 725
stateno = 725
pos = 275,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
pausemovetime = 9999

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 755
ctrl = 1
;-----------------
;Jiongu: Suiton
[StateDef 755]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 755
poweradd = 0
sprpriority = 2

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = animtime = 0
v = 6
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,4

[State 0, end]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;True Form
[Statedef 800]
type = A
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 800
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F9,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 5
anim = 801
id = 801
pos = ceil(12*0.95),-ceil(54*0.95)
vel = 1,-0.5
accel = 0,0.03
scale = 0.95,0.95
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 2
ownpal = 1
supermovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,9

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 3
v = 2
value = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Plaszcz"
ID = 800
stateno = 802
pos = ceil(25*0.95),-ceil(50*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.95
size.yscale = 0.95
supermovetime = 9999

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 29
time = 70
movetime = 70
anim = -1
darken = 0
unhittable = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 29
time = 80
add = -40,-40,-40
ignorehitpause = 1

[State 195, 2]
type = ChangeState
trigger1 = animtime = 0
value = 810
ctrl = 1
;---------------------------------------------------------------------------
;True Form
[Statedef 801]
type = A
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 800
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F9,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F14,5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 5
anim = 801
id = 801
pos = ceil(12*0.95),-ceil(54*0.95)
vel = 1,-0.5
accel = 0,0.03
scale = 0.95,0.95
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 2
ownpal = 1
supermovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,9

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 3
v = 2
value = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Plaszcz"
ID = 800
stateno = 802
pos = ceil(25*0.95),-ceil(50*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.95
size.yscale = 0.95
supermovetime = 9999

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 29
time = 70
movetime = 70
anim = -1
darken = 0
unhittable = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 29
time = 80
add = -40,-40,-40
ignorehitpause = 1

[State 195, 2]
type = ChangeState
trigger1 = animtime = 0
value = 820
ctrl = 1
;---------------------------------------------------------------------------
;Cape
[Statedef 802]
type = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 802
poweradd = 0
sprpriority = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 5
y = -2

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 0
trigger1 = pos y < 0
x = -.05
y = 0.2

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= 0
x = 0
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = pos y >= 0
trigger1 = anim != 803
value = 803

[State 0, DestroySelf]
type = DestroySelf
trigger1 = anim = 803 && animtime = 0

;---------------------------------------------------------------------------
;True Form
[Statedef 805]
type = A
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 805
poweradd = 0
sprpriority = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time < 20
time = 1
add = -40+(time)*2,-40+(time)*2,-40+(time)*2
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,9

[State 0, Prawa]
type = Explod
trigger1 = time = 30
anim = F696
ownpal = 1
ID = 900
pos = 10+random%10,-30-random%20
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0+random%2,-1-random%3
scale = 0.8,0.8
sprpriority = 5
ontop = 0

[State 0, Srodek]
type = Explod
trigger1 = time = 30
anim = F696
ownpal = 1
ID = 900
pos = -5+random%10,-20-random%10
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = -1+random%3,-1-random%2
scale = 1.3,1.3
sprpriority = 5
ontop = 0

[State 0, Lewa]
type = Explod
trigger1 = time = 30
anim = F696
ownpal = 1
ID = 900
pos = -10-random%10,-30-random%20
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0-random%2,-1-random%3
scale = 0.8,0.8
sprpriority = 5
ontop = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 30
value = F9,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 30
value = F9,2

[State 195, 2]
type = ChangeState
trigger1 = animtime = 0
value = 194
ctrl = 1
;---------------------------------------------------------------------------
;Katon Futon Start
[Statedef 810]
type = A
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 810
poweradd = 0
sprpriority = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 10
add = -40,-40,-40
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = anim = 810
value = S6,16

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 810
trigger1 = animtime = 0
value = 811

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger1 = anim = 811
value = S1,4+random%5

[State 195, 2]
type = ChangeState
trigger1 = anim = 811
trigger1 = animtime = 0
value = 815
ctrl = 1
;---------------------------------------------------------------------------
;Katon Futon
[Statedef 815]
type = A
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 815
poweradd = 0
sprpriority = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 10
add = -40,-40,-40
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = anim = 816
value = S6,16

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 815
trigger1 = time = 90
value = 816

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F19,4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F2005
id = 2005
pos = ceil(21*0.95),-ceil(57*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F19,2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F2000
id = 2000
pos = -ceil(3*0.95),-ceil(61*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 15 && anim = 815
helpertype = normal
name = "futon"
ID = 817
stateno = 817
pos = ceil(21*0.95),-ceil(55*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 0.9
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 15 && numexplod(810) = 0 && time < 65 && anim = 815
anim = F810
id = 810
pos = -ceil(3*0.95),-ceil(59*0.95)
scale = 0.4,0.6
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 15 && anim = 815
helpertype = normal
name = "katon"
ID = 818
stateno = 818
pos = -ceil(5*0.95),-ceil(61*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85
size.yscale = 0.9
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 20 && anim = 815
anim = 519
id = 519
pos = 0,10
scale = 1,0.7
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 6
ownpal = 1

[State 195, 2]
type = ChangeState
trigger1 = anim = 816
trigger1 = animtime = 0
value = 805
ctrl = 1
;------------------
;Futon
[StateDef 817]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 817
poweradd = -1500
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1,1
value = -90

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 815
time = 1
facing = 0
pos = ceil(21*0.95),-ceil(55*0.95)

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(51) = 0
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(52) = 0
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(54) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 105276

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20
freq = 100
ampl = -5
phase = 190

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 508
ID = 508
scale = 0.8,0.8
pos = -5,0
postype = p1  
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
sprpriority = 3
ontop = 0
supermovetime = 9999
pausemovetime = 9999
angle = -90

[State 0, VelSet]
type = VelSet
trigger1 = 1
y = 0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%3
angle = -25+random%50
pos = -5-random%20,-30-random%30
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F643
pos = -5-random%20,-15-random%30
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time < 40
triggerall = timemod = 2,0
anim = F591
ID = 591
pos = 0+random%(50+time)*2,-pos y + 10-random%20
vel = 2+random%4,-2-random%4
accel = 0,0.05
angle = random
postype = p1
bindtime = 1
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.6,0.6
sprpriority = 3+random%3
ownpal = 1
ontop = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 20,0
value = F14,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F15,11

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = timemod = 5,0
trigger1 = hitcount < 10
attr = S, ST
damage = 50,20
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 3
sparkno = 4
sparkxy = -15, 0
hitsound = 14, 5
guardsound = 14, 5
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -7,-4
airguard.velocity =  -7,-4
air.type = High
air.velocity =  -7,-4
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
trigger2 = parent, stateno != 815
;-----------------
;Katon
[StateDef 818]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 818
poweradd = -1500
sprpriority = 5

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(51) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109913

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 815
time = 1
facing = 0
pos = -5*0.95,-61*0.95

[State 0, EnvShake]
type = EnvShake
trigger1 = time%5 = 0
time = 20
freq = 25
ampl = -3
phase = 90

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,20

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,2

[State 0, VarAdd]
type = VarAdd
trigger1 = time > 0
triggerall = var(12) < 40
trigger2 = var(12) = 0
v = 12
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(12) >= 40
v = 12
value = 0

[State 0, Ogien na ziemi]
type = Explod
ownpal = 1
trigger1 = time%10 = 0 && numexplod(1462) < 10 
anim = F1463
ID = 1463
pos = 50+ceil(var(12)*6),-pos y +10
postype = p1
bindtime = 5
removetime = -2
scale = 0.85,0.7
sprpriority = 6
ownpal = 1
supermovetime=9999
pausemovetime=9999

[State 0, Iskry]
type = Explod
ownpal = 1
trigger1 = time % 16 = 0 && numexplod(271) <= 2
anim = F271
ID = 271
pos = 100,5
postype = p1
vel = 0,0
bindtime = 1
removetime = 60
supermovetime=9999
pausemovetime=9999
scale = 1,1
sprpriority = 6
ownpal = 1

[State 0, Kola]
type = Explod
ownpal = 1
trigger1 = time > 15 && time % 20 = 0 && numexplod(820) <= 1
anim = F820
id = 820
pos = 200,0
scale = 1.3,2
vel = -4,0
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 7
supermovetime=9999
pausemovetime=9999

[State 0, hitdef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 5,0
trigger1 = hitcount < 10
attr = S, ST
damage = 55,20
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 5
pausetime = 0, 4
sparkno = 1400
sparkxy = -30+random%30, -7-random%40
hitsound = F10, 0
guardsound = F10, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -3,-2
airguard.velocity = -3,-1
air.type = High
air.velocity = -3,-1
air.hittime = 20
fall = 1
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10

[State 0, end]
type = changestate
trigger1 = parent, stateno != 815
trigger2 = time = 55
value = 819
;-----------------
;Katon
[StateDef 819]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 847
poweradd = 0
sprpriority = 5

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,2

[State 0, end]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;Raiton Suiton Start
[Statedef 820]
type = A
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 820
poweradd = 0
sprpriority = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 10
add = -40,-40,-40
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = anim = 820
value = S6,16

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 820
trigger1 = animtime = 0
value = 821

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger1 = anim = 821
value = S1,4+random%5

[State 195, 2]
type = ChangeState
trigger1 = anim = 821
trigger1 = animtime = 0
value = 825
ctrl = 1
;---------------------------------------------------------------------------
;Raiton Suiton
[Statedef 825]
type = A
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 825
poweradd = 0
sprpriority = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 10
add = -40,-40,-40
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = anim = 816
value = S6,16

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 825
trigger1 = time = 100
value = 826

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F19,7

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F2004
id = 2004
pos = ceil(21*0.95),-ceil(59*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F19,6

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F2015
id = 2015
pos = -ceil(4*0.95),-ceil(61*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 15 && anim = 825 && timemod = 8,0
anim = F1550
ID = 987601
pos = ceil(17*0.95)+random%10,-ceil(64*0.95)+random%10
postype = p1
bindtime = 1
removetime = 18
vel = 0.5,-.5
scale = 1,1
sprpriority = 10
ownpal = 1
angle = random
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 15 && anim = 825 && numexplod(1520) = 0
anim = F1520
id = 1520
pos = ceil(22*0.95),-ceil(59*0.95)
scale = 0.6,1.4
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
supermovetime=9999
pausemovetime=9999
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 15 && anim = 825
helpertype = normal
name = "Suiton"
ID = 827
stateno = 827
pos = ceil(22*0.95),-ceil(59*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5*0.95
size.yscale = 0.4*0.95
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = anim = 825 && timemod = 3,0
anim = F1300+random%3
id = 1300
pos = -ceil(40*0.95)+random%40,-ceil(40*0.95)-random%40
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 2+random%3
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,6

[State 0, Helper]
type = Helper
trigger1 = time = 25 && anim = 825
helpertype = normal
name = "Raiton"
ID = 828
stateno = 828
pos = -ceil(4*0.95),-ceil(61*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.3*0.95
size.yscale = 1*0.95
pausemovetime = 9999

[State 195, 2]
type = ChangeState
trigger1 = anim = 826
trigger1 = animtime = 0
value = 805
ctrl = 1
;-----------------
;Suiton
[StateDef 827]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 715
poweradd = -1000
sprpriority = 3

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(53) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109932

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 825
time = 1
pos = ceil(22*0.95),-ceil(59*0.95)

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
trigger1 = time < 70
value = F12,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 10,0
trigger1 = time < 70
value = F12,2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = NumTarget
trigger1 = time > 50
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time < 80 && timemod = 5,0
attr = S, ST
damage = 25,10
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3
pausetime = 0, 5
sparkno = 1550;240
sparkxy = -20+random%40, 20-random%40
hitsound = F12,0
guardsound = F12,0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -4, -2
airguard.velocity = -4, -1
air.type = High
air.velocity = -4, -1
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = destroyself
trigger1 = animtime = 0
trigger2 = parent, stateno != 825
;-----------------
;Raiton
[StateDef 828]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 828
poweradd = -200
sprpriority = 5

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = timemod = 4,0 && time > 6
time = 2
add = 0,32,64
mul = 256,256,256

[State 0, BGPalFX]
type = BGPalFX
trigger1 = timemod = 4,2 && time > 6
time = 2
add = 0,96,128
mul = 256,256,256

[State 0, Explod]
type = Explod
trigger1 = 1
anim = F1300+random%5
id = 1300
pos = 0+random%300,25-random%50
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3+random%4
scale = 1,1
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 825
time = 1
pos = -ceil(4*0.95),-ceil(61*0.95)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal 
name = "White Flash"
ID = 9999
stateno = 9999
pos = 0,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 10
size.yscale = 10
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = timemod = 5,0
time = 10
freq = 30
ampl = 3
phase = 50

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 10
freq = 50
ampl = 10
phase = 50

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time < 80
value = -10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 20,0
value = F11,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 25,0
value = F11,10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 30,0
value = F11,4

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(52) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 109923

[State 0, BindToParent]
type = BindToParent
trigger1 = root,stateno = 600
time = 1
pos = -ceil(4*0.95),-ceil(61*0.95)

[State 0, 1]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 4,0
attr = S, ST
damage = 35,15
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 20
sparkno = 1420+random%3
sparkxy = -15+random%10, -20+random%40
hitsound = 11, 5
guardsound = 11, 5
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -4,-4
airguard.velocity = -4,-.8
air.type = High
air.velocity = -4,-4
air.hittime = 20
fall = 1
envshake.time = 30
envshake.ampl = 4
envshake.freq = 30
palfx.time = 60
palfx.mul = 100,200,200
palfx.add = 50,50,200
palfx.sinadd = 150,150,300,4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 0 && timemod = 5,1 && numexplod(510) = 0
anim = F510
id = 510
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 4
removeongethit = 1
scale = 0.8,0.8
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time >= 0 && timemod = 5,1 && numexplod(511) = 0
anim = F510
id = 511
pos = 0,0
postype = p1
facing = -1
vfacing = -1
bindtime = -1
removetime = -1
sprpriority = 4
removeongethit = 1
scale = 0.8,0.8
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animtime = 0
trigger2 = parent, stateno != 825
id = 510

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animtime = 0
trigger2 = parent, stateno != 825
id = 511

[State 0, End]
type = destroyself
trigger1 = animtime = 0
trigger2 = parent, stateno != 825
;-----------------
;Punch
[StateDef 848]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 213
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F4,0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = 28*0.95,1
postype = p1
scale = 1,0.9
sprpriority = 3
ontop = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Reka"
ID = 848
stateno = 8481
pos = 0,0
postype = p2
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.95
size.yscale = 0.95

[State 0, ChangeState]
type = ChangeState
trigger1 = helper(848), movecontact
triggerall = time > 6
triggerall = numhelper(848) != 0
value = 849

[State 0, End]
type = ChangeState
trigger1 = Time >= 10 && numhelper(848) = 0
value = 197
ctrl = 1
;-----------------
;Reka
[StateDef 8481]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2131
poweradd = 0
sprpriority = 2

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F64
ID = 64
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.25,0.15
sprpriority = -1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F583
ID = 583
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.4,0.8
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F15,6

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = S, NA
damage = ceil(40*(1+var(2)*1.25)),ceil(8*(1+var(2)*1.25))
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 10
sparkno = 0+random%4
sparkxy = -15, -ceil(40*0.95)
hitsound = 5, 23
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1,-6
airguard.velocity = -1,-6
air.type = High
air.velocity = -1,-6
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall.yvelocity = -7
fall = 1

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
;----------------------------------------------------------------------------
;Shushin
[Statedef 849]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd = 0
ctrl = 0
velset = 0,0
anim = 849
sprpriority = -2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = S1,0+random%12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F3,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F31,0

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 120,120,120
palpostbright = 0,0,0
paladd = 5,5,5
palmul = .65,.65,.65
timegap = 1
framegap = 1
trans = add

[State 0, Explod]
type = Explod
trigger1 = time = [5,25]
anim = F20
ID = 20
pos = -10+random%20,-10-random%50
postype = p1  
scale = 0.8,0.4
vel = -2,0
sprpriority = 0
bindtime = 1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 5 && pos y > -5
anim = F676
ID = 24
pos = 15,4
postype = p1  
scale = 0.4,0.25
vel = -1,0
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = F280
pos = -20,-30
scale = 1.5,1.5
postype = p1
facing = 1
bindtime = 1
ownpal = 1
removetime = -2
sprpriority = 0
angle = -90

[State 0, VelSet]
type = VelSet
trigger1 = time = [5,25]
x = const(velocity.run.fwd.x)*1.5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noautoturn

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nowalk

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = F300
ID = 24
pos = ceil(-26*0.95),2
postype = p1  ;p2,front,back,left,right
scale = 0.7,0.7
sprpriority = 2
vel = 2,-0.5
bindtime = 1
ownpal = 0
ontop = 0
facing = -1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = F300
ID = 24
pos = ceil(20*0.95),2
postype = p1  ;p2,front,back,left,right
scale = 0.7,0.7
sprpriority = 2
vel = 2,-0.5
bindtime = 1
ownpal = 0
ontop = 0
facing = -1

[State 0, VelSet]
type = VelSet
trigger1 = time > 20 && vel x > 0
x = const(velocity.run.fwd.x)*1-(time-20)/5
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = vel x <= 0
x = 0
y = 0

[State 20000, 4]
type = ChangeState
trigger1 = frontedgebodydist <= 10
trigger2 = animtime = 0
value = 11
ctrl = 1

[State 20000, 4]
type = ChangeState
trigger1 = p2dist x = [0,50]
trigger1 = p2dist y = [-50,50]
value = 850
ctrl = 1
;-----------------
;-- Ultimate: Jiongu
[StateDef 850]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 290
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%10
channel = 4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 30,6
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 20, 30
sparkno = 0+random%4
sparkxy = -15, -ceil(47*0.95)
hitsound = 35, 0+random%15;5, 21+random%5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = 0,0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 20
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10
fall.yvelocity = -6
p1stateno = 851

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = numtarget != 0
trigger1 = animelem = 3
time = 3
pos = ceil(35*0.95),ceil(16*0.95)
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 6
value = 0

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 198
ctrl = 1
;-----------------
[StateDef 851]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 851
poweradd = 0
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = numtarget != 0
trigger1 = animelem = 1
time = 3
pos = ceil(35*0.95),ceil(16*0.95)
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = numtarget != 0
trigger1 = animelem = 2
time = 3
pos = ceil(41*0.95),-ceil(19*0.95)
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = numtarget != 0
trigger1 = animelem = 3
time = 1
pos = ceil(33*0.95),-ceil(43*0.95)
ignorehitpause = 1

[State 0, TargetDrop]
type = TargetDrop
triggerall = NumTarget
trigger1 = numtarget != 0
trigger1 = animelem = 4
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S6,0

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = NumTarget
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NT
damage = 30,6
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 0, 0
sparkno = 54363
sparkxy = -15, -ceil(87*0.95)
hitsound = 35, 6456
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1,-14
airguard.velocity = -1,-14
air.type = High
air.velocity = -1,-14
air.hittime = 20
fall.recover = 0
fall.envshake.time = 20
fall.envshake.freq = 60
fall.envshake.ampl = -20
fall.envshake.phase = 20
fall.yvelocity = -3
y.accel = -0.5
fall = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 9
value = S6,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 17
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 17
value = S6,6

[State 0, Helper]
type = Helper
trigger1 = animelem = 6
helpertype = normal;player
name = "Rozciaganie"
ID = 855
stateno = 855
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, EnvShake]
type = EnvShake
trigger1 = time%5 = 0
triggerall = time >= 100
time = 10
freq = 20
ampl = 2
phase = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 120
value = F19,6

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 120
anim = F2015
id = 2015
pos = ceil(27*0.95),-ceil(116*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 6
supermovetime = 9999
pausemovetime = 9999
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 120
value = F19,2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 120
anim = F2000
id = 2000
pos = ceil(9*0.95),-ceil(112*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
supermovetime = 9999
pausemovetime = 9999
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 120
value = F19,4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 120
anim = F2005
id = 2005
pos = ceil(40*0.95),-ceil(108*0.95)
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 6
supermovetime = 9999
pausemovetime = 9999
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 90
value = F11,6

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = timemod = 3,0
triggerall = time >= 90
anim = F1300+random%3
id = 1300
pos = -5+random%50,-ceil(80*0.95)-random%50
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 2+random%3
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 40
value = S6,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 40
value = S6,1

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 40
time = 100
movetime = 100
anim = -1
darken = 0
unhittable = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 80
value = F34,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 80
value = F34,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 80
value = F34,2

[State 0, Swiatlo do superpausy]
type = Explod
ownpal = 1
trigger1 = time = 80
anim = 4001
ID = 4000
pos = 190,100
postype = back
bindtime = -1
removetime = 60
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = -100
ownpal = 1
ontop = 0

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time >= 40 && time < 100
time = 1
add = -(time-40)*2,-(time-40)*2,-(time-40)*2
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time >= 40 && time < 100
time = 1
add = -(time-40)*1.33,-(time-40)*1.33,-(time-40)*1.33
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time = [100,180]
time = 60
add = -120,-120,-120
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time = [100,180]
time = 60
add = -80,-80,-80
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time >= 180 && time < 200
time = 1
add = -120+(time-180)*6,-120+(time-180)*6,-120+(time-180)*6
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time >= 180 && time < 200
time = 1
add = -80+(time-180)*4,-80+(time-180)*4,-80+(time-180)*4
ignorehitpause = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 140 && time < 180 && numexplod(810) = 0
anim = F810
id = 810
pos = ceil(9*0.95),-ceil(112*0.95)
scale = 0.45,0.6
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = 3
ownpal = 1
angle = 80

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 140
value = -2000

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time > 140 && time < 190
value = -40

[State 0, Helper]
type = Helper
trigger1 = time = 140
helpertype = normal
name = "Raiton"
ID = 856
stateno = 856
pos = ceil(28*0.95),-ceil(121*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 1
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 140
helpertype = normal
name = "Katon"
ID = 857
stateno = 857
pos = ceil(12*0.95),-ceil(115*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.5
size.yscale = 1.5
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 140
helpertype = normal
name = "Futon"
ID = 858
stateno = 858
pos = ceil(38*0.95),-ceil(110*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.2
size.yscale = 2.2
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = time = 140
anim = 859
id = 859
pos = 20,5
scale = .5,.5
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 6
supermovetime = 9999
pausemovetime = 9999
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = time = 140
anim = F64
ID = 64
pos = 20,0
postype = p1  
facing = 1
bindtime = 1
removetime = -2
vel = 0,0
scale = 1.4,0.6
sprpriority = -2
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = [140,170]
triggerall = timemod = 2,0
anim = F591
ID = 591
pos = -5+random%50,10-random%20
vel = -1+random%5,-3-random%4
accel = 0,0.05
angle = random
postype = p1
bindtime = 1
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 1,1
sprpriority = 3+random%3
ownpal = 1
ontop = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 140
anim = 508
ID = 508
scale = 1,1
pos = 20,5
postype = p1  
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
sprpriority = 6
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 140
anim = F1410
id = 1410
pos = 20,4
scale = 2,0.3
postype = p1
facing = 1
vfacing = -1
bindtime = 50
removetime = 50
sprpriority = -1
supermovetime = 99999
pausemovetime = 99999
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 140 && time < 180 && timemod = 5,1
anim = F470
id = 470
pos = 20+random%40+(time-140)*3,15-random%20
postype = p1
facing = 1
bindtime = 1
removetime = 44
sprpriority = 5
removeongethit = 1
scale = 0.6,0.3
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 140 && time < 180 && timemod = 5,1
anim = F470
id = 470
pos = 20-random%40-(time-140)*3,15-random%20
postype = p1
facing = 1
bindtime = 1
removetime = 44
sprpriority = 5
removeongethit = 1
scale = 0.6,0.3
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, End]
type = ChangeState
trigger1 = Time = 200
value = 852
ctrl = 1
;-----------------
[StateDef 852]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 852
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S6,9

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 198
ctrl = 1
;-----------------
;Rozsciaganie ekranu
[StateDef 855]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 855
poweradd = 0
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 10,10

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 0
value = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
x = parent, pos x

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= -260
y = -5

[State 0, VelSet]
type = VelSet
trigger1 = pos y <= -260
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = pos y <= -260
y = -240

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 0, end]
type = destroyself
trigger1 = parent, stateno != 630 && parent, stateno != [850,854]
;-----------------
;Raiton
[StateDef 856]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 856
poweradd = 0
sprpriority = 5

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 5
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 170

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(51) = 0
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(52) = 0
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(54) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 105276

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [850,854]
time = 1
pos = ceil(28*0.95),-ceil(121*0.95)

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = timemod = 4,0 && time > 6
time = 2
add = 0,32,64
mul = 256,256,256

[State 0, BGPalFX]
type = BGPalFX
trigger1 = timemod = 4,2 && time > 6
time = 2
add = 0,96,128
mul = 256,256,256

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20
freq = 50
ampl = 20
phase = 50

[State 0, EnvShake]
type = EnvShake
trigger1 = time > 0 && timemod = 5,0
time = 10
freq = 20
ampl = 2
phase = 20

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F25,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F11,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 10,0
value = F11,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F11,10

[State 0, Explod]
type = Explod
trigger1 = 1
anim = F1300+random%3
id = 1300
pos = -70+random%200,-50-random%450
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3+random%4
scale = 1.5,1.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
angle = 80

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal 
name = "White Flash"
ID = 9999
stateno = 9999
pos = 0,0
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 10
size.yscale = 10
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 4,0
trigger1 = hitcount < 10
attr = S, ST
damage = 60,20
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 5
sprpriority = 5
pausetime = 0, 60
sparkno = 1420+random%3
sparkxy = -10+random%20, 20-random%40
hitsound = F11,7
guardsound = F11,7
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2, -1
airguard.velocity = -2, -1
air.type = High
air.velocity = -2, -1
air.hittime = 20
envshake.time = 20
envshake.ampl = 20
envshake.freq = 100
palfx.time = 70
palfx.mul = 100,200,200
palfx.add = 50,50,200
palfx.sinadd = 150,150,300,4
fall = 1

[State 0, End]
type = destroyself
trigger1 = animtime = 0
;-----------------
;Katon
[StateDef 857]
type = A
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 857
poweradd = 0
sprpriority = 6

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 6
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 80

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(51) = 0
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(52) = 0
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(54) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 105276

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [850,854]
time = 1
pos = ceil(12*0.95),-ceil(115*0.95)

[State 0, EnvShake]
type = EnvShake
trigger1 = time%5 = 0
time = 20
freq = 25
ampl = -3
phase = 90

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,20

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F10,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 15,0
value = F10,2

[State 0, Iskry]
type = Explod
ownpal = 1
trigger1 = time % 16 = 0 && numexplod(271) <= 2
anim = F271
ID = 271
pos = 30,-100
postype = p1
vel = 0,0
bindtime = 1
removetime = 60
supermovetime=9999
pausemovetime=9999
scale = 2,2
sprpriority = 6
ownpal = 1
angle = -80

[State 0, Kola]
type = Explod
ownpal = 1
trigger1 = time < 50 && time % 20 = 0 && numexplod(820) <= 1
anim = F820
id = 820
pos = 25,-50
scale = 2,4
vel = 0.8,-5
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 7
supermovetime=9999
pausemovetime=9999
angle = 100

[State 0, hitdef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 5,0
trigger1 = hitcount < 10
attr = S, ST
damage = 60,20
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 6
sprpriority = 6
pausetime = 0, 10
sparkno = 1400
sparkxy = -30+random%30, -10-random%40
hitsound = F10, 0
guardsound = F10, 0
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -1,-4
airguard.velocity = -1,-4
air.type = High
air.velocity = -1,-4
air.hittime = 20
fall = 1
palfx.time = 30
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10

[State 0, end]
type = destroyself
trigger1 = time = 60
;------------------
;Futon
[StateDef 858]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 858
poweradd = 0
sprpriority = 7

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 7
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -10

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(51) = 0
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(52) = 0
trigger1 = enemy(cond((enemy(0),alive),0,1)), var(54) = 0
trigger1 = !(enemynear, ishelper)
trigger1 = target, ishelper = 0
trigger1 = movehit
value = 105276

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,SP
time = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NP,HP,NT,ST,HT
time = -1

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [850,854]
time = 1
pos = ceil(38*0.95),-ceil(110*0.95)

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20
freq = 100
ampl = -5
phase = 190

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 508
ID = 508
scale = 1.4,1.4
pos = -5,0
postype = p1  
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
sprpriority = 3
ontop = 0
supermovetime = 9999
pausemovetime = 9999
angle = -10

[State 0, VelSet]
type = VelSet
trigger1 = 1
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%3
angle = -25+random%50
pos = -5-random%20,-30-random%30
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.3,1.3
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F643
pos = -5-random%20,-15-random%30
postype = p2  
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1.3,1.3
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 20,0
value = F14,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F15,11

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = timemod = 5,0
trigger1 = hitcount < 10
attr = S, ST
damage = 60,20
animtype = Light
guardflag = MA
hitflag = MAFD
priority = 7
sprpriority = 7
pausetime = 0, 10
sparkno = 4
sparkxy = -15, 0
hitsound = 14, 5
guardsound = 14, 5
ground.type = High
ground.slidetime = 5
ground.hittime = 20
ground.velocity = -2,-8
airguard.velocity =  -2,-8
air.type = High
air.velocity = -2,-8
air.hittime = 20
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
;---------------------------------------------------------
;Vary Jiongu
[StateDef 105276]

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 51
value = 400

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 52
value = 400

[State 0, ChangeState]
type = ChangeState
trigger1 = ishelper
value = 199989

[State 0, end]
type = SelfState
trigger1 = !ishelper
value = cond(pos y = 0,5000,5050)
;----------------------------------------------------------------------------
;Doton: Domu
[Statedef 1000]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = S6,16

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = S1,0+random%12
channel = 6

[State 0, Explod]
type = Explod
trigger1 = time > 5 && time <= 30
anim = 1001
ID = 1001
pos = 0,0
postype = p1  
facing = 1
vfacing = 1
bindtime = -1
removetime = 1
supermovetime = 999
scale = 0.95,0.95
sprpriority = 1
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = (time-5)*10,256-(time-5)*10

[State 0, VarSet]
type = VarSet
trigger1 = time = 30
v = 2
value = 1

[state 0, Doton Domu]
type = RemapPal
trigger1 = time = 30
source = 0,41
dest = 1000,41

[state 0, Doton Domu]
type = RemapPal
trigger1 = time = 30
source = 1000,41
dest = 1000,41

[State 250, 5]
type = ChangeState
trigger1 = time = 40
value = 0
ctrl = 1
;----------------------------------------------------------------------------
;Domu End
[Statedef 1005]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 1005
ctrl = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 3
v = 2
value = 0

[state 0, Doton Domu]
type = RemapPal
trigger1 = animelem = 3
source = 0,41
dest = 0,41

[state 0, Doton Domu]
type = RemapPal
trigger1 = animelem = 3
source = 1000,41
dest = 0,41

[State 250, 5]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------
;White Flash
[Statedef 9999]
type = S
movetype = I
physics = S
velset = 0,0
sprpriority = 40
anim = 9999
ctrl = 0

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 40

[State 0, Trans]
type = Trans
trigger1 = time < 8
trans = addalpha
alpha = time*32,256-time*32

[State 0, Trans]
type = Trans
trigger1 = time >= 8
trans = addalpha
alpha = 256-(time-8)*32,(time-8)*32

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 16
;--------------
;Weapon Throw
[StateDef 70650]
type = S
movetype = A
physics = S
juggle = 0
poweradd = 0
anim = 70650
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S4,0+random%10
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 20
value = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal
name = "kunai"
ID = 70700
stateno = 70700
pos = 0,-ceil(49*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------
;Weapon Throw
[StateDef 70655]
type = A
movetype = A
physics = A
juggle = 0
poweradd = 0
anim = 70655
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S4,0+random%10
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F21,4

[State 0, VarAdd]
type = VarAdd
trigger1 = animelem = 2
v = 20
value = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal
name = "kunai"
ID = 70701
stateno = 70701
pos = ceil(3*0.92),-ceil(32*0.95)
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1

[State 310, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;Kagemane: Nadanie Vara
[Statedef 104099]
type = S
physics = S
sprpriority = 0

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 46  
value = 1

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 5000+var(0)*10000
value = 5000+var(0)*10000

;ANTI CLONE - CLONE DESTROY -----
[State 0, VarSet]
type = VarSet
trigger1 = !ishelper
v = 39
value = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(39) = 0
;triggerall = !ishelper(20000)

[State 0, ChangeState]
type = ChangeState
triggerall = time = 5
trigger1 = !ishelper
;trigger2 = ishelper(20000)
value = 104000
;---------------
;Odbicie od sciany
[Statedef 109990]
type = A
movetype= H
physics = N
velset = 0,0
anim = 5030

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5030
value = 5030+var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 109991


;---------------------------------------------------------------------------
;Odbicie od sciany
[Statedef 109991]
type = A
movetype= H
physics = N
anim = 5000

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
trigger2 = timemod = 6,0
anim = F1391
ID = 380
pos = -20,-25
postype = p1  
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
ontop = 0
angle = cond(vel x != 0,atan(vel y/vel x)*180/PI, 0) -30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F8,9

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F14,6

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5000
value = 5000+var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 1026, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 109992

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;---------------------------------------------------------------------------
;Odbicie od sciany
[Statedef 109992]
type = A
movetype= H
physics = N
anim = 5030

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5030
value = 5030+var(0)*10000

[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time= 1
value = F7,1

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,2

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F15,2

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F15,4

[State 0, Turn]
type = Turn
trigger1 = frontedgedist<backedgedist
trigger1 = time = 0

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 1
anim = F1190
pos = -15,-25
postype = p1
facing = 1
scale = 1,1
sprpriority = 4
angle = 90

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 1
anim = F1080
pos = -15,-25
postype = p1
facing = 1
sprpriority = -1
angle = 270
scale = 0.7,0.7

[State 1027, Spark]
type = Explod
ownpal = 1
trigger1 = Time = 1
anim = F1200
pos = -15,-25
postype = p1
facing = -1
sprpriority = -1
scale = 1.1,1.1

[State 1027, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 109993

;---------------------------------------------------------------------------
;Odbicie od sciany
[Statedef 109993]
type = A
movetype= H
physics = N
anim = 5060

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = vel x != 0
Value = -((ATan(vel y/vel x))*(180.0/PI))

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0

[State 0, 1]
type = ChangeAnim
trigger1 = var(0) != 0
trigger1 = Anim = 5060
value = 5060+var(0)*10000


[State 210, 2]
type = AfterImage
trigger1 = (!time)
time = 14
length = 15
palcontrast = 160,150,150
paladd = 5,0,0
palmul = 1,1,1
trans = add1

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5050]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
trigger1 = var(0) != 0
value = 5050+var(0)*10000

[State 1028, Anim 5052]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5052]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
trigger1 = var(0) != 0
value = 5052+var(0)*10000

[State 1028, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
trigger1 = var(0) != 0
value = 5060+var(0)*10000

[State 1028, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
trigger1 = var(0) != 0
value = 5062+var(0)*10000

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;---------------------------------------------------------------------------
;Odbicie od sciany
[Statedef 109994 ]
type    = A
movetype= H
physics = N
anim = 100022

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1 
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = var(0) != 0
value = 100022 + var(0)*10000

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = 1
value = time*20

[State 212, Velocity]
type = HitVelSet
trigger1 = Time = 1
x = 1
y = -1

[State 212, Gravity]
type = VelAdd
trigger1 = time > 1 && 1
y = .3

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -20

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
trigger2 = timemod = 6,0
anim = F1391
ID = 380
pos = -20,-25
postype = p1  
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = 0.7,0.7
sprpriority = 3
ontop = 0
angle = cond(vel x != 0,atan(vel y/vel x)*180/PI, 0) -30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F8,9

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F14,6

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 109992

[State 212, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5050

[Statedef -2]

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "Var(47) = %d | Var(48) = %d | Var(49) = %d | VarAttak = %d | VarCombo = %d | Jutsu = %d"
params = var(47), var(48), var(49), ceil(var(49)), ceil(var(49)*5+var(48)), ceil(((ceil(var(49)/5)+10)*ceil(Power/100))/200)

;Suijinheki
[State 0, TARCZA SUJINHEKI]
type = NotHitBy
trigger1 = helper(705), stateno = 705 && helper(705), time > 10
trigger2 = helper(705), stateno = 705 && helper(706), time < 10
triggerall = var(18) = 1
triggerall = numhelper(705) = 1
triggerall = numhelper(707) = 1
triggerall = !ishelper
triggerall = stateno != [100000,199999]
value = ,NA,SA,HA,ST,NP,HP
time = 2

;Domu
[state 0, Doton Domu]
type = RemapPal
trigger1 = var(2) = 0
source = 0,41
dest = 0,41

[state 0, Doton Domu]
type = RemapPal
trigger1 = var(2) = 0
source = 1000,41
dest = 0,41

[state 0, Doton Domu]
type = RemapPal
trigger1 = var(2) = 1
source = 0,41
dest = 1000,41

[state 0, Doton Domu]
type = RemapPal
trigger1 = var(2) = 1
source = 1000,41
dest = 1000,41

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 1000
id = 1001

[State 0, PowerAdd]
type = PowerAdd
trigger1 = var(2) = 1 && stateno != [1000,1005]
trigger1 = timemod = 5,0
triggerall = stateno != 70850
triggerall = stateno != [10000,199999]
triggerall = prevstateno != [190,194]
triggerall = prevstateno != 5900
value = -5

[State 0, VarSet]
type = VarSet
trigger1 = life = 0
trigger2 = !Alive
trigger3 = power <= 5
trigger4 = lose
v = 2
value = 0

[State -2, DefenseMulSet]
type = LifeAdd
trigger1 = var(2) = 1
triggerall = power > 0
triggerall = Alive && MoveType = H
trigger1 = (FVar(8) - life)>0
value = floor((0.5 - 1.0) * ifElse((FVar(8)-life) < life, -(FVar(8) - life),0))

[State -2, DefenseMulSet]
type = VarSet
trigger1 = 1
fvar(8) = life
ignorehitpause = 1

;-----------------

;SMIERC OSTATECZNA
[State 0, SMIERC OSTATECZNA]
type = ChangeState
triggerall = prevstateno = 5150
triggerall = stateno != 5150
trigger1 = alive = 0
trigger2 = life = 0
value = 5150
ctrl = 0

[State 0, STANIE W POWIETRZU]
type = SelfState
trigger1 = stateno = [0,39]
trigger2 = stateno = 100
triggerall = pos y < 0
value = 50

[State 0, STANIE POD ZIEMIA]
type = PosSet
trigger1 = stateno = [0,39]
trigger2 = stateno = 100
triggerall = pos y > 0
y = 0

[State 0, OGRANICZENIE WYSOKOSCI]
type = PosSet
trigger1 = pos y < -500
y = -500

;--------------------

[State -2, Button Z]
type = Explod
triggerall = var(50) = 0
triggerall = stateno = 400 || stateno = 401 || stateno = 530 || stateno = 531
trigger1 = command = "z"
trigger2 = stateno = 400 && time = 10
trigger3 = stateno = 530 && time = 10
triggerall = numexplod(1614) = 0
anim = F1614
ID = 1614
pos = cond(pos y = 0,-16,12),cond(pos y = 0,-60,-70)
postype = p1
facing = facing
vfacing = 1
;vel = 0,2 
;accel = 0,-0.1
bindtime = -1
removetime = -1
scale = 0.7,0.7
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 400 && stateno != 401
trigger1 = stateno != 530 && stateno != 531
id = 1614

;----------------------


;----Arena Uchiha-----------

[State 0, PosSet]
type = PosSet
trigger1 = pos y < -300
triggerall = numhelper(70003) != 0
triggerall = helper(70003), var(10) = 0
triggerall = StageVar(info.name) = "U"
y = -300

;ANTI CLONE - CLONE DESTROY -----
[State 0, VarSet]
type = VarSet
trigger1 = !ishelper
v = 39
value = 1

[State 0, DestroySelf]
type = DestroySelf
triggerall = var(39) = 0
trigger1 = stateno = [0,99]
trigger2 = stateno = [5000,5100]
trigger3 = stateno = [100000,199999]

;-------------------------------------------------------------------------
;===================[ Liczniki, Okrg i Fatality ]========================
;-------------------------------------------------------------------------
[State -2, Arrow Down]
type = Explod
trigger1 = stateno = 70850
trigger2 = prevstateno = 70850 && time < 2
triggerall = command = "holddown"
triggerall = numexplod(1600) = 0
anim = F1600
ID = 1600
pos = cond(pos y = 0,5*0.95,13*0.95),cond(pos y = 0,-40*0.95,-37*0.95)
postype = p1
facing = 1
vfacing = 1
vel = 0,2 
accel = 0,-0.1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Up]
type = Explod
trigger1 = stateno = 70850
trigger2 = prevstateno = 70850 && time < 2
triggerall = command = "holdup"
triggerall = numexplod(1601) = 0
anim = F1601
ID = 1601
pos = cond(pos y = 0,5*0.95,13*0.95),cond(pos y = 0,-60*0.95,-57*0.95)
postype = p1
facing = 1
vfacing = 1
vel = 0,-2 
accel = 0,0.1
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Forward]
type = Explod
trigger1 = stateno = 70850
trigger2 = prevstateno = 70850 && time < 2
triggerall = command = "holdfwd"
triggerall = numexplod(1602) = 0
anim = F1602
ID = 1602
pos = cond(pos y = 0,15*0.95,23*0.95),cond(pos y = 0,-50*0.95,-47*0.95)
postype = p1
facing = 1
vfacing = 1
vel = 2,0
accel = -0.1,0
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Arrow Back]
type = Explod
trigger1 = stateno = 70850
trigger2 = prevstateno = 70850 && time < 2
triggerall = command = "holdback"
triggerall = numexplod(1603) = 0
anim = F1603
ID = 1603
pos = cond(pos y = 0,-5*0.95,-7*0.95),cond(pos y = 0,-50*0.95,-47*0.95)
postype = p1
facing = 1
vfacing = 1
vel = -2,0
accel = 0.1,0
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, Okrg]
type = Helper
trigger1 = numhelper(70300) = 0
trigger1 = alive
helpertype = normal
name = "Okrg"
ID = 70300
stateno = 70300
pos = 0,0
postype = p1
facing = 1
ownpal = 1
size.yscale = 0.4

[State -2, Fatality Hit]
type = Helper
trigger1 = !alive && numhelper(70400) = 0
helpertype = normal
name = "Fatality Hit"
ID = 70400
stateno = 70400
pos = 0, 0
postype = p1 
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = -20
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State -2, Efekty do aren]
type = Helper
triggerall = teamside = 1 || teamside = 2 && numenemy = 0
triggerall = numhelper(70003) = 0
trigger1 = numpartner = 0
trigger2 = partner, ID > ID && numpartner = 1
trigger3 = teammode = turns && numpartner = 0
helpertype = normal
name = "Efekty do aren"
ID = 70003
stateno = 77003
pos = 0,30
postype = p1
facing = 1
ownpal = 1

[State -2, Licznik Lewa strona]
type = Helper
triggerall = stateno!=5500
triggerall = numenemy != 0
triggerall = teamside = 1
triggerall = numhelper(70000) = 0
trigger1 = numpartner = 0
trigger2 = partner, ID > ID && numpartner = 1
trigger3 = teammode = turns && numpartner = 0
helpertype = normal
name = "P1 Licznik Lewa strona"
ID = 70000
stateno = 77000
pos = 0,30
postype = p1
facing = 1
ownpal = 1

[State -2, Licznik Prawa strona]
type = Helper
triggerall = stateno!=5500
triggerall = numenemy != 0
triggerall = teamside = 2
triggerall = numhelper(70000) = 0
trigger1 = numpartner = 0
trigger2 = partner, ID > ID && numpartner = 1
trigger3 = teammode = turns && numpartner = 0
helpertype = normal
name = "P2 Licznik Prawa strona"
ID = 70000
stateno = 78000
pos = 0,30
postype = p1
facing = 1
ownpal = 1

[State -2, Licznik Lewa strona 2]
type = Helper
triggerall = numenemy != 0
triggerall = teamside = 1
triggerall = numhelper(70001) = 0
trigger1 = numpartner = 1
trigger1 = partner, ID < ID
helpertype = normal
name = "P3 Licznik Lewa strona"
ID = 70001
stateno = 77001
pos = 0,30
postype = p1
facing = 1
ownpal = 1

[State -2, Licznik Prawa strona 2]
type = Helper
triggerall = numenemy != 0
triggerall = teamside = 2
triggerall = numhelper(70001) = 0
trigger1 = numpartner = 1
trigger1 = partner, ID < ID
helpertype = normal
name = "P4 Licznik Prawa strona"
ID = 70001
stateno = 78001
pos = 0,30
postype = p1
facing = 1
ownpal = 1
;-------------------------------------------------------------------------
;==========================[ Vary Wsplne ]===============================
;-------------------------------------------------------------------------

;>>>>>>>>>>>> Byakugan <<<<<<<<<<<<<<<<<
[State 0, PowerSet]
type = PowerSet
trigger1 = power > (PowerMax - enemy, var(34))
value = PowerMax - enemy, var(34)

;>>>>>>>>>>>>>>> Kakashi - Mangekyou Sharingan <<<<<<<<<<<<<<<
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = alive = 0 && var(36) != 0
flag = invisible

[State 0, VarSet]
type = VarSet
trigger1 = stateno != 100051 && alive = 1
v = 36
value = 0

[State -3]
type = AfterImage
trigger1 = alive = 0 && var(36) != 0
time = 1
length = 1
trans = add

;>>>>>>>>>>>>>>> Kltwa Hidana <<<<<<<<<<<<<<<
[State -2, Varset]
type = VarSet
trigger1 = stateno = 5150
var(35) = 0

[State -2, LifeAdd]
type = LifeAdd
trigger1 = var(35) != 0
trigger1 = PlayerID(var(35)),var(0)=1
triggerall = !ishelper
value = -PlayerID(var(35)),var(1)
kill = cond(PlayerID(var(35)),stateno=421 || PlayerID(var(35)),stateno=422 || PlayerID(var(35)),stateno=423 || PlayerID(var(35)),stateno=424 || PlayerID(var(35)),stateno=431 || PlayerID(var(35)),stateno=432 || PlayerID(var(35)),stateno=433 ,1,0)

[State 0, ChangeState]
type = ChangeState
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),var(0)=1
triggerall = !ishelper
trigger1 = PlayerID(var(35)),stateno = [422,429]
trigger1 = PlayerID(var(35)),time < 12
trigger2 = PlayerID(var(35)),stateno = 424
triggerall = PlayerID(var(35)),var(1) != 0
triggerall = stateno != 5050
value = 5050

[State 0, explode]
type = Explod
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),stateno = 421
trigger1 = PlayerID(var(35)),time = 5
trigger2 = PlayerID(var(35)),time = 7
anim = F10+random%1
angle = -25+random%50
ID = 4004
pos = cond(statetype != L,10,8),cond(statetype != L,-28,5)
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, explode]
type = Explod
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),stateno = 422
trigger1 = PlayerID(var(35)),time = 5
trigger2 = PlayerID(var(35)),time = 7
anim = F10+random%2
angle = -25+random%50
ID = 4004
pos = cond(statetype != L,7,15),cond(statetype != L,-15,-10)
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.7,0.7
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, explode]
type = Explod
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),stateno = 423
trigger1 = PlayerID(var(35)),time = 5
trigger2 = PlayerID(var(35)),time = 7
anim = F11+random%1
angle = -25+random%50
ID = 4004
pos = cond(statetype != L,5,0),cond(statetype != L,-32,-10)
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, explode]
type = Explod
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),stateno = 431
trigger1 = PlayerID(var(35)),time = 6
anim = F10+random%1
angle = -25+random%50
ID = 4004
pos = cond(statetype != L,10,8),cond(statetype != L,-28,5)
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.4,0.4
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, explode]
type = Explod
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),stateno = 432
trigger1 = PlayerID(var(35)),time = 6
anim = F10+random%2
angle = -25+random%50
ID = 4004
pos = cond(statetype != L,7,15),cond(statetype != L,-15,-10)
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, explode]
type = Explod
triggerall = var(35) != 0
triggerall = PlayerID(var(35)),stateno = 433
trigger1 = PlayerID(var(35)),time = 6
anim = F11+random%1
angle = -25+random%50
ID = 4004
pos = cond(statetype != L,5,0),cond(statetype != L,-32,-10)
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.6,0.6
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, explode]
type = Explod
triggerall = var(35) != 0
trigger1 = PlayerID(var(35)),stateno = 424
trigger1 = PlayerID(var(35)),time = 125
anim = F1500
ID = 4004
pos = 0,-30
postype = p1
bindtime = 1
removetime = 25
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
sprpriority = 6
ownpal = 1
ontop = 0

;>>>>>>>>>>>>>>> Koto Amatsukami <<<<<<<<<<<<<<<
[State 0, CtrlSet]
type = CtrlSet
trigger1 = enemy, var(45) != 0
value = 0

;>>>>>>>>>>>>>>> Pieczec Danzo <<<<<<<<<<<<<<<
[State -2, Varset]
type = VarSet
trigger1 = stateno = 5150
var(40) = 0

[State 0, ChangeState]
type = ChangeState
triggerall = var(40) != 0
triggerall = !ishelper
trigger1 = PlayerID(var(40)),stateno = 630
triggerall = PlayerID(var(40)),var(3) = 2
triggerall = stateno != 5050
value = 105250

;>>>>>>>>>>>>>>> Kagemane Shikamaru <<<<<<<<<<<<<<<
[State 0, CtrlSet]
type = CtrlSet
trigger1 = var(46) = 1
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = enemy, name = "Shikamaru"
trigger1 = enemy, var(10) = 0
trigger1 = var(46) = 1
v = 46
value = 0

[State 0, Changestate]
type = Changestate
trigger1 = var(46) = 1 && (stateno = 0|| stateno = 12 || stateno = 20 || stateno = 52 || stateno = [98,104])
value = 104000

[State 0, Changestate]
type = Changestate
trigger1 = var(46) = 1 && stateno = [10,11]
trigger2 = var(46) = 1 && stateno = 5120
value = 104002

[State 0, Changestate]
type = Changestate
trigger1 = var(46) = 1 && stateno = [40,59]
value = 104008

[State 0, Selfstate]
type = Selfstate
trigger1 = var(46) = 0 && stateno = [104000,104099]
trigger1 = enemy, name = "Shikamaru"
trigger1 = enemy, var(10) = 0
value = cond(pos y = 0,0,50)
ctrl = 1

;>>>>>>>>>>>>>>> Kankuro, Sasori Poison <<<<<<<<<<<<<<<
[State 0, VarAdd]
type = VarAdd
trigger1 = var(30) !=0 && gametime%4 = 0
v = 30
value = -1

[State 0, PalFXWiz]
type = PalFX
trigger1 = var(30) != 0
trigger1 = gametime%18 = 0
trigger1 = !ishelper
time = 18
add = 100,0,100
mul = 220,120,224
sinadd = 80,50,80,18
invertall = 0
color = 256

[State 0, LifeAdd]
type = LifeAdd
trigger1 = gametime%4 = 0
trigger1 = var(30) != 0
trigger1 = !ishelper
value = -1
kill = 0

[State 0, Trucizna]
type = Explod
trigger1 = var(30) > 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = numexplod(1916) = 0
trigger1 = !ishelper
anim = F1916
ID = 1916
pos = 0*facing,cond(stateno = 5110,-25,cond(statetype = C,-50,-70))
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Trucizna]
type = ModifyExplod
trigger1 = var(30) > 0
triggerall = numexplod(1916) = 1
trigger1 = !ishelper
ID = 1916
pos = 0*facing,cond(stateno = 5110,-25,cond(statetype = C,-50,-70))
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(30) = 0
trigger1 = !ishelper
ID = 1916

;>>>>>>>>>>>>>>> Var Katon <<<<<<<<<<<<<<<

[State 0, - Katon - ]
type = VarAdd
triggerall = var(51) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 51
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(51) <= 0
trigger2 = var(53) != 0
trigger3 = ishelper
trigger4 = stateno = [170,194]
trigger5 = stateno = 5150
triggerall = stateno != [109910,109919]
v = 51
value = 0

;~~ Debuff ~~

[State 0, LifeAdd]
type = LifeAdd
trigger1 = timemod = 3,0
triggerall = var(51) > 0
triggerall = var(53) = 0
triggerall = var(54) = 0
value = -1
kill = 1


;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && timemod = 30,0
triggerall = var(51) > 0
triggerall = var(53) = 0
value = F10,4

[State 0, PalFX]
type = PalFX
trigger1 = time > 0 && timemod = 5,0
triggerall = var(51) > 0
triggerall = var(53) = 0
time = 10
add = 240,50,0
mul = 250,224,120
sinadd = 110,55,85,10
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 5,0
triggerall = var(51) > 0
triggerall = var(53) = 0
triggerall = var(54) = 0
anim = F1402
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 1,1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1901) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(51) > 0
triggerall = var(53) = 0
anim = F1901
ID = 1901
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = 0*facing,-0.04
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;Polaczony z Futonem
[State 0, Katon + Futon]
type = LifeAdd
trigger1 = timemod = 4,0
triggerall = var(51) > 0
triggerall = var(54) != 0
value = -3
kill = 1

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 5,0
triggerall = var(51) > 0
triggerall = var(54) != 0
anim = F1402
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 1.6,1.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Raiton <<<<<<<<<<<<<<<

[State 0, - Raiton - ]
type = VarAdd
triggerall = var(52) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 52
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(52) <= 0
trigger2 = var(54) != 0 && var(53) = 0
trigger3 = ishelper
trigger4 = stateno = [170,194]
trigger5 = stateno = 5150
triggerall = stateno != [109920,109929]
v = 52
value = 0

;~~ Debuff ~~

[State 0, ChangeState]
type = ChangeState
triggerall = var(52) = 100 || var(52) = 200 || var(52) = 300 || var(52) = 400 || var(52) = 500
triggerall = var(52) != 0
triggerall = !ishelper
trigger1 = stateno = [0,199]
trigger2 = stateno = 70500+var(0)*1000 
triggerall = stateno != [10000,199999]
triggerall = stateno != [170,194]
value = 109929

;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && timemod = 30,0
triggerall = var(52) > 0
triggerall = var(54) = 0
value = F11,3

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 5,0
triggerall = var(52) > 0
triggerall = var(53) = 0
triggerall = var(54) = 0
anim = F1300+random%3
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 5
removetime = -2
sprpriority = -2+random%5
scale = 0.25,0.25
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1902) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(52) > 0
triggerall = var(54) = 0
anim = F1902
ID = 1902
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = 0.02*facing,0.03
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;Polaczony z Suitonem
[State 0, Raiton + Suiton]
type = LifeAdd
trigger1 = timemod = 3,0
triggerall = var(52) > 0
triggerall = var(53) != 0
value = -1
kill = 1

[State 0, PalFX]
type = PalFX
trigger1 = timemod = 5,0
triggerall = var(52) > 0
triggerall = var(53) != 0
time = 10
add = 50,50,200
mul = 100,200,200
sinadd = 150,150,300,4
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 3,0
triggerall = var(52) > 0
triggerall = var(53) != 0
anim = F1300+random%3
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 5
removetime = -2
sprpriority = -2+random%5
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Suiton <<<<<<<<<<<<<<<

[State 0, - Suiton - ]
type = VarAdd
triggerall = var(53) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 53
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(53) <= 0
trigger2 = var(55) != 0
trigger3 = ishelper
trigger4 = stateno = [170,194]
trigger5 = stateno = 5150
triggerall = stateno != [109930,109939]
v = 53
value = 0

;~~ Debuff ~~

[State 0, Atk Break]
type = Explod
trigger1 = var(53) > 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = numexplod(1910) = 0
anim = F1910
ID = 1910
pos = -10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Atk Break]
type = ModifyExplod
trigger1 = var(53) > 0
triggerall = numexplod(1910) = 1
ID = 1910
pos = -10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(53) = 0
ID = 1910

[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = var(53) = 0
value = 1

[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = var(53) > 0
value = 0.6


;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && timemod = 30,0
triggerall = var(53) > 0
triggerall = var(55) = 0
value = F12,0

[State 0, Explod]
type = Explod
trigger1 = time > 0 && timemod = 10,0
triggerall = var(53) > 0
triggerall = var(55) = 0
anim = F1550
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1903) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(53) > 0
triggerall = var(55) = 0
anim = F1903
ID = 1903
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = -0.03*facing,-0.02
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Fuuton <<<<<<<<<<<<<<<

[State 0, - Fuuton - ]
type = VarAdd
triggerall = var(54) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 54
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(54) <= 0
;trigger2 = var(51) != 0
trigger2 = ishelper
trigger3 = stateno = [170,194]
trigger4 = stateno = 5150
triggerall = stateno != [109940,109949]
v = 54
value = 0

;~~ Debuff ~~

[State 0, Def Break]
type = Explod
trigger1 = var(54) > 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = numexplod(1912) = 0
anim = F1912
ID = 1912
pos = 10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Def Break]
type = ModifyExplod
trigger1 = var(54) > 0
triggerall = numexplod(1912) = 1
ID = 1912
pos = 10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(54) = 0
ID = 1912

[State 0, DefenceMulSet]
type = DefenceMulSet
trigger1 = var(54) = 0
value = 1

[State 0, DefenceMulSet]
type = DefenceMulSet
trigger1 = var(54) > 0
value = 1.25

;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && timemod = 40,0
triggerall = var(54) > 0
;triggerall = var(51) = 0
value = F14,6

[State 0, Explod]
type = Explod
trigger1 = time > 0 &&  timemod = 10,0
triggerall = var(54) > 0
;triggerall = var(51) = 0
anim = F643
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1904) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(54) > 0
;triggerall = var(51) = 0
anim = F1904
ID = 1904
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = 0.03*facing,-0.02
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Doton <<<<<<<<<<<<<<<
[State 0, - Doton - ]
type = VarAdd
triggerall = var(55) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 55
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(55) <= 0
trigger2 = var(52) != 0
trigger3 = ishelper
trigger4 = stateno = [170,194]
trigger5 = stateno = 5150
triggerall = stateno != [109950,109959]
v = 55
value = 0

;~~ Debuff ~~

[State 0, Slow]
type = Explod
trigger1 = var(55) > 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = numexplod(1914) = 0
anim = F1914
ID = 1914
pos = -10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Slow]
type = ModifyExplod
trigger1 = var(55) > 0
triggerall = numexplod(1910) = 1
ID = 1910
pos = -10*facing,10
postype = p1
facing = cond(facing = 1,1,-1)
bindtime = -1
removetime = -1
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(55) = 0
ID = 1914

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 45 || stateno = 60
value = 50
ctrl = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = var(55) != 0
trigger1 = stateno = 50
y = -(const(velocity.jump.y))/20

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 100 || stateno = 101
value = 20
ctrl = 1

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 102 || stateno = 103
value = 11
ctrl = 1

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 105
value = 0
ctrl = 1

[State 0, SelfState]
type = SelfState
trigger1 = var(55) != 0
trigger1 = stateno = 70600
value = 0
ctrl = 1

;~~ Efekty ~~

[State 0, PalFX]
type = PalFX
trigger1 = timemod = 5,0
triggerall = var(55) > 0
triggerall = var(52) = 0
time = 10
add = 25,20,5
mul = 196,186,166
sinadd = 0,0,0,1
invertall = 0
color = 256

;~~ Ikonka ~~

[State 0, Ikonka]
type = Explod
trigger1 = numexplod(1905) = 0
triggerall = stateno != 5500
triggerall = numenemy != 0
triggerall = var(55) > 0
triggerall = var(52) = 0
anim = F1905
ID = 1905
pos = 0,cond(stateno = 5110,0,cond(statetype = C,-15,-30))
postype = p1
facing = 1
bindtime = 2
removetime = -2
sprpriority = 10
accel = -0.02*facing,0.03
scale = 0.4,0.4
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Czarne Plomienie <<<<<<<<<<<<<<<
[State 0, - Amaterasu - ]
type = VarAdd
triggerall = var(56) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 56
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(56) <= 0
trigger2 = ishelper
trigger3 = stateno = [170,194]
trigger4 = stateno = 5150
triggerall = stateno != [109960,109969]
v = 56
value = 0

;~~ Debuff ~~

[State 0, LifeAdd]
type = LifeAdd
trigger1 = timemod = 3,0
triggerall = var(56) > 0
value = -2
kill = 1

;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 20,0
triggerall = var(56) > 0
value = F10,2

[State 0, PalFX]
type = PalFX
trigger1 = timemod = 5,0
triggerall = var(56) > 0
time = 10
add = -60,-80,-50
mul = 90,20,120
sinadd = 40,20,50,5
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = timemod = 3,0
triggerall = var(56) > 0
anim = F1700
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-10-random%40))
postype = p1
facing = 1
angle = -20+random%40
bindtime = 10
removetime = -2
sprpriority = -2+random%5
scale = 1,1;0.35,0.35
vel = 0,-1-random%2
accel = 0,0.05
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;>>>>>>>>>>>>>>> Var Kuroi Kaminari <<<<<<<<<<<<<<<
[State 0, - Kuroi Kaminari - ]
type = VarAdd
triggerall = var(57) > 0
trigger1 = stateno = [0,199]
trigger2 = stateno = [5000,5299]
v = 57
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(57) <= 0
trigger2 = ishelper
trigger3 = stateno = [170,194]
trigger4 = stateno = 5150
triggerall = stateno != [109970,109979]
v = 57
value = 0

;~~ Debuff ~~

[State 0, ChangeState]
type = ChangeState
triggerall = timemod = 100,0
triggerall = var(57) != 0
triggerall = !ishelper
trigger1 = stateno = [0,199]
trigger2 = stateno = 70500+var(0)*1000 
;trigger3 = stateno = [5000,5299]
triggerall = stateno != [10000,199999]
triggerall = stateno != [170,194]
value = 109979

;~~ Efekty ~~

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 30,0
triggerall = var(57) > 0
value = F11,3

[State 0, Explod]
type = Explod
trigger1 = timemod = 5,0
triggerall = var(57) > 0
anim = F1701+random%3
angle = random
pos = cond((statetype = L || stateno = 5110 || stateno = 5150),-20+random%40,-10+random%20),cond((statetype = L || stateno = 5110 || stateno = 5150),5-random%15,cond(statetype = C,-10-random%20,-20-random%30))
postype = p1
facing = 1
bindtime = 5
removetime = -2
sprpriority = -2+random%5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

;-------------------------

[Statedef -3]

;-- AI ----------------

[State -3, DeActivate AI]
type = VarSet
triggerall = var(50) = 1
trigger1 = win
trigger2 = lose
trigger3 = drawgame
trigger4 = AILevel = 0
trigger5 = life = 0
trigger6 = !ALive
trigger7 = matchover
v = 50
value = 0

[State -3, Activate AI]
type = VarSet
triggerall = var(50) = 0
trigger1 = AILevel != 0
triggerall = stateno != [190,193]
triggerall = Alive
triggerall = life > 0
triggerall = !matchover
triggerall = !win
triggerall = !lose
triggerall = !drawgame
v = 50
value = 1

[State -3, Human Power VS Human]
type = VarSet
trigger1 = var(50) = 0
triggerall = Alive
triggerall = life > 0
triggerall = !matchover
triggerall = !win
triggerall = !lose
triggerall = !drawgame
triggerall = stateno != 5150
triggerall = NumEnemy
triggerall = enemy, AILevel = 0
v = 49
value = ceil(ceil(exp(0.5*ln(life)))/5.5+(Power/100))

[State -3, Human Power VS AI]
type = VarSet
trigger1 = var(50) = 0
triggerall = Alive
triggerall = life > 0
triggerall = !matchover
triggerall = !win
triggerall = !lose
triggerall = !drawgame
triggerall = stateno != 5150
triggerall = NumEnemy
triggerall = enemy, AILevel != 0
v = 49
value = ceil(ceil(exp(0.5*ln(life)))/5.5+(Enemy, AILevel*5))

[State -3, AI Power]
type = VarSet
trigger1 = var(50) = 1
triggerall = Alive
triggerall = life > 0
triggerall = !matchover
triggerall = !win
triggerall = !lose
triggerall = !drawgame
triggerall = stateno != 5150
v = 49
value = ceil(ceil(exp(0.5*ln(life)))/5.5+(AILevel*5))

[State -3, AI Set Min]
type = VarSet
trigger1 = var(49) < 1
triggerall = Alive
triggerall = life > 0
triggerall = !matchover
triggerall = !win
triggerall = !lose
triggerall = !drawgame
triggerall = stateno != 5150
v = 49
value = 1

[State -3, AI Set Max]
type = VarSet
trigger1 = var(49) >= 50
triggerall = Alive
triggerall = life > 0
triggerall = !matchover
triggerall = !win
triggerall = !lose
triggerall = !drawgame
triggerall = stateno != 5150
v = 49
value = 50

[State -3, Reset Power]
type = VarSet
triggerall = var(49) != 0
trigger1 = !Alive
trigger2 = life = 0
trigger3 = matchover
trigger4 = win
trigger5 = lose
trigger6 = drawgame
trigger7 = stateno = 5150
v = 49
value = 0


;-- ComboMaker --------

[State -3, ComboMaker Add]
type = VarAdd
trigger1 = movecontact = 1
trigger2 = numhelper(200) != 0
trigger2 = helper(200), movecontact = 1
trigger3 = numhelper(215) != 0
trigger3 = helper(215), movecontact = 1
trigger4 = numhelper(225) != 0
trigger4 = helper(225), movecontact = 1
trigger5 = numhelper(255) != 0
trigger5 = helper(255), movecontact = 1
trigger6 = numhelper(265) != 0
trigger6 = helper(265), movecontact = 1
triggerall = stateno = [194,299]
triggerall = stateno != 195
v = 48
value = 25

[State -3, ComboMaker Remove]
type = VarAdd
trigger1 = stateno != [194,299]
triggerall = var(48) > 0
v = 48
value = -1-ceil(var(48)/100)

[State -3, ComboMaker Set]
type = VarSet
trigger1 = var(48) > 250
v = 48   
value = 250

[State -3, VarSet]
type = VarSet
trigger1 = stateno != [194,299]
trigger1 = prevstateno != [194,299]
trigger2 = stateno = [194,299]
trigger2 = stateno != 195
trigger2 = time = 0
trigger3 = stateno = 215 || stateno = 219 || stateno = 225 || stateno = 229 || stateno = 255 || stateno = 259 || stateno = 265 || stateno = 269
trigger3 = time < 45
v = 47
value = 0

[State -3, VarSet]
type = VarSet
trigger1 = movecontact
trigger2 = numhelper(200) != 0
trigger2 = helper(200), movecontact
trigger3 = numhelper(215) != 0
trigger3 = helper(215), movecontact
trigger4 = numhelper(225) != 0
trigger4 = helper(225), movecontact
trigger5 = numhelper(255) != 0
trigger5 = helper(255), movecontact
trigger6 = numhelper(265) != 0
trigger6 = helper(265), movecontact
trigger7 = stateno = 215 || stateno = 219 || stateno = 225 || stateno = 229 || stateno = 255 || stateno = 259 || stateno = 265 || stateno = 269
trigger7 = time >= 45
trigger8 = stateno = [194,199]
triggerall = stateno = [194,299]
triggerall = stateno != 195
v = 47
value = 1

;----------------------

[State -3, PowerAdd]
type = PowerAdd
triggerall = prevstateno != 190+var(0)*10000 
triggerall = stateno = [0,199]
triggerall = stateno != 70500+var(0)*1000 
triggerall = stateno != [5000,5299]
triggerall = stateno != [10000,199999]
triggerall = timemod = 20,0
trigger1 = !ishelper
value = 6

[State -3, Afterimage normal]
type = AfterImage
trigger1 = var(1) = 0
triggerall = time = 0
time = 1